
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Adding Object Detections to a Dataset ¶ - Voxel51 Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#adding-object-detections-to-a-dataset" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Voxel51 Documentation" class="md-header__button md-logo" aria-label="Voxel51 Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Voxel51 Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Adding Object Detections to a Dataset ¶
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/thesteve0/vdoc-mkdocs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Voxel51 Documentation" class="md-nav__button md-logo" aria-label="Voxel51 Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Voxel51 Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/thesteve0/vdoc-mkdocs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/virtualenv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtualenvs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/datasets_samples_fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Datasets, Samples, and Fields
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/application_tour/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tour of the Applications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../fiftyone_concepts/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    FiftyOne Concepts
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            FiftyOne Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Machine Learning
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How Do I
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../data_and_models/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Data and Models
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Data and Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../data_and_models/dataset_zoo/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Zoo Datasets
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Zoo Datasets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_and_models/dataset_zoo/datasets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Built-In Zoo Datasets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_and_models/dataset_zoo/remote/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remotely-Sourced Zoo Datasets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_and_models/dataset_zoo/api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zoo Data API
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_and_models/hugging_face_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hugging Face Datasets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrations
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    References
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            References
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../community/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Community
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../teams/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fifty One Teams
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Releases
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    <span class="md-ellipsis">
      Setup ¶
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-a-detection-dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Loading a detection dataset ¶
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-model-predictions" class="md-nav__link">
    <span class="md-ellipsis">
      Adding model predictions ¶
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-fiftyone-app" class="md-nav__link">
    <span class="md-ellipsis">
      Using the FiftyOne App ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using the FiftyOne App ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#visualizing-bounding-boxes" class="md-nav__link">
    <span class="md-ellipsis">
      Visualizing bounding boxes ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visualizing-object-patches" class="md-nav__link">
    <span class="md-ellipsis">
      Visualizing object patches ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#confidence-thresholding-in-the-app" class="md-nav__link">
    <span class="md-ellipsis">
      Confidence thresholding in the App ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#confidence-thresholding-in-python" class="md-nav__link">
    <span class="md-ellipsis">
      Confidence thresholding in Python ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#selecting-samples-of-interest" class="md-nav__link">
    <span class="md-ellipsis">
      Selecting samples of interest ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/thesteve0/vdoc-mkdocs/blob/main/docs/recipes/adding_detections.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="adding-object-detections-to-a-dataset">Adding Object Detections to a Dataset <a href="#Adding-Object-Detections-to-a-Dataset" title="Permalink to this headline">¶</a><a class="headerlink" href="#adding-object-detections-to-a-dataset" title="Permanent link">&para;</a></h1>
<p>This recipe provides a glimpse into the possibilities for integrating FiftyOne into your ML workflows. Specifically, it covers:</p>
<ul>
<li>
<p>Loading an object detection dataset from the <a href="https://voxel51.com/docs/fiftyone/user_guide/dataset_zoo/index.html">Dataset Zoo</a></p>
</li>
<li>
<p><a href="https://voxel51.com/docs/fiftyone/user_guide/using_datasets.html#object-detection">Adding predictions</a> from an object detector to the dataset</p>
</li>
<li>
<p>Launching the <a href="https://voxel51.com/docs/fiftyone/user_guide/app.html">FiftyOne App</a> and visualizing/exploring your data</p>
</li>
<li>
<p>Integrating the App into your data analysis workflow</p>
</li>
</ul>
<h2 id="setup">Setup <a href="#Setup" title="Permalink to this headline">¶</a><a class="headerlink" href="#setup" title="Permanent link">&para;</a></h2>
<p>If you haven’t already, install FiftyOne:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="n">fiftyone</span>
</span></code></pre></div>
<p>In this tutorial, we’ll use an off-the-shelf <a href="https://pytorch.org/docs/stable/torchvision/models.html#faster-r-cnn">Faster R-CNN detection model</a> provided by PyTorch. To use it, you’ll need to install <code>torch</code> and <code>torchvision</code>, if necessary.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="n">torch</span> <span class="n">torchvision</span>
</span></code></pre></div>
<h2 id="loading-a-detection-dataset">Loading a detection dataset <a href="#Loading-a-detection-dataset" title="Permalink to this headline">¶</a><a class="headerlink" href="#loading-a-detection-dataset" title="Permanent link">&para;</a></h2>
<p>In this recipe, we’ll work with the validation split of the <a href="https://cocodataset.org/#home">COCO dataset</a>, which is conveniently available for download via the <a href="https://voxel51.com/docs/fiftyone/user_guide/dataset_zoo/datasets.html#coco-2017">FiftyOne Dataset Zoo</a>.</p>
<p>The snippet below will download the validation split and load it into FiftyOne.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">fo</span>
</span><span id="__span-5-2"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.zoo</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">foz</span>
</span><span id="__span-5-3">
</span><span id="__span-5-4"><span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span>
</span><span id="__span-5-5">    <span class="s2">&quot;coco-2017&quot;</span><span class="p">,</span>
</span><span id="__span-5-6">    <span class="n">split</span><span class="o">=</span><span class="s2">&quot;validation&quot;</span><span class="p">,</span>
</span><span id="__span-5-7">    <span class="n">dataset_name</span><span class="o">=</span><span class="s2">&quot;detector-recipe&quot;</span><span class="p">,</span>
</span><span id="__span-5-8"><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><span class="n">Split</span> <span class="s1">&#39;validation&#39;</span> <span class="n">already</span> <span class="n">downloaded</span>
</span><span id="__span-6-2"><span class="n">Loading</span> <span class="s1">&#39;coco-2017&#39;</span> <span class="n">split</span> <span class="s1">&#39;validation&#39;</span>
</span><span id="__span-6-3"> <span class="mi">100</span><span class="o">%</span> <span class="o">|</span><span class="err">████████████████████</span><span class="o">|</span> <span class="mi">5000</span><span class="o">/</span><span class="mi">5000</span> <span class="p">[</span><span class="mf">43.3</span><span class="n">s</span> <span class="n">elapsed</span><span class="p">,</span> <span class="mi">0</span><span class="n">s</span> <span class="n">remaining</span><span class="p">,</span> <span class="mf">114.9</span> <span class="n">samples</span><span class="o">/</span><span class="n">s</span><span class="p">]</span>
</span><span id="__span-6-4"><span class="n">Dataset</span> <span class="s1">&#39;detector-recipe&#39;</span> <span class="n">created</span>
</span></code></pre></div>
<p>Let’s inspect the dataset to see what we downloaded:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><span class="c1"># Print some information about the dataset</span>
</span><span id="__span-8-2"><span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><span class="n">Name</span><span class="p">:</span>           <span class="n">detector</span><span class="o">-</span><span class="n">recipe</span>
</span><span id="__span-9-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>     <span class="n">image</span>
</span><span id="__span-9-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span>    <span class="mi">5000</span>
</span><span id="__span-9-4"><span class="n">Persistent</span><span class="p">:</span>     <span class="kc">False</span>
</span><span id="__span-9-5"><span class="n">Info</span><span class="p">:</span>           <span class="p">{</span><span class="s1">&#39;classes&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;person&#39;</span><span class="p">,</span> <span class="s1">&#39;bicycle&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">]}</span>
</span><span id="__span-9-6"><span class="n">Tags</span><span class="p">:</span>           <span class="p">[</span><span class="s1">&#39;validation&#39;</span><span class="p">]</span>
</span><span id="__span-9-7"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-9-8">    <span class="n">filepath</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-9-9">    <span class="n">tags</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-9-10">    <span class="n">metadata</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">Metadata</span><span class="p">)</span>
</span><span id="__span-9-11">    <span class="n">ground_truth</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><span class="c1"># Print a ground truth detection</span>
</span><span id="__span-11-2"><span class="n">sample</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span><span id="__span-11-3"><span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">ground_truth</span><span class="o">.</span><span class="n">detections</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><span class="o">&lt;</span><span class="n">Detection</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-12-2">    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;602fea44db78a9b44e6ae129&#39;</span><span class="p">,</span>
</span><span id="__span-12-3">    <span class="s1">&#39;attributes&#39;</span><span class="p">:</span> <span class="n">BaseDict</span><span class="p">({}),</span>
</span><span id="__span-12-4">    <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;potted plant&#39;</span><span class="p">,</span>
</span><span id="__span-12-5">    <span class="s1">&#39;bounding_box&#39;</span><span class="p">:</span> <span class="n">BaseList</span><span class="p">([</span>\
</span><span id="__span-12-6">        <span class="mf">0.37028125</span><span class="p">,</span>\
</span><span id="__span-12-7">        <span class="mf">0.3345305164319249</span><span class="p">,</span>\
</span><span id="__span-12-8">        <span class="mf">0.038593749999999996</span><span class="p">,</span>\
</span><span id="__span-12-9">        <span class="mf">0.16314553990610328</span><span class="p">,</span>\
</span><span id="__span-12-10">    <span class="p">]),</span>
</span><span id="__span-12-11">    <span class="s1">&#39;mask&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-12-12">    <span class="s1">&#39;confidence&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-12-13">    <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-12-14">    <span class="s1">&#39;area&#39;</span><span class="p">:</span> <span class="mf">531.8071000000001</span><span class="p">,</span>
</span><span id="__span-12-15">    <span class="s1">&#39;iscrowd&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="__span-12-16"><span class="p">}</span><span class="o">&gt;</span>
</span></code></pre></div>
<p>Note that the ground truth detections are stored in the <code>ground_truth</code> field of the samples.</p>
<p>Before we go further, let’s launch the <a href="https://voxel51.com/docs/fiftyone/user_guide/app.html">FiftyOne App</a> and use the GUI to explore the dataset visually:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</span></code></pre></div>
<p>Activate</p>
<p><img alt="" src="Base64-Image-Removed" /></p>
<h2 id="adding-model-predictions">Adding model predictions <a href="#Adding-model-predictions" title="Permalink to this headline">¶</a><a class="headerlink" href="#adding-model-predictions" title="Permanent link">&para;</a></h2>
<p>Now let’s add some predictions from an object detector to the dataset.</p>
<p>We’ll use an off-the-shelf <a href="https://pytorch.org/docs/stable/torchvision/models.html#faster-r-cnn">Faster R-CNN detection model</a> provided by PyTorch. The following cell downloads the model and loads it:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><span class="kn">import</span><span class="w"> </span><span class="nn">torch</span>
</span><span id="__span-16-2"><span class="kn">import</span><span class="w"> </span><span class="nn">torchvision</span>
</span><span id="__span-16-3">
</span><span id="__span-16-4"><span class="c1"># Run the model on GPU if it is available</span>
</span><span id="__span-16-5"><span class="n">device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cuda:0&quot;</span> <span class="k">if</span> <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">is_available</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;cpu&quot;</span><span class="p">)</span>
</span><span id="__span-16-6">
</span><span id="__span-16-7"><span class="c1"># Load a pre-trained Faster R-CNN model</span>
</span><span id="__span-16-8"><span class="n">model</span> <span class="o">=</span> <span class="n">torchvision</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">detection</span><span class="o">.</span><span class="n">fasterrcnn_resnet50_fpn</span><span class="p">(</span><span class="n">pretrained</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-16-9"><span class="n">model</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
</span><span id="__span-16-10"><span class="n">model</span><span class="o">.</span><span class="n">eval</span><span class="p">()</span>
</span><span id="__span-16-11">
</span><span id="__span-16-12"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model ready&quot;</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><span class="n">Model</span> <span class="n">ready</span>
</span></code></pre></div>
<p>The code below performs inference with the model on a randomly chosen subset of 100 samples from the dataset and <a href="https://voxel51.com/docs/fiftyone/user_guide/using_datasets.html#object-detection">stores the predictions</a> in a <code>predictions</code> field of the samples.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-18-1"><span class="p">[</span><span class="mi">6</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><span class="c1"># Choose a random subset of 100 samples to add predictions to</span>
</span><span id="__span-19-2"><span class="n">predictions_view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">51</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><span class="p">[</span><span class="mi">7</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-21-1"><span class="kn">from</span><span class="w"> </span><span class="nn">PIL</span><span class="w"> </span><span class="kn">import</span> <span class="n">Image</span>
</span><span id="__span-21-2"><span class="kn">from</span><span class="w"> </span><span class="nn">torchvision.transforms</span><span class="w"> </span><span class="kn">import</span> <span class="n">functional</span> <span class="k">as</span> <span class="n">func</span>
</span><span id="__span-21-3">
</span><span id="__span-21-4"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">fo</span>
</span><span id="__span-21-5">
</span><span id="__span-21-6"><span class="c1"># Get class list</span>
</span><span id="__span-21-7"><span class="n">classes</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">default_classes</span>
</span><span id="__span-21-8">
</span><span id="__span-21-9"><span class="c1"># Add predictions to samples</span>
</span><span id="__span-21-10"><span class="k">with</span> <span class="n">fo</span><span class="o">.</span><span class="n">ProgressBar</span><span class="p">()</span> <span class="k">as</span> <span class="n">pb</span><span class="p">:</span>
</span><span id="__span-21-11">    <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">pb</span><span class="p">(</span><span class="n">predictions_view</span><span class="p">):</span>
</span><span id="__span-21-12">        <span class="c1"># Load image</span>
</span><span id="__span-21-13">        <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="__span-21-14">        <span class="n">image</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="n">to_tensor</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
</span><span id="__span-21-15">        <span class="n">c</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span>
</span><span id="__span-21-16">
</span><span id="__span-21-17">        <span class="c1"># Perform inference</span>
</span><span id="__span-21-18">        <span class="n">preds</span> <span class="o">=</span> <span class="n">model</span><span class="p">([</span><span class="n">image</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-21-19">        <span class="n">labels</span> <span class="o">=</span> <span class="n">preds</span><span class="p">[</span><span class="s2">&quot;labels&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">cpu</span><span class="p">()</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span>
</span><span id="__span-21-20">        <span class="n">scores</span> <span class="o">=</span> <span class="n">preds</span><span class="p">[</span><span class="s2">&quot;scores&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">cpu</span><span class="p">()</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span>
</span><span id="__span-21-21">        <span class="n">boxes</span> <span class="o">=</span> <span class="n">preds</span><span class="p">[</span><span class="s2">&quot;boxes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">cpu</span><span class="p">()</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span>
</span><span id="__span-21-22">
</span><span id="__span-21-23">        <span class="c1"># Convert detections to FiftyOne format</span>
</span><span id="__span-21-24">        <span class="n">detections</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-21-25">        <span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">box</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">scores</span><span class="p">,</span> <span class="n">boxes</span><span class="p">):</span>
</span><span id="__span-21-26">            <span class="c1"># Convert to [top-left-x, top-left-y, width, height]</span>
</span><span id="__span-21-27">            <span class="c1"># in relative coordinates in [0, 1] x [0, 1]</span>
</span><span id="__span-21-28">            <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">box</span>
</span><span id="__span-21-29">            <span class="n">rel_box</span> <span class="o">=</span> <span class="p">[</span><span class="n">x1</span> <span class="o">/</span> <span class="n">w</span><span class="p">,</span> <span class="n">y1</span> <span class="o">/</span> <span class="n">h</span><span class="p">,</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">/</span> <span class="n">w</span><span class="p">,</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">/</span> <span class="n">h</span><span class="p">]</span>
</span><span id="__span-21-30">
</span><span id="__span-21-31">            <span class="n">detections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="__span-21-32">                <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span>
</span><span id="__span-21-33">                    <span class="n">label</span><span class="o">=</span><span class="n">classes</span><span class="p">[</span><span class="n">label</span><span class="p">],</span>
</span><span id="__span-21-34">                    <span class="n">bounding_box</span><span class="o">=</span><span class="n">rel_box</span><span class="p">,</span>
</span><span id="__span-21-35">                    <span class="n">confidence</span><span class="o">=</span><span class="n">score</span>
</span><span id="__span-21-36">                <span class="p">)</span>
</span><span id="__span-21-37">            <span class="p">)</span>
</span><span id="__span-21-38">
</span><span id="__span-21-39">        <span class="c1"># Save predictions to dataset</span>
</span><span id="__span-21-40">        <span class="n">sample</span><span class="p">[</span><span class="s2">&quot;predictions&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Detections</span><span class="p">(</span><span class="n">detections</span><span class="o">=</span><span class="n">detections</span><span class="p">)</span>
</span><span id="__span-21-41">        <span class="n">sample</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-22-1"> <span class="mi">100</span><span class="o">%</span> <span class="o">|</span><span class="err">██████████████████████</span><span class="o">|</span> <span class="mi">100</span><span class="o">/</span><span class="mi">100</span> <span class="p">[</span><span class="mf">12.7</span><span class="n">m</span> <span class="n">elapsed</span><span class="p">,</span> <span class="mi">0</span><span class="n">s</span> <span class="n">remaining</span><span class="p">,</span> <span class="mf">0.1</span> <span class="n">samples</span><span class="o">/</span><span class="n">s</span><span class="p">]</span>
</span></code></pre></div>
<p>Let’s load <code>predictions_view</code> in the App to visualize the predictions that we added:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-23-1"><span class="p">[</span><span class="mi">11</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-24-1"><span class="n">session</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">predictions_view</span>
</span></code></pre></div>
<p>Activate</p>
<p><img alt="" src="Base64-Image-Removed" /></p>
<h2 id="using-the-fiftyone-app">Using the FiftyOne App <a href="#Using-the-FiftyOne-App" title="Permalink to this headline">¶</a><a class="headerlink" href="#using-the-fiftyone-app" title="Permanent link">&para;</a></h2>
<p>Now let’s use the App to analyze the predictions we’ve added to our dataset in more detail.</p>
<h3 id="visualizing-bounding-boxes">Visualizing bounding boxes <a href="#Visualizing-bounding-boxes" title="Permalink to this headline">¶</a><a class="headerlink" href="#visualizing-bounding-boxes" title="Permanent link">&para;</a></h3>
<p>Each field of the samples are shown as togglable checkboxes on the left sidebar which can be used to control whether ground truth or predicted boxes are rendered on the images.</p>
<p>You can also double-click on an image to view individual samples in more detail:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-25-1"><span class="p">[</span><span class="mi">12</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-26-1"><span class="n">session</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></div>
<p>Activate</p>
<p><img alt="" src="Base64-Image-Removed" /></p>
<h3 id="visualizing-object-patches">Visualizing object patches <a href="#Visualizing-object-patches" title="Permalink to this headline">¶</a><a class="headerlink" href="#visualizing-object-patches" title="Permanent link">&para;</a></h3>
<p>It can be beneficial to view every object as an individual sample, especially when there are multiple overlapping detections like in the image above.</p>
<p>In FiftyOne this is called a <a href="https://voxel51.com/docs/fiftyone/user_guide/app.html#viewing-object-patches">patches view</a> and can be created through Python or directly in the App.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-27-1"><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-28-1"><span class="n">patches_view</span> <span class="o">=</span> <span class="n">predictions_view</span><span class="o">.</span><span class="n">to_patches</span><span class="p">(</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">)</span>
</span><span id="__span-28-2"><span class="nb">print</span><span class="p">(</span><span class="n">patches_view</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-29-1"><span class="n">Dataset</span><span class="p">:</span>     <span class="n">detector</span><span class="o">-</span><span class="n">recipe</span>
</span><span id="__span-29-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="n">image</span>
</span><span id="__span-29-3"><span class="n">Num</span> <span class="n">patches</span><span class="p">:</span> <span class="mi">849</span>
</span><span id="__span-29-4"><span class="n">Tags</span><span class="p">:</span>        <span class="p">[</span><span class="s1">&#39;validation&#39;</span><span class="p">]</span>
</span><span id="__span-29-5"><span class="n">Patch</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-29-6">    <span class="n">filepath</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-29-7">    <span class="n">tags</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-29-8">    <span class="n">metadata</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">Metadata</span><span class="p">)</span>
</span><span id="__span-29-9">    <span class="n">sample_id</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-29-10">    <span class="n">ground_truth</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detection</span><span class="p">)</span>
</span><span id="__span-29-11"><span class="n">View</span> <span class="n">stages</span><span class="p">:</span>
</span><span id="__span-29-12">    <span class="mf">1.</span> <span class="n">Exists</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s1">&#39;predictions&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-29-13">    <span class="mf">2.</span> <span class="n">ToPatches</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s1">&#39;ground_truth&#39;</span><span class="p">)</span>
</span></code></pre></div>
<p>Let’s use the App to create the same view as above. To do so, we just need to click the <a href="https://voxel51.com/docs/fiftyone/user_guide/app.html#viewing-object-patches">patches button</a> in the App and select <code>ground_truth</code>.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-30-1"><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-31-1"><span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="n">predictions_view</span><span class="p">)</span>
</span></code></pre></div>
<p>Activate</p>
<p><img alt="" src="Base64-Image-Removed" /></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-32-1"><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-33-1"><span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="n">predictions_view</span><span class="p">)</span>
</span></code></pre></div>
<p>Activate</p>
<p><img alt="" src="Base64-Image-Removed" /></p>
<h3 id="confidence-thresholding-in-the-app">Confidence thresholding in the App <a href="#Confidence-thresholding-in-the-App" title="Permalink to this headline">¶</a><a class="headerlink" href="#confidence-thresholding-in-the-app" title="Permanent link">&para;</a></h3>
<p>From the App instance above, it looks like our detector is generating some spurious low-quality detections. Let’s use the App to interactively filter the predictions by <code>confidence</code> to identify a reasonable confidence threshold for our model:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-34-1"><span class="p">[</span><span class="mi">13</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-35-1"><span class="c1"># Click the down caret on the `predictions` field of Fields Sidebar</span>
</span><span id="__span-35-2"><span class="c1"># and apply a confidence threshold</span>
</span><span id="__span-35-3"><span class="n">session</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></div>
<p>Activate</p>
<p><img alt="" src="Base64-Image-Removed" /></p>
<h3 id="confidence-thresholding-in-python">Confidence thresholding in Python <a href="#Confidence-thresholding-in-Python" title="Permalink to this headline">¶</a><a class="headerlink" href="#confidence-thresholding-in-python" title="Permanent link">&para;</a></h3>
<p>FiftyOne also provides the ability to <a href="https://voxel51.com/docs/fiftyone/user_guide/using_views.html#filtering">write expressions</a> that match, filter, and sort detections based on their attributes. See <a href="https://voxel51.com/docs/fiftyone/user_guide/using_views.html">using DatasetViews</a> for full details.</p>
<p>For example, we can programmatically generate a view that contains only detections whose <code>confidence</code> is at least <code>0.75</code> as follows:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-36-1"><span class="p">[</span><span class="mi">15</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-37-1"><span class="kn">from</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>
</span><span id="__span-37-2">
</span><span id="__span-37-3"><span class="c1"># Only contains detections with confidence &gt;= 0.75</span>
</span><span id="__span-37-4"><span class="n">high_conf_view</span> <span class="o">=</span> <span class="n">predictions_view</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">,</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;confidence&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.75</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-38-1"><span class="p">[</span><span class="mi">16</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-39-1"><span class="c1"># Print some information about the view</span>
</span><span id="__span-39-2"><span class="nb">print</span><span class="p">(</span><span class="n">high_conf_view</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-40-1"><span class="n">Dataset</span><span class="p">:</span>        <span class="n">detector</span><span class="o">-</span><span class="n">recipe</span>
</span><span id="__span-40-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>     <span class="n">image</span>
</span><span id="__span-40-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span>    <span class="mi">100</span>
</span><span id="__span-40-4"><span class="n">Tags</span><span class="p">:</span>           <span class="p">[</span><span class="s1">&#39;validation&#39;</span><span class="p">]</span>
</span><span id="__span-40-5"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-40-6">    <span class="n">filepath</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-40-7">    <span class="n">tags</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-40-8">    <span class="n">metadata</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">Metadata</span><span class="p">)</span>
</span><span id="__span-40-9">    <span class="n">ground_truth</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-40-10">    <span class="n">predictions</span><span class="p">:</span>  <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-40-11"><span class="n">View</span> <span class="n">stages</span><span class="p">:</span>
</span><span id="__span-40-12">    <span class="mf">1.</span> <span class="n">Take</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">51</span><span class="p">)</span>
</span><span id="__span-40-13">    <span class="mf">2.</span> <span class="n">FilterLabels</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s1">&#39;predictions&#39;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;$gt&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;$$this.confidence&#39;</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">]},</span> <span class="n">only_matches</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-41-1"><span class="p">[</span><span class="mi">18</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-42-1"><span class="c1"># Print a prediction from the view to verify that its confidence is &gt; 0.75</span>
</span><span id="__span-42-2"><span class="n">sample</span> <span class="o">=</span> <span class="n">high_conf_view</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span><span id="__span-42-3"><span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">predictions</span><span class="o">.</span><span class="n">detections</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-43-1"><span class="o">&lt;</span><span class="n">Detection</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-43-2">    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;602feaf5db78a9b44e6c1423&#39;</span><span class="p">,</span>
</span><span id="__span-43-3">    <span class="s1">&#39;attributes&#39;</span><span class="p">:</span> <span class="n">BaseDict</span><span class="p">({}),</span>
</span><span id="__span-43-4">    <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;giraffe&#39;</span><span class="p">,</span>
</span><span id="__span-43-5">    <span class="s1">&#39;bounding_box&#39;</span><span class="p">:</span> <span class="n">BaseList</span><span class="p">([</span>\
</span><span id="__span-43-6">        <span class="mf">0.24742321968078612</span><span class="p">,</span>\
</span><span id="__span-43-7">        <span class="mf">0.24475666681925456</span><span class="p">,</span>\
</span><span id="__span-43-8">        <span class="mf">0.5395549297332763</span><span class="p">,</span>\
</span><span id="__span-43-9">        <span class="mf">0.742965825398763</span><span class="p">,</span>\
</span><span id="__span-43-10">    <span class="p">]),</span>
</span><span id="__span-43-11">    <span class="s1">&#39;mask&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-43-12">    <span class="s1">&#39;confidence&#39;</span><span class="p">:</span> <span class="mf">0.9984311461448669</span><span class="p">,</span>
</span><span id="__span-43-13">    <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-43-14"><span class="p">}</span><span class="o">&gt;</span>
</span></code></pre></div>
<p>Now let’s load our view in the App to view the predictions that we programmatically selected:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-44-1"><span class="p">[</span><span class="mi">19</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-45-1"><span class="c1"># Load high confidence view in the App</span>
</span><span id="__span-45-2"><span class="n">session</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">high_conf_view</span>
</span></code></pre></div>
<p>Activate</p>
<p><img alt="" src="Base64-Image-Removed" /></p>
<h3 id="selecting-samples-of-interest">Selecting samples of interest <a href="#Selecting-samples-of-interest" title="Permalink to this headline">¶</a><a class="headerlink" href="#selecting-samples-of-interest" title="Permanent link">&para;</a></h3>
<p>You can select images in the App by clicking on them. Then, you can create a view that contains only those samples by opening the selected samples dropdown in the top left corner of the image grid and clicking <code>Only show selected</code>.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-46-1"><span class="p">[</span><span class="mi">20</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-47-1"><span class="n">session</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></div>
<p>Activate</p>
<p><img alt="" src="Base64-Image-Removed" /></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-48-1"><span class="p">[</span><span class="mi">21</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-49-1"><span class="n">session</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span> <span class="c1"># screenshot the active App for sharing</span>
</span></code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.path", "navigation.indexes", "navigation.top", {"icon": {"repo": "fontawesome/brands/github"}}, "content.action.edit"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>