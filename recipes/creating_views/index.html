
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Creating Views ¶ - Voxel51 Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#creating-views" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Voxel51 Documentation" class="md-header__button md-logo" aria-label="Voxel51 Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Voxel51 Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Creating Views ¶
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/thesteve0/vdoc-mkdocs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Voxel51 Documentation" class="md-nav__button md-logo" aria-label="Voxel51 Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Voxel51 Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/thesteve0/vdoc-mkdocs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/virtualenv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtualenvs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/datasets_samples_fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Datasets, Samples, and Fields
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/application_tour/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tour of the Applications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../fiftyone_concepts/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    FiftyOne Concepts
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            FiftyOne Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Machine Learning
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How Do I
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../data_and_models/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Data and Models
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Data and Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../data_and_models/dataset_zoo/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Zoo Datasets
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Zoo Datasets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_and_models/dataset_zoo/datasets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Built-In Zoo Datasets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_and_models/dataset_zoo/remote/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remotely-Sourced Zoo Datasets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_and_models/dataset_zoo/api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zoo Data API
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_and_models/hugging_face_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hugging Face Datasets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrations
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    References
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            References
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../community/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Community
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../teams/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fifty One Teams
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Releases
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    <span class="md-ellipsis">
      Setup ¶
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview ¶
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#view-basics" class="md-nav__link">
    <span class="md-ellipsis">
      View basics ¶
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#view-expressions" class="md-nav__link">
    <span class="md-ellipsis">
      View expressions ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="View expressions ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#view-fields" class="md-nav__link">
    <span class="md-ellipsis">
      View fields ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested-lists" class="md-nav__link">
    <span class="md-ellipsis">
      Nested lists ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filtering-list-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Filtering list fields ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapping-list-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Mapping list fields ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reducing-list-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Reducing list fields ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#referencing-root-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Referencing root fields ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregations" class="md-nav__link">
    <span class="md-ellipsis">
      Aggregations ¶
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary ¶
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/thesteve0/vdoc-mkdocs/blob/main/docs/recipes/creating_views.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="creating-views">Creating Views <a href="#Creating-Views" title="Permalink to this headline">¶</a><a class="headerlink" href="#creating-views" title="Permanent link">&para;</a></h1>
<p><a href="https://voxel51.com/docs/fiftyone/user_guide/using_datasets.html">FiftyOne datasets</a> provide the flexibility to store large, complex data. While it is helpful that data can be imported and exported easily, the real potential of FiftyOne comes from its powerful query language that you can use to define custom <strong>views</strong> into your datasets.</p>
<p>A <a href="https://voxel51.com/docs/fiftyone/user_guide/using_views.html">dataset view</a> can be thought of as a pipeline of operations that is applied to a dataset to extract a subset of the dataset whose samples and fields are filtered, sorted, shuffled, etc. Check out <a href="https://voxel51.com/docs/fiftyone/user_guide/using_views.html">this page</a> for an extended discussion of dataset views.</p>
<p>In this notebook, we’ll do a brief walkthrough of creating and using dataset views.</p>
<h2 id="setup">Setup <a href="#Setup" title="Permalink to this headline">¶</a><a class="headerlink" href="#setup" title="Permanent link">&para;</a></h2>
<p>If you haven’t already, install FiftyOne:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="n">fiftyone</span>
</span></code></pre></div>
<h2 id="overview">Overview <a href="#Overview" title="Permalink to this headline">¶</a><a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>To start out, lets import FiftyOne, load up a dataset, and evaluate some predicted object detections.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">fo</span>
</span><span id="__span-3-2"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.zoo</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">foz</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
</span><span id="__span-5-2"><span class="n">dataset</span><span class="o">.</span><span class="n">evaluate_detections</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">,</span> <span class="n">gt_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span> <span class="n">eval_key</span><span class="o">=</span><span class="s2">&quot;eval&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Dataset views can range from as simple as “select a slice of the dataset” to “filter sample that have at least two large bounding boxes of people or dogs with high confidence and that were evaluated to be a false positive, then crop all images to those bounding boxes”:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><span class="kn">from</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>
</span><span id="__span-7-2">
</span><span id="__span-7-3"><span class="c1"># Slice dataset</span>
</span><span id="__span-7-4"><span class="n">simple_view</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="mi">51</span><span class="p">:</span><span class="mi">151</span><span class="p">]</span>
</span><span id="__span-7-5">
</span><span id="__span-7-6"><span class="c1"># Complex filtering and conversion</span>
</span><span id="__span-7-7"><span class="n">complex_view</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-7-8">    <span class="n">dataset</span>
</span><span id="__span-7-9">    <span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span>
</span><span id="__span-7-10">        <span class="s2">&quot;predictions&quot;</span><span class="p">,</span> <span class="p">(</span>
</span><span id="__span-7-11">            <span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;confidence&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.7</span><span class="p">)</span>
</span><span id="__span-7-12">            <span class="o">&amp;</span> <span class="p">((</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;bounding_box&quot;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;bounding_box&quot;</span><span class="p">)[</span><span class="mi">3</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mf">0.3</span><span class="p">)</span>
</span><span id="__span-7-13">            <span class="o">&amp;</span> <span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;eval&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;fp&quot;</span><span class="p">)</span>
</span><span id="__span-7-14">            <span class="o">&amp;</span> <span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_in</span><span class="p">([</span><span class="s2">&quot;person&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">]))</span>
</span><span id="__span-7-15">        <span class="p">)</span>
</span><span id="__span-7-16">    <span class="p">)</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
</span><span id="__span-7-17">        <span class="n">F</span><span class="p">(</span><span class="s2">&quot;predictions.detections&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">2</span>
</span><span id="__span-7-18">    <span class="p">)</span><span class="o">.</span><span class="n">to_patches</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">)</span>
</span><span id="__span-7-19"><span class="p">)</span>
</span></code></pre></div>
<p>The goal is that, by the end of this notebook, creating complex views like the one above will be as straight forward as the simple views.</p>
<h2 id="view-basics">View basics <a href="#View-basics" title="Permalink to this headline">¶</a><a class="headerlink" href="#view-basics" title="Permanent link">&para;</a></h2>
<p>“Creating a view from a dataset” is simply the process of performing an operation on a dataset that returns a <code>DatasetView</code>. The most basic way to turn a <code>Dataset</code> into a <code>DatasetView</code> is to just call <code>view()</code>.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><span class="c1"># A view that contains the entire dataset</span>
</span><span id="__span-9-2"><span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">view</span><span class="p">()</span>
</span></code></pre></div>
<p>Within FiftyOne, views and datasets are largely interchangable in nearly all operations. Anything you can do to a dataset, you can also do to a view.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><span class="nb">print</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><span class="n">Dataset</span><span class="p">:</span>     <span class="n">quickstart</span>
</span><span id="__span-12-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="n">image</span>
</span><span id="__span-12-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">200</span>
</span><span id="__span-12-4"><span class="n">Tags</span><span class="p">:</span>        <span class="p">[</span><span class="s1">&#39;validation&#39;</span><span class="p">]</span>
</span><span id="__span-12-5"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-12-6">    <span class="nb">id</span><span class="p">:</span>              <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-12-7">    <span class="n">filepath</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-12-8">    <span class="n">tags</span><span class="p">:</span>            <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-12-9">    <span class="n">metadata</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">Metadata</span><span class="p">)</span>
</span><span id="__span-12-10">    <span class="n">ground_truth</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-12-11">    <span class="n">uniqueness</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-12-12">    <span class="n">predictions</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-12-13">    <span class="n">eval_tp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-12-14">    <span class="n">eval_fp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-12-15">    <span class="n">eval_fn</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-12-16">    <span class="n">is_cloudy</span><span class="p">:</span>       <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span>
</span><span id="__span-12-17">    <span class="n">classification</span><span class="p">:</span>  <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Classification</span><span class="p">)</span>
</span><span id="__span-12-18">    <span class="n">classifications</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Classification</span><span class="p">)</span>
</span><span id="__span-12-19"><span class="n">View</span> <span class="n">stages</span><span class="p">:</span>
</span><span id="__span-12-20">    <span class="o">---</span>
</span></code></pre></div>
<p>To create some more interesting views, you need to apply a view stage operation to the dataset. The list of available view stages can be printed as follows:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><span class="n">dataset</span><span class="o">.</span><span class="n">list_view_stages</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><span class="p">[</span><span class="s1">&#39;exclude&#39;</span><span class="p">,</span>\
</span><span id="__span-15-2"> <span class="s1">&#39;exclude_by&#39;</span><span class="p">,</span>\
</span><span id="__span-15-3"> <span class="s1">&#39;exclude_fields&#39;</span><span class="p">,</span>\
</span><span id="__span-15-4"> <span class="s1">&#39;exclude_frames&#39;</span><span class="p">,</span>\
</span><span id="__span-15-5"> <span class="s1">&#39;exclude_labels&#39;</span><span class="p">,</span>\
</span><span id="__span-15-6"> <span class="s1">&#39;exists&#39;</span><span class="p">,</span>\
</span><span id="__span-15-7"> <span class="s1">&#39;filter_field&#39;</span><span class="p">,</span>\
</span><span id="__span-15-8"> <span class="s1">&#39;filter_labels&#39;</span><span class="p">,</span>\
</span><span id="__span-15-9"> <span class="s1">&#39;filter_classifications&#39;</span><span class="p">,</span>\
</span><span id="__span-15-10"> <span class="s1">&#39;filter_detections&#39;</span><span class="p">,</span>\
</span><span id="__span-15-11"> <span class="s1">&#39;filter_polylines&#39;</span><span class="p">,</span>\
</span><span id="__span-15-12"> <span class="s1">&#39;filter_keypoints&#39;</span><span class="p">,</span>\
</span><span id="__span-15-13"> <span class="s1">&#39;geo_near&#39;</span><span class="p">,</span>\
</span><span id="__span-15-14"> <span class="s1">&#39;geo_within&#39;</span><span class="p">,</span>\
</span><span id="__span-15-15"> <span class="s1">&#39;group_by&#39;</span><span class="p">,</span>\
</span><span id="__span-15-16"> <span class="s1">&#39;limit&#39;</span><span class="p">,</span>\
</span><span id="__span-15-17"> <span class="s1">&#39;limit_labels&#39;</span><span class="p">,</span>\
</span><span id="__span-15-18"> <span class="s1">&#39;map_labels&#39;</span><span class="p">,</span>\
</span><span id="__span-15-19"> <span class="s1">&#39;set_field&#39;</span><span class="p">,</span>\
</span><span id="__span-15-20"> <span class="s1">&#39;match&#39;</span><span class="p">,</span>\
</span><span id="__span-15-21"> <span class="s1">&#39;match_frames&#39;</span><span class="p">,</span>\
</span><span id="__span-15-22"> <span class="s1">&#39;match_labels&#39;</span><span class="p">,</span>\
</span><span id="__span-15-23"> <span class="s1">&#39;match_tags&#39;</span><span class="p">,</span>\
</span><span id="__span-15-24"> <span class="s1">&#39;mongo&#39;</span><span class="p">,</span>\
</span><span id="__span-15-25"> <span class="s1">&#39;select&#39;</span><span class="p">,</span>\
</span><span id="__span-15-26"> <span class="s1">&#39;select_by&#39;</span><span class="p">,</span>\
</span><span id="__span-15-27"> <span class="s1">&#39;select_fields&#39;</span><span class="p">,</span>\
</span><span id="__span-15-28"> <span class="s1">&#39;select_frames&#39;</span><span class="p">,</span>\
</span><span id="__span-15-29"> <span class="s1">&#39;select_labels&#39;</span><span class="p">,</span>\
</span><span id="__span-15-30"> <span class="s1">&#39;shuffle&#39;</span><span class="p">,</span>\
</span><span id="__span-15-31"> <span class="s1">&#39;skip&#39;</span><span class="p">,</span>\
</span><span id="__span-15-32"> <span class="s1">&#39;sort_by&#39;</span><span class="p">,</span>\
</span><span id="__span-15-33"> <span class="s1">&#39;sort_by_similarity&#39;</span><span class="p">,</span>\
</span><span id="__span-15-34"> <span class="s1">&#39;take&#39;</span><span class="p">,</span>\
</span><span id="__span-15-35"> <span class="s1">&#39;to_patches&#39;</span><span class="p">,</span>\
</span><span id="__span-15-36"> <span class="s1">&#39;to_evaluation_patches&#39;</span><span class="p">,</span>\
</span><span id="__span-15-37"> <span class="s1">&#39;to_clips&#39;</span><span class="p">,</span>\
</span><span id="__span-15-38"> <span class="s1">&#39;to_frames&#39;</span><span class="p">]</span>
</span></code></pre></div>
<p>These view stages allow you to perform many useful operations on datasets like slicing, sorting, shuffling, filtering, and more.</p>
<p>For example, the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.take">take()</a> stage lets you extract a random subset of samples from the dataset:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><span class="n">random_view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</span><span id="__span-17-2">
</span><span id="__span-17-3"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">random_view</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-18-1"><span class="mi">100</span>
</span></code></pre></div>
<p>These view stages can also be chained together, each operating on the view returned by the previous stage:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><span class="n">sorted_random_view</span> <span class="o">=</span> <span class="n">random_view</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="s2">&quot;filepath&quot;</span><span class="p">)</span>
</span><span id="__span-20-2"><span class="n">sliced_sorted_random_view</span> <span class="o">=</span> <span class="n">sorted_random_view</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">51</span><span class="p">]</span>
</span></code></pre></div>
<p>Note that the slicing syntax is simply a different representation of the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.skip">skip()</a> and <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.limit">limit()</a> stages:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-21-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-22-1"><span class="n">sliced_sorted_random_view</span> <span class="o">=</span> <span class="n">sorted_random_view</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">41</span><span class="p">)</span>
</span></code></pre></div>
<p>An example of one of the stages used in this notebook is <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.match">match()</a>. This stage will keep or remove samples in the dataset one by one based on if some expression applied to the sample resolves to True or False.</p>
<p>For example, we can create a view that includes all samples with a uniqueness greater than 0.5:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-23-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-24-1"><span class="n">matched_view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;uniqueness&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">)</span>
</span></code></pre></div>
<p>Another useful view stage is <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.set_field">set_field()</a>. This stage will actually modify a field in your dataset based on the provided expression. Note that this modification is only within the resulting <code>DatasetView</code> and will not modify the underlying dataset.</p>
<p>For example, lets set a boolean field called <code>is_cloudy</code> to True for all samples in the dataset. Note that when using <code>set_field()</code>, you need to ensure that the field exists on the dataset first.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-25-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-26-1"><span class="n">dataset</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span><span class="s2">&quot;is_cloudy&quot;</span><span class="p">,</span> <span class="n">fo</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">)</span>
</span><span id="__span-26-2"><span class="n">cloudy_view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">set_field</span><span class="p">(</span><span class="s2">&quot;is_cloudy&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="__span-26-3">
</span><span id="__span-26-4"><span class="n">dataset</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="s2">&quot;is_cloudy&quot;</span><span class="p">,</span> <span class="p">[</span><span class="kc">True</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
</span></code></pre></div>
<h2 id="view-expressions">View expressions <a href="#View-expressions" title="Permalink to this headline">¶</a><a class="headerlink" href="#view-expressions" title="Permanent link">&para;</a></h2>
<p>At this point, you might be wondering “what is this <code>F</code> that I keep seeing everywhere”? That <code>F</code> defines a <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html#fiftyone.core.expressions.ViewField">ViewField</a> which can be used to write a <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html#fiftyone.core.expressions.ViewExpression">ViewExpression</a>. These expressions are what give you the power to write custom queries based on information that exists in
your dataset.</p>
<p>In this section, we go over what some view expression operations and how to write more complex views.</p>
<p>Most view stages accept a <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html#fiftyone.core.expressions.ViewExpression">ViewExpression</a> as input. View stages that seemingly operate on fields can also accept expressions! For example, <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.sort_by">sort_by()</a> can accept a field name or an expression:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-27-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-28-1"><span class="c1"># Sort by filepaths</span>
</span><span id="__span-28-2"><span class="n">dataset</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="s2">&quot;filepath&quot;</span><span class="p">)</span>
</span><span id="__span-28-3">
</span><span id="__span-28-4"><span class="c1"># Sort by the number of predicted objects per sample</span>
</span><span id="__span-28-5"><span class="n">dataset</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;predictions.detections&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">())</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-29-1"><span class="n">Dataset</span><span class="p">:</span>     <span class="n">quickstart</span>
</span><span id="__span-29-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="n">image</span>
</span><span id="__span-29-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">200</span>
</span><span id="__span-29-4"><span class="n">Tags</span><span class="p">:</span>        <span class="p">[</span><span class="s1">&#39;validation&#39;</span><span class="p">]</span>
</span><span id="__span-29-5"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-29-6">    <span class="nb">id</span><span class="p">:</span>           <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-29-7">    <span class="n">filepath</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-29-8">    <span class="n">tags</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-29-9">    <span class="n">metadata</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">Metadata</span><span class="p">)</span>
</span><span id="__span-29-10">    <span class="n">ground_truth</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-29-11">    <span class="n">uniqueness</span><span class="p">:</span>   <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-29-12">    <span class="n">predictions</span><span class="p">:</span>  <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-29-13">    <span class="n">eval_tp</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-29-14">    <span class="n">eval_fp</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-29-15">    <span class="n">eval_fn</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-29-16">    <span class="n">is_cloudy</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span>
</span><span id="__span-29-17"><span class="n">View</span> <span class="n">stages</span><span class="p">:</span>
</span><span id="__span-29-18">    <span class="mf">1.</span> <span class="n">SortBy</span><span class="p">(</span><span class="n">field_or_expr</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;$size&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;$ifNull&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">]}},</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></code></pre></div>
<p>The idea is to think about what is expected by a view stage, then provide the input that is needed in the form of a string or an expression.</p>
<p><a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.sort_by">sort_by()</a> operates on a sample-level, meaning we can either provide it the name of a sample-level field to use for sorting ( <code>filepath</code>) or we can provide it an expression that <em>resolves to</em> a sample-level value. In this case the expression is counting the number of predicted objects for each sample and using those integers to sort the dataset.</p>
<h3 id="view-fields">View fields <a href="#View-fields" title="Permalink to this headline">¶</a><a class="headerlink" href="#view-fields" title="Permanent link">&para;</a></h3>
<p>As mentioned, view expressions are built around view fields. A <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html#fiftyone.core.expressions.ViewField">ViewField</a> is how you inject the information stored in a specific field of your dataset into a view expression.</p>
<p>For example, if you had a boolean field on your dataset called <code>is_cloudy</code> indicating if the image contains cloudy or not, then for each sample, <code>F("is_cloudy")</code> can be thought of as being replaced with the value of <code>"is_cloudy"</code> for that sample. Since values in the field are themselves boolean, the view to match samples where <code>"is_cloudy"</code> is True is simply:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-30-1"><span class="n">cloudy_view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;is_cloudy&quot;</span><span class="p">))</span>
</span></code></pre></div>
<p>In our dataset, after performing evaluation, we populated the field <code>eval_tp</code> on each sample with is an integer containing the number of true positive predictions exist in the sample. There are multiple ways to match samples based on the <code>eval_tp</code> field.</p>
<p>The way to think about view expressions in this case is the same as the expressions for the if-statement in Python that resolve in a boolean context.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-31-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-32-1"><span class="n">a</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-32-2"><span class="n">b</span> <span class="o">=</span> <span class="mi">51</span>
</span><span id="__span-32-3">
</span><span id="__span-32-4"><span class="k">if</span> <span class="n">a</span><span class="p">:</span> <span class="c1"># Nothing else needed</span>
</span><span id="__span-32-5">    <span class="k">pass</span>
</span><span id="__span-32-6">
</span><span id="__span-32-7"><span class="k">if</span> <span class="n">b</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
</span><span id="__span-32-8">    <span class="c1"># True if b &gt; 4</span>
</span><span id="__span-32-9">    <span class="k">pass</span>
</span><span id="__span-32-10">
</span><span id="__span-32-11"><span class="k">if</span> <span class="n">b</span><span class="p">:</span>
</span><span id="__span-32-12">    <span class="c1"># True if b != 0</span>
</span><span id="__span-32-13">    <span class="k">pass</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-33-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-34-1"><span class="n">tp_view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;eval_tp&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">)</span>
</span><span id="__span-34-2">
</span><span id="__span-34-3"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tp_view</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-35-1"><span class="mi">69</span>
</span></code></pre></div>
<p>When providing just an integer in the expression in a Python if-statement, then the statement is True as long as the integer is not zero. The same logic applies with view expressions in this case:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-36-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-37-1"><span class="n">nonzero_tp_view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;eval_tp&quot;</span><span class="p">))</span>
</span><span id="__span-37-2">
</span><span id="__span-37-3"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">nonzero_tp_view</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-38-1"><span class="mi">198</span>
</span></code></pre></div>
<p>We can also use <code>~</code> to negate an expression:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-39-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-40-1"><span class="n">zero_tp_view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="o">~</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;eval_tp&quot;</span><span class="p">))</span>
</span><span id="__span-40-2">
</span><span id="__span-40-3"><span class="nb">print</span><span class="p">(</span><span class="n">zero_tp_view</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&quot;eval_tp&quot;</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-41-1"><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span></code></pre></div>
<h3 id="nested-lists">Nested lists <a href="#Nested-lists" title="Permalink to this headline">¶</a><a class="headerlink" href="#nested-lists" title="Permanent link">&para;</a></h3>
<p>The most difficult/subtle aspect of creating view expressions is how to handle nested lists.</p>
<p>To get a better idea of which samples contain lists, you can print out your sample as a dictionary:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-42-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-43-1"><span class="n">sample</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span>
</span><span id="__span-43-2">    <span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;example.png&quot;</span><span class="p">,</span>
</span><span id="__span-43-3">    <span class="n">ground_truth</span><span class="o">=</span><span class="n">fo</span><span class="o">.</span><span class="n">Detections</span><span class="p">(</span>
</span><span id="__span-43-4">        <span class="n">detections</span><span class="o">=</span><span class="p">[</span>\
</span><span id="__span-43-5">            <span class="n">fo</span><span class="o">.</span><span class="n">Detection</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">])</span>\
</span><span id="__span-43-6">        <span class="p">]</span>
</span><span id="__span-43-7">    <span class="p">),</span>
</span><span id="__span-43-8"><span class="p">)</span>
</span><span id="__span-43-9">
</span><span id="__span-43-10"><span class="n">fo</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-44-1"><span class="p">{</span>
</span><span id="__span-44-2">    <span class="s1">&#39;filepath&#39;</span><span class="p">:</span> <span class="s1">&#39;/content/example.png&#39;</span><span class="p">,</span>
</span><span id="__span-44-3">    <span class="s1">&#39;tags&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="__span-44-4">    <span class="s1">&#39;metadata&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-44-5">    <span class="s1">&#39;ground_truth&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-44-6">        <span class="s1">&#39;_cls&#39;</span><span class="p">:</span> <span class="s1">&#39;Detections&#39;</span><span class="p">,</span>
</span><span id="__span-44-7">        <span class="s1">&#39;detections&#39;</span><span class="p">:</span> <span class="p">[</span>\
</span><span id="__span-44-8">            <span class="p">{</span>\
</span><span id="__span-44-9">                <span class="s1">&#39;_id&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;$oid&#39;</span><span class="p">:</span> <span class="s1">&#39;622f67345627ae9fa020e6f9&#39;</span><span class="p">},</span>\
</span><span id="__span-44-10">                <span class="s1">&#39;_cls&#39;</span><span class="p">:</span> <span class="s1">&#39;Detection&#39;</span><span class="p">,</span>\
</span><span id="__span-44-11">                <span class="s1">&#39;attributes&#39;</span><span class="p">:</span> <span class="p">{},</span>\
</span><span id="__span-44-12">                <span class="s1">&#39;tags&#39;</span><span class="p">:</span> <span class="p">[],</span>\
</span><span id="__span-44-13">                <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;cat&#39;</span><span class="p">,</span>\
</span><span id="__span-44-14">                <span class="s1">&#39;bounding_box&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">],</span>\
</span><span id="__span-44-15">            <span class="p">},</span>\
</span><span id="__span-44-16">        <span class="p">],</span>
</span><span id="__span-44-17">    <span class="p">},</span>
</span><span id="__span-44-18"><span class="p">}</span>
</span></code></pre></div>
<p>Here you can see that <code>ground_truth.detections</code> is a list.</p>
<p>If you have a field containing a primitive value, then it rarely requires more than one operation to get the value that is needed by the view stage. However, when working with a list of values in a field, then there can be multiple different operations that need to be performed to get to the desired value.</p>
<p>The most important operations for working with lists are:</p>
<ul>
<li>
<p><a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html#fiftyone.core.expressions.ViewExpression.filter">filter()</a>: apply a boolean to each element of a list to determine what to keep, resolving to a list</p>
</li>
<li>
<p><a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html#fiftyone.core.expressions.ViewExpression.map">map()</a>: apply a function to each element of a list, resolving to a list</p>
</li>
<li>
<p><a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html#fiftyone.core.expressions.ViewExpression.reduce">reduce()</a>: operates on a list and resolves to a single value</p>
</li>
</ul>
<h3 id="filtering-list-fields">Filtering list fields <a href="#Filtering-list-fields" title="Permalink to this headline">¶</a><a class="headerlink" href="#filtering-list-fields" title="Permanent link">&para;</a></h3>
<p>The <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html#fiftyone.core.expressions.ViewExpression.filter">filter()</a> operation is quite useful to allow for fine-grained access to the information that is to be kept and removed from the view.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-45-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-46-1"><span class="c1"># Only include predictions with `confidence` of at least 0.9</span>
</span><span id="__span-46-2"><span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">set_field</span><span class="p">(</span>
</span><span id="__span-46-3">    <span class="s2">&quot;predictions.detections&quot;</span><span class="p">,</span>
</span><span id="__span-46-4">    <span class="n">F</span><span class="p">(</span><span class="s2">&quot;detections&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;confidence&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.9</span><span class="p">)</span>
</span><span id="__span-46-5"><span class="p">)</span>
</span></code></pre></div>
<p>Note that the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.filter_labels">filter_labels()</a> operation is simply a simplification of the filter operation and <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.set_field">set_field()</a>. This operation will automatically apply the given expression to the corresponding list field of the label if applicable ( <code>Detections</code>, <code>Classifications</code>, etc) or
will apply the expression as a match operation for non-list labels ( <code>Detection</code>, <code>Classification</code>, etc).</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-47-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-48-1"><span class="c1"># Filter detections</span>
</span><span id="__span-48-2"><span class="n">view1</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;cat&quot;</span><span class="p">)</span>
</span><span id="__span-48-3">
</span><span id="__span-48-4"><span class="c1"># Equivalently</span>
</span><span id="__span-48-5"><span class="n">view2</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-48-6">    <span class="n">dataset</span>
</span><span id="__span-48-7">    <span class="o">.</span><span class="n">set_field</span><span class="p">(</span><span class="s2">&quot;ground_truth.detections&quot;</span><span class="p">,</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;detections&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;cat&quot;</span><span class="p">))</span>
</span><span id="__span-48-8">    <span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;ground_truth.detections&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-48-9"><span class="p">)</span>
</span><span id="__span-48-10">
</span><span id="__span-48-11"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">view1</span><span class="p">))</span>
</span><span id="__span-48-12"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">view2</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-49-1"><span class="mi">14</span>
</span><span id="__span-49-2"><span class="mi">14</span>
</span></code></pre></div>
<p>The match operation above was added since by default, <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.filter_labels">filter_labels()</a> sets the keyword argument <code>only_matches=True</code>.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-50-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-51-1"><span class="c1"># Add example classification labels</span>
</span><span id="__span-51-2"><span class="n">dataset</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="s2">&quot;classifications&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">fo</span><span class="o">.</span><span class="n">Classification</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;cat&quot;</span><span class="p">)]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
</span><span id="__span-51-3">
</span><span id="__span-51-4"><span class="c1"># Filter classification</span>
</span><span id="__span-51-5"><span class="n">view1</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="s2">&quot;classifications&quot;</span><span class="p">,</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;cat&quot;</span><span class="p">)</span>
</span><span id="__span-51-6">
</span><span id="__span-51-7"><span class="c1"># Equivalently</span>
</span><span id="__span-51-8"><span class="n">view2</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;classifications.label&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;cat&quot;</span><span class="p">)</span>
</span><span id="__span-51-9">
</span><span id="__span-51-10"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">view1</span><span class="p">))</span>
</span><span id="__span-51-11"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">view2</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-52-1"><span class="mi">200</span>
</span><span id="__span-52-2"><span class="mi">200</span>
</span></code></pre></div>
<h3 id="mapping-list-fields">Mapping list fields <a href="#Mapping-list-fields" title="Permalink to this headline">¶</a><a class="headerlink" href="#mapping-list-fields" title="Permanent link">&para;</a></h3>
<p>The <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html#fiftyone.core.expressions.ViewExpression.map">map()</a> operation can be used to apply an expression to every element of a list. For example, we can update the tags to set every tag to uppercase:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-53-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-54-1"><span class="n">transform_tag</span> <span class="o">=</span> <span class="n">F</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</span><span id="__span-54-2"><span class="n">view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">set_field</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">,</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">transform_tag</span><span class="p">))</span>
</span><span id="__span-54-3">
</span><span id="__span-54-4"><span class="nb">print</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-55-1"><span class="n">Dataset</span><span class="p">:</span>     <span class="n">quickstart</span>
</span><span id="__span-55-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="n">image</span>
</span><span id="__span-55-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">200</span>
</span><span id="__span-55-4"><span class="n">Tags</span><span class="p">:</span>        <span class="p">[</span><span class="s1">&#39;VALIDATION&#39;</span><span class="p">]</span>
</span><span id="__span-55-5"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-55-6">    <span class="nb">id</span><span class="p">:</span>              <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-55-7">    <span class="n">filepath</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-55-8">    <span class="n">tags</span><span class="p">:</span>            <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-55-9">    <span class="n">metadata</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">Metadata</span><span class="p">)</span>
</span><span id="__span-55-10">    <span class="n">ground_truth</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-55-11">    <span class="n">uniqueness</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-55-12">    <span class="n">predictions</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-55-13">    <span class="n">eval_tp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-55-14">    <span class="n">eval_fp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-55-15">    <span class="n">eval_fn</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-55-16">    <span class="n">is_cloudy</span><span class="p">:</span>       <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span>
</span><span id="__span-55-17">    <span class="n">classification</span><span class="p">:</span>  <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Classification</span><span class="p">)</span>
</span><span id="__span-55-18">    <span class="n">classifications</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Classification</span><span class="p">)</span>
</span><span id="__span-55-19"><span class="n">View</span> <span class="n">stages</span><span class="p">:</span>
</span><span id="__span-55-20">    <span class="mf">1.</span> <span class="n">SetField</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;$map&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;as&#39;</span><span class="p">:</span> <span class="s1">&#39;this&#39;</span><span class="p">,</span> <span class="s1">&#39;in&#39;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">},</span> <span class="s1">&#39;input&#39;</span><span class="p">:</span> <span class="s1">&#39;$tags&#39;</span><span class="p">}})</span>
</span></code></pre></div>
<p>Note that the <code>F()</code> above is empty, indicating that <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html#fiftyone.core.expressions.ViewExpression.upper">upper()</a> is applied to the primitives stored in each element of the field. In this case, the primitives are the string tags. In general, <code>F()</code> references the root of the current context.</p>
<h3 id="reducing-list-fields">Reducing list fields <a href="#Reducing-list-fields" title="Permalink to this headline">¶</a><a class="headerlink" href="#reducing-list-fields" title="Permanent link">&para;</a></h3>
<p>The <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html#fiftyone.core.expressions.ViewField.reduce">reduce()</a> operation lets you take a list, operate on each element of it, and return some value. Reduce expressions generally involve some <code>VALUE</code> that is being aggregated as each element is iterated over. For example, this could be some float that values are added to, a string that gets concatenated each iteration, or even a list to which elements are appended.</p>
<p>Say that we want to set a field on our predictions containing the IDs of the corresponding ground truth objects that were matched to the true positives. We can use filter and reduce to accomplish this as follows:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-56-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-57-1"><span class="kn">from</span><span class="w"> </span><span class="nn">fiftyone.core.expressions</span><span class="w"> </span><span class="kn">import</span> <span class="n">VALUE</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-58-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-59-1"><span class="c1"># Get all of the matched gt object ids</span>
</span><span id="__span-59-2"><span class="n">view</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-59-3">    <span class="n">dataset</span>
</span><span id="__span-59-4">    <span class="o">.</span><span class="n">set_field</span><span class="p">(</span>
</span><span id="__span-59-5">        <span class="s2">&quot;predictions.gt_ids&quot;</span><span class="p">,</span>
</span><span id="__span-59-6">        <span class="n">F</span><span class="p">(</span><span class="s2">&quot;detections&quot;</span><span class="p">)</span>
</span><span id="__span-59-7">        <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;eval&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;tp&quot;</span><span class="p">)</span>
</span><span id="__span-59-8">        <span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">VALUE</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;eval_id&quot;</span><span class="p">)),</span> <span class="n">init_val</span><span class="o">=</span><span class="p">[])</span>
</span><span id="__span-59-9">    <span class="p">)</span>
</span><span id="__span-59-10"><span class="p">)</span>
</span><span id="__span-59-11"><span class="n">view</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">predictions</span><span class="o">.</span><span class="n">gt_ids</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-60-1"><span class="p">[</span><span class="s1">&#39;5f452471ef00e6374aac53c8&#39;</span><span class="p">,</span> <span class="s1">&#39;5f452471ef00e6374aac53ca&#39;</span><span class="p">]</span>
</span></code></pre></div>
<h3 id="referencing-root-fields">Referencing root fields <a href="#Referencing-root-fields" title="Permalink to this headline">¶</a><a class="headerlink" href="#referencing-root-fields" title="Permanent link">&para;</a></h3>
<p>Another useful property of expressions is prepending your field names with <code>$</code> to refer to the root of the document. This can be used, for example, to use sample-level information like <code>metadata</code> when filtering at a detection-level:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-61-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-62-1"><span class="n">dataset</span><span class="o">.</span><span class="n">compute_metadata</span><span class="p">()</span>
</span><span id="__span-62-2">
</span><span id="__span-62-3"><span class="c1"># Computes the area of each bounding box in pixels</span>
</span><span id="__span-62-4"><span class="n">bbox_area</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-62-5">    <span class="n">F</span><span class="p">(</span><span class="s2">&quot;$metadata.width&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;bounding_box&quot;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span>
</span><span id="__span-62-6">    <span class="n">F</span><span class="p">(</span><span class="s2">&quot;$metadata.height&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;bounding_box&quot;</span><span class="p">)[</span><span class="mi">3</span><span class="p">]</span>
</span><span id="__span-62-7"><span class="p">)</span>
</span><span id="__span-62-8">
</span><span id="__span-62-9"><span class="c1"># Only contains boxes whose area is between 32^2 and 96^2 pixels</span>
</span><span id="__span-62-10"><span class="n">medium_boxes_view</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span>
</span><span id="__span-62-11">    <span class="s2">&quot;predictions&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">32</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="n">bbox_area</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">bbox_area</span> <span class="o">&lt;</span> <span class="mi">96</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="__span-62-12"><span class="p">)</span>
</span></code></pre></div>
<p>For a complete listing of all operations that can be performed to create view expressions and examples of each, <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html">check out the API documentation</a>.</p>
<h2 id="aggregations">Aggregations <a href="#Aggregations" title="Permalink to this headline">¶</a><a class="headerlink" href="#aggregations" title="Permanent link">&para;</a></h2>
<p><a href="https://voxel51.com/docs/fiftyone/user_guide/using_aggregations.html">Aggregations</a> provide a convenient syntax to compute aggregate statistics or extract values across a dataset or view.</p>
<p>For example, you can use aggregations to get information like:</p>
<ul>
<li>
<p>The boundary values of a field</p>
</li>
<li>
<p>The unique label names in your dataset</p>
</li>
<li>
<p>The standard deviation of a value across your samples</p>
</li>
<li>
<p>Extract a slice of field values across a view</p>
</li>
</ul>
<p>You can view the available aggregations like so:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-63-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-64-1"><span class="n">dataset</span><span class="o">.</span><span class="n">list_aggregations</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-65-1"><span class="p">[</span><span class="s1">&#39;bounds&#39;</span><span class="p">,</span>\
</span><span id="__span-65-2"> <span class="s1">&#39;count&#39;</span><span class="p">,</span>\
</span><span id="__span-65-3"> <span class="s1">&#39;count_values&#39;</span><span class="p">,</span>\
</span><span id="__span-65-4"> <span class="s1">&#39;distinct&#39;</span><span class="p">,</span>\
</span><span id="__span-65-5"> <span class="s1">&#39;histogram_values&#39;</span><span class="p">,</span>\
</span><span id="__span-65-6"> <span class="s1">&#39;mean&#39;</span><span class="p">,</span>\
</span><span id="__span-65-7"> <span class="s1">&#39;std&#39;</span><span class="p">,</span>\
</span><span id="__span-65-8"> <span class="s1">&#39;sum&#39;</span><span class="p">,</span>\
</span><span id="__span-65-9"> <span class="s1">&#39;values&#39;</span><span class="p">]</span>
</span></code></pre></div>
<p><a href="https://voxel51.com/docs/fiftyone/user_guide/using_aggregations.html">The documentation</a> already contains plenty of detailed information about aggregations. This section just highlights how view expressions can be used with aggregations.</p>
<p>In the simplest case, aggregations can be performed by providing the name of a field you want to compute on:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-66-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-67-1"><span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">distinct</span><span class="p">(</span><span class="s2">&quot;predictions.detections.label&quot;</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-68-1"><span class="p">[</span><span class="s1">&#39;airplane&#39;</span><span class="p">,</span> <span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;backpack&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">,</span> <span class="s1">&#39;baseball glove&#39;</span><span class="p">,</span> <span class="s1">&#39;bear&#39;</span><span class="p">,</span> <span class="s1">&#39;bed&#39;</span><span class="p">,</span> <span class="s1">&#39;bench&#39;</span><span class="p">,</span> <span class="s1">&#39;bicycle&#39;</span><span class="p">,</span> <span class="s1">&#39;bird&#39;</span><span class="p">,</span> <span class="s1">&#39;boat&#39;</span><span class="p">,</span> <span class="s1">&#39;book&#39;</span><span class="p">,</span> <span class="s1">&#39;bottle&#39;</span><span class="p">,</span> <span class="s1">&#39;bowl&#39;</span><span class="p">,</span> <span class="s1">&#39;broccoli&#39;</span><span class="p">,</span> <span class="s1">&#39;bus&#39;</span><span class="p">,</span> <span class="s1">&#39;cake&#39;</span><span class="p">,</span> <span class="s1">&#39;car&#39;</span><span class="p">,</span> <span class="s1">&#39;carrot&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;cell phone&#39;</span><span class="p">,</span> <span class="s1">&#39;chair&#39;</span><span class="p">,</span> <span class="s1">&#39;clock&#39;</span><span class="p">,</span> <span class="s1">&#39;couch&#39;</span><span class="p">,</span> <span class="s1">&#39;cow&#39;</span><span class="p">,</span> <span class="s1">&#39;cup&#39;</span><span class="p">,</span> <span class="s1">&#39;dining table&#39;</span><span class="p">,</span> <span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;donut&#39;</span><span class="p">,</span> <span class="s1">&#39;elephant&#39;</span><span class="p">,</span> <span class="s1">&#39;fire hydrant&#39;</span><span class="p">,</span> <span class="s1">&#39;fork&#39;</span><span class="p">,</span> <span class="s1">&#39;frisbee&#39;</span><span class="p">,</span> <span class="s1">&#39;giraffe&#39;</span><span class="p">,</span> <span class="s1">&#39;hair drier&#39;</span><span class="p">,</span> <span class="s1">&#39;handbag&#39;</span><span class="p">,</span> <span class="s1">&#39;horse&#39;</span><span class="p">,</span> <span class="s1">&#39;hot dog&#39;</span><span class="p">,</span> <span class="s1">&#39;keyboard&#39;</span><span class="p">,</span> <span class="s1">&#39;kite&#39;</span><span class="p">,</span> <span class="s1">&#39;knife&#39;</span><span class="p">,</span> <span class="s1">&#39;laptop&#39;</span><span class="p">,</span> <span class="s1">&#39;microwave&#39;</span><span class="p">,</span> <span class="s1">&#39;motorcycle&#39;</span><span class="p">,</span> <span class="s1">&#39;mouse&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="s1">&#39;oven&#39;</span><span class="p">,</span> <span class="s1">&#39;parking meter&#39;</span><span class="p">,</span> <span class="s1">&#39;person&#39;</span><span class="p">,</span> <span class="s1">&#39;pizza&#39;</span><span class="p">,</span> <span class="s1">&#39;potted plant&#39;</span><span class="p">,</span> <span class="s1">&#39;refrigerator&#39;</span><span class="p">,</span> <span class="s1">&#39;remote&#39;</span><span class="p">,</span> <span class="s1">&#39;sandwich&#39;</span><span class="p">,</span> <span class="s1">&#39;scissors&#39;</span><span class="p">,</span> <span class="s1">&#39;sheep&#39;</span><span class="p">,</span> <span class="s1">&#39;sink&#39;</span><span class="p">,</span> <span class="s1">&#39;skateboard&#39;</span><span class="p">,</span> <span class="s1">&#39;skis&#39;</span><span class="p">,</span> <span class="s1">&#39;snowboard&#39;</span><span class="p">,</span> <span class="s1">&#39;spoon&#39;</span><span class="p">,</span> <span class="s1">&#39;sports ball&#39;</span><span class="p">,</span> <span class="s1">&#39;stop sign&#39;</span><span class="p">,</span> <span class="s1">&#39;suitcase&#39;</span><span class="p">,</span> <span class="s1">&#39;surfboard&#39;</span><span class="p">,</span> <span class="s1">&#39;teddy bear&#39;</span><span class="p">,</span> <span class="s1">&#39;tennis racket&#39;</span><span class="p">,</span> <span class="s1">&#39;tie&#39;</span><span class="p">,</span> <span class="s1">&#39;toaster&#39;</span><span class="p">,</span> <span class="s1">&#39;toilet&#39;</span><span class="p">,</span> <span class="s1">&#39;toothbrush&#39;</span><span class="p">,</span> <span class="s1">&#39;traffic light&#39;</span><span class="p">,</span> <span class="s1">&#39;train&#39;</span><span class="p">,</span> <span class="s1">&#39;truck&#39;</span><span class="p">,</span> <span class="s1">&#39;tv&#39;</span><span class="p">,</span> <span class="s1">&#39;umbrella&#39;</span><span class="p">,</span> <span class="s1">&#39;vase&#39;</span><span class="p">,</span> <span class="s1">&#39;wine glass&#39;</span><span class="p">,</span> <span class="s1">&#39;zebra&#39;</span><span class="p">]</span>
</span></code></pre></div>
<p>However, you can also pass a <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html#fiftyone.core.expressions.ViewExpression">ViewExpression</a> to the aggregation method, in which case the expression will be evaluated and then aggregated as requested:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-69-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-70-1"><span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">distinct</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;uniqueness&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-71-1"><span class="p">[</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.16</span><span class="p">,</span> <span class="mf">0.17</span><span class="p">,</span> <span class="mf">0.18</span><span class="p">,</span> <span class="mf">0.19</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.21</span><span class="p">,</span> <span class="mf">0.22</span><span class="p">,</span> <span class="mf">0.23</span><span class="p">,</span> <span class="mf">0.24</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.26</span><span class="p">,</span> <span class="mf">0.27</span><span class="p">,</span> <span class="mf">0.28</span><span class="p">,</span> <span class="mf">0.29</span><span class="p">,</span> <span class="mf">0.34</span><span class="p">,</span> <span class="mf">0.53</span><span class="p">,</span> <span class="mf">0.54</span><span class="p">,</span> <span class="mf">0.55</span><span class="p">,</span> <span class="mf">0.56</span><span class="p">,</span> <span class="mf">0.57</span><span class="p">,</span> <span class="mf">0.58</span><span class="p">,</span> <span class="mf">0.59</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.61</span><span class="p">,</span> <span class="mf">0.62</span><span class="p">,</span> <span class="mf">0.63</span><span class="p">,</span> <span class="mf">0.64</span><span class="p">,</span> <span class="mf">0.65</span><span class="p">,</span> <span class="mf">0.66</span><span class="p">,</span> <span class="mf">0.67</span><span class="p">,</span> <span class="mf">0.68</span><span class="p">,</span> <span class="mf">0.69</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.72</span><span class="p">,</span> <span class="mf">0.73</span><span class="p">,</span> <span class="mf">0.74</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.78</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.82</span><span class="p">,</span> <span class="mf">0.92</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>
</span></code></pre></div>
<h2 id="summary">Summary <a href="#Summary" title="Permalink to this headline">¶</a><a class="headerlink" href="#summary" title="Permanent link">&para;</a></h2>
<p>Dataset views and the view expressions language are powerful and flexible aspects of FiftyOne.</p>
<p>Getting comfortable with using views and expressions to slice and dice your datasets based on the questions you have will allow you to work efficiently to curate high quality datasets.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.path", "navigation.indexes", "navigation.top", {"icon": {"repo": "fontawesome/brands/github"}}, "content.action.edit"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>