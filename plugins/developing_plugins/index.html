
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Developing Plugins ¶ - Voxel51 Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#developing-plugins" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Voxel51 Documentation" class="md-header__button md-logo" aria-label="Voxel51 Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Voxel51 Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Developing Plugins ¶
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/thesteve0/vdoc-mkdocs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Voxel51 Documentation" class="md-nav__button md-logo" aria-label="Voxel51 Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Voxel51 Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/thesteve0/vdoc-mkdocs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/virtualenv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtualenvs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/datasets_samples_fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Datasets, Samples, and Fields
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/application_tour/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tour of the Applications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../fiftyone_concepts/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    FiftyOne Concepts
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            FiftyOne Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Machine Learning
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How Do I
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../data_and_models/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Data and Models
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Data and Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../data_and_models/dataset_zoo/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Zoo Datasets
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Zoo Datasets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_and_models/dataset_zoo/datasets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Built-In Zoo Datasets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_and_models/dataset_zoo/remote/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remotely-Sourced Zoo Datasets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_and_models/dataset_zoo/api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zoo Data API
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_and_models/hugging_face_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hugging Face Datasets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrations
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    References
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            References
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../community/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Community
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../teams/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fifty One Teams
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Releases
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#design-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Design overview ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Design overview ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#plugin-types" class="md-nav__link">
    <span class="md-ellipsis">
      Plugin types ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#panels" class="md-nav__link">
    <span class="md-ellipsis">
      Panels ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operators" class="md-nav__link">
    <span class="md-ellipsis">
      Operators ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#components" class="md-nav__link">
    <span class="md-ellipsis">
      Components ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Development setup ¶
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anatomy-of-a-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Anatomy of a plugin ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Anatomy of a plugin ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fiftyoneyml" class="md-nav__link">
    <span class="md-ellipsis">
      fiftyone.yml ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      Python plugins ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#js-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      JS plugins ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publishing-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      Publishing plugins ¶
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Quick examples ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick examples ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Example plugin ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-python-operator" class="md-nav__link">
    <span class="md-ellipsis">
      Example Python operator ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-python-panel" class="md-nav__link">
    <span class="md-ellipsis">
      Example Python panel ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-js-operator" class="md-nav__link">
    <span class="md-ellipsis">
      Example JS operator ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developing-operators" class="md-nav__link">
    <span class="md-ellipsis">
      Developing operators ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Developing operators ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operator-interface" class="md-nav__link">
    <span class="md-ellipsis">
      Operator interface ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operator-config" class="md-nav__link">
    <span class="md-ellipsis">
      Operator config ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execution-context" class="md-nav__link">
    <span class="md-ellipsis">
      Execution context ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operator-inputs" class="md-nav__link">
    <span class="md-ellipsis">
      Operator inputs ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delegated-execution" class="md-nav__link">
    <span class="md-ellipsis">
      Delegated execution ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Delegated execution ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#execution-options" class="md-nav__link">
    <span class="md-ellipsis">
      Execution options ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamic-execution-options" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamic execution options ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forced-delegation" class="md-nav__link">
    <span class="md-ellipsis">
      Forced delegation ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reporting-progress" class="md-nav__link">
    <span class="md-ellipsis">
      Reporting progress ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operator-execution" class="md-nav__link">
    <span class="md-ellipsis">
      Operator execution ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Operator execution ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synchronous-execution" class="md-nav__link">
    <span class="md-ellipsis">
      Synchronous execution ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asynchronous-execution" class="md-nav__link">
    <span class="md-ellipsis">
      Asynchronous execution ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operator-composition" class="md-nav__link">
    <span class="md-ellipsis">
      Operator composition ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generator-execution" class="md-nav__link">
    <span class="md-ellipsis">
      Generator execution ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing secrets ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operator-outputs" class="md-nav__link">
    <span class="md-ellipsis">
      Operator outputs ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operator-placement" class="md-nav__link">
    <span class="md-ellipsis">
      Operator placement ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developing-panels" class="md-nav__link">
    <span class="md-ellipsis">
      Developing panels ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Developing panels ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#panel-interface" class="md-nav__link">
    <span class="md-ellipsis">
      Panel interface ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#panel-config" class="md-nav__link">
    <span class="md-ellipsis">
      Panel config ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execution-context_1" class="md-nav__link">
    <span class="md-ellipsis">
      Execution context ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#panel-state-and-data" class="md-nav__link">
    <span class="md-ellipsis">
      Panel state and data ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Panel state and data ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Basic structure ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#panel-state" class="md-nav__link">
    <span class="md-ellipsis">
      Panel state ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#panel-data" class="md-nav__link">
    <span class="md-ellipsis">
      Panel data ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execution-store" class="md-nav__link">
    <span class="md-ellipsis">
      Execution store ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#saved-workspaces" class="md-nav__link">
    <span class="md-ellipsis">
      Saved workspaces ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-secrets_1" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing secrets ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Common patterns ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common patterns ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#callbacks" class="md-nav__link">
    <span class="md-ellipsis">
      Callbacks ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dropdown-menus" class="md-nav__link">
    <span class="md-ellipsis">
      Dropdown menus ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interactive-plots" class="md-nav__link">
    <span class="md-ellipsis">
      Interactive plots ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#walkthroughs" class="md-nav__link">
    <span class="md-ellipsis">
      Walkthroughs ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#displaying-multimedia" class="md-nav__link">
    <span class="md-ellipsis">
      Displaying multimedia ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-hints" class="md-nav__link">
    <span class="md-ellipsis">
      Type hints ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developing-js-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      Developing JS plugins ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Developing JS plugins ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#component-types" class="md-nav__link">
    <span class="md-ellipsis">
      Component types ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#panels-and-components" class="md-nav__link">
    <span class="md-ellipsis">
      Panels and Components ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Panels and Components ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hello-world-panel" class="md-nav__link">
    <span class="md-ellipsis">
      Hello world panel ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-custom-panel" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a custom Panel ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-operator-view-using-component-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Custom operator view using component plugin ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fiftyone-app-state" class="md-nav__link">
    <span class="md-ellipsis">
      FiftyOne App state ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FiftyOne App state ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interactivity-and-state" class="md-nav__link">
    <span class="md-ellipsis">
      Interactivity and state ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recoil-atoms-and-selectors" class="md-nav__link">
    <span class="md-ellipsis">
      Recoil, atoms, and selectors ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#panel-state_1" class="md-nav__link">
    <span class="md-ellipsis">
      Panel state ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-settings-in-your-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Reading settings in your plugin ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querying-fiftyone" class="md-nav__link">
    <span class="md-ellipsis">
      Querying FiftyOne ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plugin-runtime" class="md-nav__link">
    <span class="md-ellipsis">
      Plugin runtime ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Plugin runtime ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#js-runtime" class="md-nav__link">
    <span class="md-ellipsis">
      JS runtime ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-runtime" class="md-nav__link">
    <span class="md-ellipsis">
      Python runtime ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Python runtime ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#immediate-execution" class="md-nav__link">
    <span class="md-ellipsis">
      Immediate execution ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delegated-execution_1" class="md-nav__link">
    <span class="md-ellipsis">
      Delegated execution ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced usage ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced usage ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#storing-custom-runs" class="md-nav__link">
    <span class="md-ellipsis">
      Storing custom runs ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#managing-custom-runs" class="md-nav__link">
    <span class="md-ellipsis">
      Managing custom runs ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/thesteve0/vdoc-mkdocs/blob/main/docs/plugins/developing_plugins.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="developing-plugins">Developing Plugins <a href="#developing-plugins" title="Permalink to this headline">¶</a><a class="headerlink" href="#developing-plugins" title="Permanent link">&para;</a></h1>
<p>This page describes how to write your own FiftyOne plugins.</p>
<p>Note</p>
<p>Check out the
<a href="https://github.com/voxel51/fiftyone-plugins">FiftyOne plugins</a>
repository for a growing collection of plugins that you can use as examples
when developing your own.</p>
<h2 id="design-overview">Design overview <a href="#design-overview" title="Permalink to this headline">¶</a><a class="headerlink" href="#design-overview" title="Permanent link">&para;</a></h2>
<p>Plugins are composed of one or more panels, operators, and components.</p>
<p>Together these building blocks enable you to build full-featured interactive
data applications that tailor FiftyOne to your specific use case and workflow.
Whether you’re working with images, videos, or other data types, a plugin can
help you streamline your machine learning workflows and co-develop your data
and models.</p>
<p><img alt="../_images/plugin-design.png" src="../../_images/plugin-design.png" /></p>
<h3 id="plugin-types">Plugin types <a href="#plugin-types" title="Permalink to this headline">¶</a><a class="headerlink" href="#plugin-types" title="Permanent link">&para;</a></h3>
<p>FiftyOne plugins can be written in Python or JavaScript (JS), or a combination
of both.</p>
<p>Python plugins are built using the <code>fiftyone</code> package, pip packages, and your
own Python. They can consist of panels and operators.</p>
<p>JS plugins are built using the <code>@fiftyone</code> TypeScript packages, npm packages,
and your own TypeScript. They can consist of panels, operators, and custom
components.</p>
<h3 id="panels">Panels <a href="#panels" title="Permalink to this headline">¶</a><a class="headerlink" href="#panels" title="Permanent link">&para;</a></h3>
<p>Panels are miniature full-featured data applications that you can open in
<a href="../fiftyone_concepts/app.html#app-spaces">App spaces</a> and interactively manipulate to explore your
dataset and update/respond to updates from other spaces that are currently open
in the App.</p>
<p>FiftyOne natively includes the following Panels:</p>
<ul>
<li>
<p><a href="../fiftyone_concepts/app.html#app-samples-panel">Samples panel</a>: the media grid that loads by
default when you launch the App</p>
</li>
<li>
<p><a href="../fiftyone_concepts/app.html#app-histograms-panel">Histograms panel</a>: a dashboard of histograms
for the fields of your dataset</p>
</li>
<li>
<p><a href="../fiftyone_concepts/app.html#app-embeddings-panel">Embeddings panel</a>: a canvas for working with
<a href="../brain.html#brain-embeddings-visualization">embeddings visualizations</a></p>
</li>
<li>
<p><a href="../fiftyone_concepts/app.html#app-map-panel">Map panel</a>: visualizes the geolocation data of
datasets that have a <a href="../api/fiftyone.core.labels.html#fiftyone.core.labels.GeoLocation" title="fiftyone.core.labels.GeoLocation"><code>GeoLocation</code></a> field</p>
</li>
</ul>
<p><img alt="../_images/app-map-panel.gif" src="../../_images/app-map-panel.gif" /></p>
<p>Note</p>
<p>Jump to <a href="#developing-panels">this section</a> for more information about
developing panels.</p>
<h3 id="operators">Operators <a href="#operators" title="Permalink to this headline">¶</a><a class="headerlink" href="#operators" title="Permanent link">&para;</a></h3>
<p>Operators are user-facing operations that allow you to interact with the data
in your dataset. They can range from simple actions like checking a checkbox to
more complex workflows such as requesting annotation of samples from a
configurable backend. Operators can even be composed of other operators or be
used to add functionality to custom panels.</p>
<p>FiftyOne comes with a number of builtin
<code>Python</code> and
<a href="https://github.com/voxel51/fiftyone/blob/develop/app/packages/operators/src/built-in-operators.ts">JavaScript</a>
operators for common tasks that are intended for either user-facing or internal
plugin use.</p>
<p><img alt="../_images/operator-browser.gif" src="../../_images/operator-browser.gif" /></p>
<p>Note</p>
<p>Jump to <a href="#developing-operators">this section</a> for more information
about developing operators.</p>
<h3 id="components">Components <a href="#components" title="Permalink to this headline">¶</a><a class="headerlink" href="#components" title="Permanent link">&para;</a></h3>
<p>Components are responsible for rendering and event handling in plugins. They
provide the necessary functionality to display and interact with your plugin in
the FiftyOne App. Components also implement form inputs and output rendering
for operators, making it possible to customize the way an operator is rendered
in the FiftyOne App.</p>
<p>For example, FiftyOne comes with a wide variety of
<a href="../api/fiftyone.operators.types.html#module-fiftyone.operators.types" title="fiftyone.operators.types"><code>builtin types</code></a> that you can leverage to build
complex input and output forms for your operators.</p>
<p><img alt="../_images/file-explorer.gif" src="../../_images/file-explorer.gif" /></p>
<p>Note</p>
<p>Jump to <a href="#developing-js-plugins">this section</a> for more information
about developing components.</p>
<h2 id="development-setup">Development setup <a href="#development-setup" title="Permalink to this headline">¶</a><a class="headerlink" href="#development-setup" title="Permanent link">&para;</a></h2>
<p>In order to develop Python plugins, you can use either a release or source
install of FiftyOne:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">pip</span> <span class="n">install</span> <span class="n">fiftyone</span>
</span></code></pre></div>
<p>In order to develop JS plugins, you will need a
<a href="https://github.com/voxel51/fiftyone#installing-from-source">source install</a>
of FiftyOne and a vite config that links modules to your <code>fiftyone/app</code>
directory.</p>
<p>Note</p>
<p>For JS plugins we recommend forking the
<a href="https://github.com/voxel51/hello-world-plugin-js">FiftyOne Hello World JS Example</a>
repository and following the conventions there to build your JS plugin.</p>
<h2 id="anatomy-of-a-plugin">Anatomy of a plugin <a href="#anatomy-of-a-plugin" title="Permalink to this headline">¶</a><a class="headerlink" href="#anatomy-of-a-plugin" title="Permanent link">&para;</a></h2>
<p>FiftyOne recognizes plugins by searching for <code>fiftyone.yml</code> or <code>fiftyone.yaml</code>
files within your <a href="using_plugins.html#plugins-directory">plugins directory</a>.</p>
<p>Below is an example of a plugin directory with a typical Python plugin and JS
plugin:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">your</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="nb">dir</span><span class="o">/</span>
</span><span id="__span-1-2">    <span class="n">my</span><span class="o">-</span><span class="n">js</span><span class="o">-</span><span class="n">plugin</span><span class="o">/</span>
</span><span id="__span-1-3">        <span class="n">fiftyone</span><span class="o">.</span><span class="n">yml</span>
</span><span id="__span-1-4">        <span class="n">package</span><span class="o">.</span><span class="n">json</span>
</span><span id="__span-1-5">        <span class="n">dist</span><span class="o">/</span>
</span><span id="__span-1-6">            <span class="n">index</span><span class="o">.</span><span class="n">umd</span><span class="o">.</span><span class="n">js</span>
</span><span id="__span-1-7">    <span class="n">my</span><span class="o">-</span><span class="n">py</span><span class="o">-</span><span class="n">plugin</span><span class="o">/</span>
</span><span id="__span-1-8">        <span class="n">fiftyone</span><span class="o">.</span><span class="n">yml</span>
</span><span id="__span-1-9">        <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
</span><span id="__span-1-10">        <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</span></code></pre></div>
<p>Note</p>
<p>If the source code for a plugin already exists on disk, you can make it
into a plugin using
<a href="../api/fiftyone.plugins.core.html#fiftyone.plugins.core.create_plugin" title="fiftyone.plugins.core.create_plugin"><code>create_plugin()</code></a> or the
<a href="../cli/index.html#cli-fiftyone-plugins-create">fiftyone plugins create</a> CLI command.</p>
<p>This will copy the source code to the plugins directory and create a
<code>fiftyone.yml</code> file for you if one does not already exist. Alternatively,
you can manually copy the code into your plugins directory.</p>
<p>If your FiftyOne App is already running, you may need to restart the server
and refresh your browser to see new plugins.</p>
<h3 id="fiftyoneyml">fiftyone.yml <a href="#fiftyone-yml" title="Permalink to this headline">¶</a><a class="headerlink" href="#fiftyoneyml" title="Permanent link">&para;</a></h3>
<p>All plugins must contain a <code>fiftyone.yml</code> or <code>fiftyone.yaml</code> file, which is
used to define the plugin’s metadata, declare any operators and panels that it
exposes, and declare any <a href="using_plugins.html#plugins-secrets">secrets</a> that it may require.
The following fields are available:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Required?</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><strong>yes</strong></td>
<td>The name of the plugin</td>
</tr>
<tr>
<td><code>type</code></td>
<td></td>
<td>Declare that the directory defines a <code>plugin</code>. This can be omitted for<br>backwards compatibility, but it is recommended to specify this</td>
</tr>
<tr>
<td><code>author</code></td>
<td></td>
<td>The author of the plugin</td>
</tr>
<tr>
<td><code>version</code></td>
<td></td>
<td>The version of the plugin</td>
</tr>
<tr>
<td><code>url</code></td>
<td></td>
<td>The remote source (eg GitHub repository) where the directory containing<br>this file is hosted</td>
</tr>
<tr>
<td><code>license</code></td>
<td></td>
<td>The license under which the plugin is distributed</td>
</tr>
<tr>
<td><code>description</code></td>
<td></td>
<td>A brief description of the plugin</td>
</tr>
<tr>
<td><code>fiftyone.version</code></td>
<td></td>
<td>A semver version specifier (or <code>*</code>) describing the required<br>FiftyOne version for the plugin to work properly</td>
</tr>
<tr>
<td><code>operators</code></td>
<td></td>
<td>A list of operator names registered by the plugin, if any</td>
</tr>
<tr>
<td><code>panels</code></td>
<td></td>
<td>A list of panel names registred by the plugin, if any</td>
</tr>
<tr>
<td><code>secrets</code></td>
<td></td>
<td>A list of secret keys that may be used by the plugin, if any</td>
</tr>
</tbody>
</table>
<p>For example, the
<a href="https://github.com/voxel51/fiftyone-plugins/blob/main/plugins/annotation/fiftyone.yml">@voxel51/annotation</a>
plugin’s <code>fiftyone.yml</code> looks like this:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><span class="n">name</span><span class="p">:</span> <span class="s2">&quot;@voxel51/annotation&quot;</span>
</span><span id="__span-2-2"><span class="nb">type</span><span class="p">:</span> <span class="n">plugin</span>
</span><span id="__span-2-3"><span class="n">author</span><span class="p">:</span> <span class="n">Voxel51</span>
</span><span id="__span-2-4"><span class="n">version</span><span class="p">:</span> <span class="mf">1.0.0</span>
</span><span id="__span-2-5"><span class="n">url</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">voxel51</span><span class="o">/</span><span class="n">fiftyone</span><span class="o">-</span><span class="n">plugins</span><span class="o">/</span><span class="n">tree</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">annotation</span>
</span><span id="__span-2-6"><span class="n">license</span><span class="p">:</span> <span class="n">Apache</span> <span class="mf">2.0</span>
</span><span id="__span-2-7"><span class="n">description</span><span class="p">:</span> <span class="n">Utilities</span> <span class="k">for</span> <span class="n">integrating</span> <span class="n">FiftyOne</span> <span class="k">with</span> <span class="n">annotation</span> <span class="n">tools</span>
</span><span id="__span-2-8"><span class="n">fiftyone</span><span class="p">:</span>
</span><span id="__span-2-9">  <span class="n">version</span><span class="p">:</span> <span class="s2">&quot;&gt;=0.22&quot;</span>
</span><span id="__span-2-10"><span class="n">operators</span><span class="p">:</span>
</span><span id="__span-2-11">  <span class="o">-</span> <span class="n">request_annotations</span>
</span><span id="__span-2-12">  <span class="o">-</span> <span class="n">load_annotations</span>
</span><span id="__span-2-13">  <span class="o">-</span> <span class="n">get_annotation_info</span>
</span><span id="__span-2-14">  <span class="o">-</span> <span class="n">load_annotation_view</span>
</span><span id="__span-2-15">  <span class="o">-</span> <span class="n">rename_annotation_run</span>
</span><span id="__span-2-16">  <span class="o">-</span> <span class="n">delete_annotation_run</span>
</span><span id="__span-2-17"><span class="n">secrets</span><span class="p">:</span>
</span><span id="__span-2-18">  <span class="o">-</span> <span class="n">FIFTYONE_CVAT_URL</span>
</span><span id="__span-2-19">  <span class="o">-</span> <span class="n">FIFTYONE_CVAT_USERNAME</span>
</span><span id="__span-2-20">  <span class="o">-</span> <span class="n">FIFTYONE_CVAT_PASSWORD</span>
</span><span id="__span-2-21">  <span class="o">-</span> <span class="n">FIFTYONE_CVAT_EMAIL</span>
</span><span id="__span-2-22">  <span class="o">-</span> <span class="n">FIFTYONE_LABELBOX_URL</span>
</span><span id="__span-2-23">  <span class="o">-</span> <span class="n">FIFTYONE_LABELBOX_API_KEY</span>
</span><span id="__span-2-24">  <span class="o">-</span> <span class="n">FIFTYONE_LABELSTUDIO_URL</span>
</span><span id="__span-2-25">  <span class="o">-</span> <span class="n">FIFTYONE_LABELSTUDIO_API_KEY</span>
</span></code></pre></div>
<p>Note</p>
<p>Although it is not strictly required, we highly recommend using the
<code>@user-or-org-name/plugin-name</code> naming convention when writing plugins.</p>
<h3 id="python-plugins">Python plugins <a href="#python-plugins" title="Permalink to this headline">¶</a><a class="headerlink" href="#python-plugins" title="Permanent link">&para;</a></h3>
<p>Python plugins should define the following files:</p>
<ul>
<li>
<p><code>__init__.py</code> <strong>(required)</strong>: entrypoint that defines the Python operators
and panels that the plugin defines</p>
</li>
<li>
<p><code>requirements.txt</code>: specifies the Python package requirements to run the
plugin</p>
</li>
</ul>
<h3 id="js-plugins">JS plugins <a href="#js-plugins" title="Permalink to this headline">¶</a><a class="headerlink" href="#js-plugins" title="Permanent link">&para;</a></h3>
<p>JS plugins should define the following files:</p>
<ul>
<li>
<p><code>package.json</code>: a JSON file containing additional information about the
plugin, including the JS bundle file path</p>
</li>
<li>
<p><code>dist/index.umd.js</code>: a JS bundle file for the plugin</p>
</li>
</ul>
<h2 id="publishing-plugins">Publishing plugins <a href="#publishing-plugins" title="Permalink to this headline">¶</a><a class="headerlink" href="#publishing-plugins" title="Permanent link">&para;</a></h2>
<p>You can publish your FiftyOne plugins either privately or publicly by simply
uploading the source directory or a ZIP of it to GitHub or another file hosting
service.</p>
<p>Note</p>
<p>Want to share your plugin with the FiftyOne community? Make a pull request
into the <a href="https://github.com/voxel51/fiftyone-plugins">FiftyOne Plugins</a>
repository to add it to the
<a href="https://github.com/voxel51/fiftyone-plugins#community-plugins">Community Plugins list</a>!</p>
<p>Any users with access to the plugin’s hosted location can easily
<a href="using_plugins.html#plugins-download">download it</a> via the
<a href="../cli/index.html#cli-fiftyone-plugins-download">fiftyone plugins download</a> CLI command:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><span class="c1"># Download plugin(s) from a GitHub repository</span>
</span><span id="__span-3-2"><span class="n">fiftyone</span> <span class="n">plugins</span> <span class="n">download</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/&lt;</span><span class="n">user</span><span class="o">&gt;/&lt;</span><span class="n">repo</span><span class="o">&gt;</span><span class="p">[</span><span class="o">/</span><span class="n">tree</span><span class="o">/</span><span class="n">branch</span><span class="p">]</span>
</span><span id="__span-3-3">
</span><span id="__span-3-4"><span class="c1"># Download plugin(s) by specifying the GitHub repository details</span>
</span><span id="__span-3-5"><span class="n">fiftyone</span> <span class="n">plugins</span> <span class="n">download</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;/&lt;</span><span class="n">repo</span><span class="o">&gt;</span><span class="p">[</span><span class="o">/&lt;</span><span class="n">ref</span><span class="o">&gt;</span><span class="p">]</span>
</span><span id="__span-3-6">
</span><span id="__span-3-7"><span class="c1"># Download specific plugins from a GitHub repository</span>
</span><span id="__span-3-8"><span class="n">fiftyone</span> <span class="n">plugins</span> <span class="n">download</span> \\
</span><span id="__span-3-9">    <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/&lt;</span><span class="n">user</span><span class="o">&gt;/&lt;</span><span class="n">repo</span><span class="o">&gt;</span><span class="p">[</span><span class="o">/</span><span class="n">tree</span><span class="o">/</span><span class="n">branch</span><span class="p">]</span> \\
</span><span id="__span-3-10">    <span class="o">--</span><span class="n">plugin</span><span class="o">-</span><span class="n">names</span> <span class="o">&lt;</span><span class="n">name1</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">name2</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">name3</span><span class="o">&gt;</span>
</span></code></pre></div>
<p>Note</p>
<p>GitHub repositories may contain multiple plugins. By default, all plugins
that are found within the first three directory levels are installed, but
you can select specific ones if desired as shown above.</p>
<h2 id="quick-examples">Quick examples <a href="#quick-examples" title="Permalink to this headline">¶</a><a class="headerlink" href="#quick-examples" title="Permanent link">&para;</a></h2>
<p>This section contains a few quick examples of plugins before we dive into the
full details of the plugin system.</p>
<p>Note</p>
<p>The best way to learn how to write plugins is to use and inspect existing
ones. Check out the
<a href="https://github.com/voxel51/fiftyone-plugins">FiftyOne plugins</a>
repository for a growing collection of plugins that you can use as examples
when developing your own.</p>
<h3 id="example-plugin">Example plugin <a href="#example-plugin" title="Permalink to this headline">¶</a><a class="headerlink" href="#example-plugin" title="Permanent link">&para;</a></h3>
<p>The
<a href="https://github.com/voxel51/fiftyone-plugins/tree/main/plugins/hello-world">Hello World plugin</a>
defines both a JS Panel and a Python operator:</p>
<p>Here’s the plugin in action! The <code>Hello world</code> panel is available under the <code>+</code>
icon next to the Samples tab and the <code>count_samples</code> operator is available in
the operator browser:</p>
<p><img alt="../_images/hello-world.gif" src="../../_images/hello-world.gif" /></p>
<h3 id="example-python-operator">Example Python operator <a href="#example-python-operator" title="Permalink to this headline">¶</a><a class="headerlink" href="#example-python-operator" title="Permanent link">&para;</a></h3>
<p>Here’s a simple <a href="#developing-operators">Python operator</a> that accepts a
string input and then displays it to the user in the operator’s output modal.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><span class="k">class</span><span class="w"> </span><span class="nc">SimpleInputExample</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">Operator</span><span class="p">):</span>
</span><span id="__span-4-2">    <span class="nd">@property</span>
</span><span id="__span-4-3">    <span class="k">def</span><span class="w"> </span><span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-4-4">        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">OperatorConfig</span><span class="p">(</span>
</span><span id="__span-4-5">            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;simple_input_example&quot;</span><span class="p">,</span>
</span><span id="__span-4-6">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Simple input example&quot;</span><span class="p">,</span>
</span><span id="__span-4-7">        <span class="p">)</span>
</span><span id="__span-4-8">
</span><span id="__span-4-9">    <span class="k">def</span><span class="w"> </span><span class="nf">resolve_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-4-10">        <span class="n">inputs</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
</span><span id="__span-4-11">        <span class="n">inputs</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Message&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-4-12">        <span class="n">header</span> <span class="o">=</span> <span class="s2">&quot;Simple input example&quot;</span>
</span><span id="__span-4-13">        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">header</span><span class="p">))</span>
</span><span id="__span-4-14">
</span><span id="__span-4-15">    <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-4-16">        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]}</span>
</span><span id="__span-4-17">
</span><span id="__span-4-18">    <span class="k">def</span><span class="w"> </span><span class="nf">resolve_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-4-19">        <span class="n">outputs</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
</span><span id="__span-4-20">        <span class="n">outputs</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Message&quot;</span><span class="p">)</span>
</span><span id="__span-4-21">        <span class="n">header</span> <span class="o">=</span> <span class="s2">&quot;Simple input example: Success!&quot;</span>
</span><span id="__span-4-22">        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">outputs</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">header</span><span class="p">))</span>
</span><span id="__span-4-23">
</span><span id="__span-4-24"><span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
</span><span id="__span-4-25">    <span class="n">p</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">SimpleInputExample</span><span class="p">)</span>
</span></code></pre></div>
<p>In practice, operators would use the inputs to perform some operation on the
current dataset.</p>
<p>Note</p>
<p>Remember that you must also include the operator’s name in the plugin’s
<a href="#plugin-fiftyone-yml">fiftyone.yml</a>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><span class="n">operators</span><span class="p">:</span>
</span><span id="__span-5-2">  <span class="o">-</span> <span class="n">simple_input_example</span>
</span></code></pre></div>
<h3 id="example-python-panel">Example Python panel <a href="#example-python-panel" title="Permalink to this headline">¶</a><a class="headerlink" href="#example-python-panel" title="Permanent link">&para;</a></h3>
<p>Here’s a simple <a href="#developing-panels">Python panel</a> that renders a button
that shows a “Hello world!” notification when clicked:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.operators</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">foo</span>
</span><span id="__span-6-2"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.operators.types</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">types</span>
</span><span id="__span-6-3">
</span><span id="__span-6-4"><span class="k">class</span><span class="w"> </span><span class="nc">HelloWorldPanel</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">Panel</span><span class="p">):</span>
</span><span id="__span-6-5">    <span class="nd">@property</span>
</span><span id="__span-6-6">    <span class="k">def</span><span class="w"> </span><span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-6-7">        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">PanelConfig</span><span class="p">(</span>
</span><span id="__span-6-8">            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;hello_world_panel&quot;</span><span class="p">,</span>
</span><span id="__span-6-9">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Hello World Panel&quot;</span>
</span><span id="__span-6-10">        <span class="p">)</span>
</span><span id="__span-6-11">
</span><span id="__span-6-12">    <span class="k">def</span><span class="w"> </span><span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-6-13">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">hello_message</span> <span class="o">=</span> <span class="s2">&quot;Hello world!&quot;</span>
</span><span id="__span-6-14">
</span><span id="__span-6-15">    <span class="k">def</span><span class="w"> </span><span class="nf">say_hello</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-6-16">        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">hello_message</span><span class="p">)</span>
</span><span id="__span-6-17">
</span><span id="__span-6-18">    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-6-19">        <span class="n">panel</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
</span><span id="__span-6-20">        <span class="n">panel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
</span><span id="__span-6-21">            <span class="s2">&quot;hello_btn&quot;</span><span class="p">,</span>
</span><span id="__span-6-22">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Say Hello&quot;</span><span class="p">,</span>
</span><span id="__span-6-23">            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;emoji_people&quot;</span><span class="p">,</span>
</span><span id="__span-6-24">            <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">say_hello</span><span class="p">,</span>
</span><span id="__span-6-25">            <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span><span class="p">,</span>
</span><span id="__span-6-26">        <span class="p">)</span>
</span><span id="__span-6-27">
</span><span id="__span-6-28">        <span class="n">panel_view</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">GridView</span><span class="p">(</span>
</span><span id="__span-6-29">            <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">align_x</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">align_y</span><span class="o">=</span><span class="s2">&quot;center&quot;</span>
</span><span id="__span-6-30">        <span class="p">)</span>
</span><span id="__span-6-31">        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">panel_view</span><span class="p">)</span>
</span><span id="__span-6-32">
</span><span id="__span-6-33"><span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
</span><span id="__span-6-34">    <span class="n">p</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">HelloWorldPanel</span><span class="p">)</span>
</span></code></pre></div>
<p>Note</p>
<p>Remember that you must also include the panel’s name in the plugin’s
<a href="#plugin-fiftyone-yml">fiftyone.yml</a>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><span class="n">panels</span><span class="p">:</span>
</span><span id="__span-7-2">  <span class="o">-</span> <span class="n">hello_world_panel</span>
</span></code></pre></div>
<p><img alt="../_images/hello-world-panel-inline.gif" src="../../_images/hello-world-panel-inline.gif" /></p>
<h3 id="example-js-operator">Example JS operator <a href="#example-js-operator" title="Permalink to this headline">¶</a><a class="headerlink" href="#example-js-operator" title="Permanent link">&para;</a></h3>
<p>Here’s how to define a <a href="#developing-js-plugins">JS operator</a> that sets the
currently selected samples in the App based on a list of sample IDs provided
via a <code>samples</code> parameter.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><span class="kn">import</span><span class="w"> </span><span class="p">{</span><span class="n">Operator</span><span class="p">,</span> <span class="n">OperatorConfig</span><span class="p">,</span> <span class="n">types</span><span class="p">,</span> <span class="n">registerOperator</span><span class="p">}</span> <span class="kn">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/operators&quot;</span><span class="p">;</span>
</span><span id="__span-8-2"><span class="n">const</span> <span class="n">PLUGIN_NAME</span> <span class="o">=</span> <span class="s2">&quot;@my/plugin&quot;</span><span class="p">;</span>
</span><span id="__span-8-3">
</span><span id="__span-8-4"><span class="k">class</span><span class="w"> </span><span class="nc">SetSelectedSamples</span> <span class="n">extends</span> <span class="n">Operator</span> <span class="p">{</span>
</span><span id="__span-8-5">    <span class="n">get</span> <span class="n">config</span><span class="p">():</span> <span class="n">OperatorConfig</span> <span class="p">{</span>
</span><span id="__span-8-6">        <span class="k">return</span> <span class="n">new</span> <span class="n">OperatorConfig</span><span class="p">({</span>
</span><span id="__span-8-7">            <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;set_selected_samples&quot;</span><span class="p">,</span>
</span><span id="__span-8-8">            <span class="n">label</span><span class="p">:</span> <span class="s2">&quot;Set selected samples&quot;</span><span class="p">,</span>
</span><span id="__span-8-9">            <span class="n">unlisted</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
</span><span id="__span-8-10">        <span class="p">});</span>
</span><span id="__span-8-11">    <span class="p">}</span>
</span><span id="__span-8-12">    <span class="n">useHooks</span><span class="p">():</span> <span class="p">{}</span> <span class="p">{</span>
</span><span id="__span-8-13">        <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-8-14">            <span class="n">setSelected</span><span class="p">:</span> <span class="n">fos</span><span class="o">.</span><span class="n">useSetSelected</span><span class="p">(),</span>
</span><span id="__span-8-15">        <span class="p">};</span>
</span><span id="__span-8-16">    <span class="p">}</span>
</span><span id="__span-8-17">    <span class="k">async</span> <span class="n">execute</span><span class="p">({</span> <span class="n">hooks</span><span class="p">,</span> <span class="n">params</span> <span class="p">}:</span> <span class="n">ExecutionContext</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-8-18">        <span class="n">hooks</span><span class="o">.</span><span class="n">setSelected</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">samples</span><span class="p">);</span>
</span><span id="__span-8-19">    <span class="p">}</span>
</span><span id="__span-8-20"><span class="p">}</span>
</span><span id="__span-8-21">
</span><span id="__span-8-22"><span class="n">registerOperator</span><span class="p">(</span><span class="n">SetSelectedSamples</span><span class="p">,</span> <span class="n">PLUGIN_NAME</span><span class="p">);</span>
</span></code></pre></div>
<p>Unlike Python operators, JS operators can use React hooks and the <code>@fiftyone/*</code>
packages by defining a <code>useHook()</code> method. Any values return in this method
will be available to the operator’s <code>execute()</code> method via <code>ctx.hooks</code>.</p>
<p>Note</p>
<p>Marking the operator as <code>unlisted</code> omits it from the
<a href="using_plugins.html#using-operators">operator browser</a>, which is useful when the
operator is intended only for internal use by other plugin components.</p>
<h2 id="developing-operators">Developing operators <a href="#developing-operators" title="Permalink to this headline">¶</a><a class="headerlink" href="#developing-operators" title="Permanent link">&para;</a></h2>
<p>Operators allow you to define custom operations that accept parameters via
input properties, execute some actions based on them, and optionally return
outputs. They can be <a href="using_plugins.html#using-operators">executed</a> by users in the App or
triggered internally by other operators.</p>
<p>Operators can be defined in either Python or JS, and FiftyOne comes with a
number of builtin <code>Python</code> and
<a href="https://github.com/voxel51/fiftyone/blob/develop/app/packages/operators/src/built-in-operators.ts">JS</a>
operators for common tasks.</p>
<p>The <a href="../api/fiftyone.operators.types.html#module-fiftyone.operators.types" title="fiftyone.operators.types"><code>fiftyone.operators.types</code></a> module and
<a href="api/plugins.fiftyone.operators.html#module-fiftyone-operators" title="@fiftyone/operators"><code>@fiftyone/operators</code></a> package define a rich
builtin type system that operator developers can use to define the input and
output properties of their operators without the need to build custom user
interfaces from scratch. These types handle all aspects of input collection,
validation, and component rendering for you.</p>
<p>Operators can be composed for coordination between Python and the FiftyOne App,
such as triggering a reload of samples/view to update the app with the changes
made by the operator. Operators can also be scheduled to run by an orchestrator
or triggered by other operators.</p>
<h3 id="operator-interface">Operator interface <a href="#operator-interface" title="Permalink to this headline">¶</a><a class="headerlink" href="#operator-interface" title="Permanent link">&para;</a></h3>
<p>The code block below describes the Python interface for defining operators.
We’ll dive into each component of the interface in more detail in the
subsequent sections.</p>
<p>Note</p>
<p>The JS interface for defining operators is analogous. See this
<a href="#example-js-operator">example JS operator</a> for details.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.operators</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">foo</span>
</span><span id="__span-9-2"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.operators.types</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">types</span>
</span><span id="__span-9-3">
</span><span id="__span-9-4"><span class="k">class</span><span class="w"> </span><span class="nc">ExampleOperator</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">Operator</span><span class="p">):</span>
</span><span id="__span-9-5">    <span class="nd">@property</span>
</span><span id="__span-9-6">    <span class="k">def</span><span class="w"> </span><span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-9-7">        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">OperatorConfig</span><span class="p">(</span>
</span><span id="__span-9-8">            <span class="c1"># The operator&#39;s URI: f&quot;{plugin_name}/{name}&quot;</span>
</span><span id="__span-9-9">            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;example_operator&quot;</span><span class="p">,</span>  <span class="c1"># required</span>
</span><span id="__span-9-10">
</span><span id="__span-9-11">            <span class="c1"># The display name of the operator</span>
</span><span id="__span-9-12">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Example operator&quot;</span><span class="p">,</span>  <span class="c1"># required</span>
</span><span id="__span-9-13">
</span><span id="__span-9-14">            <span class="c1"># A description for the operator</span>
</span><span id="__span-9-15">            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;An example description&quot;</span>
</span><span id="__span-9-16">
</span><span id="__span-9-17">            <span class="c1"># Whether to re-execute resolve_input() after each user input</span>
</span><span id="__span-9-18">            <span class="n">dynamic</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>
</span><span id="__span-9-19">
</span><span id="__span-9-20">            <span class="c1"># Whether the operator&#39;s execute() method returns a generator</span>
</span><span id="__span-9-21">            <span class="c1"># that should be iterated over until exhausted</span>
</span><span id="__span-9-22">            <span class="n">execute_as_generator</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>
</span><span id="__span-9-23">
</span><span id="__span-9-24">            <span class="c1"># Whether to hide this operator from the App&#39;s operator browser</span>
</span><span id="__span-9-25">            <span class="c1"># Set this to True if the operator is only for internal use</span>
</span><span id="__span-9-26">            <span class="n">unlisted</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>
</span><span id="__span-9-27">
</span><span id="__span-9-28">            <span class="c1"># Whether the operator should be executed every time a new App</span>
</span><span id="__span-9-29">            <span class="c1"># session starts</span>
</span><span id="__span-9-30">            <span class="n">on_startup</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>
</span><span id="__span-9-31">
</span><span id="__span-9-32">            <span class="c1"># Whether the operator should be executed every time a new</span>
</span><span id="__span-9-33">            <span class="c1"># dataset is opened in the App</span>
</span><span id="__span-9-34">            <span class="n">on_dataset_open</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>
</span><span id="__span-9-35">
</span><span id="__span-9-36">            <span class="c1"># Custom icons to use</span>
</span><span id="__span-9-37">            <span class="c1"># Can be a URL, a local path in the plugin directory, or the</span>
</span><span id="__span-9-38">            <span class="c1"># name of a MUI icon: https://marella.me/material-icons/demo</span>
</span><span id="__span-9-39">            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon.svg&quot;</span><span class="p">,</span>
</span><span id="__span-9-40">            <span class="n">light_icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon-light.svg&quot;</span><span class="p">,</span>  <span class="c1"># light theme only</span>
</span><span id="__span-9-41">            <span class="n">dark_icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon-dark.svg&quot;</span><span class="p">,</span>  <span class="c1"># dark theme only</span>
</span><span id="__span-9-42">
</span><span id="__span-9-43">            <span class="c1"># Whether the operator supports immediate and/or delegated execution</span>
</span><span id="__span-9-44">            <span class="n">allow_immediate_execution</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>    <span class="c1"># default True</span>
</span><span id="__span-9-45">            <span class="n">allow_delegated_execution</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>    <span class="c1"># default False</span>
</span><span id="__span-9-46">            <span class="n">default_choice_to_delegated</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>
</span><span id="__span-9-47">            <span class="n">resolve_execution_options_on_change</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-9-48">        <span class="p">)</span>
</span><span id="__span-9-49">
</span><span id="__span-9-50">    <span class="k">def</span><span class="w"> </span><span class="nf">resolve_placement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-9-51"><span class="w">        </span><span class="sd">&quot;&quot;&quot;You can optionally implement this method to configure a button</span>
</span><span id="__span-9-52"><span class="sd">        or icon in the App that triggers this operator.</span>
</span><span id="__span-9-53">
</span><span id="__span-9-54"><span class="sd">        By default the operator only appears in the operator browser</span>
</span><span id="__span-9-55"><span class="sd">        (unless it is unlisted).</span>
</span><span id="__span-9-56">
</span><span id="__span-9-57"><span class="sd">        Returns:</span>
</span><span id="__span-9-58"><span class="sd">            a `types.Placement`</span>
</span><span id="__span-9-59"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-9-60">        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Placement</span><span class="p">(</span>
</span><span id="__span-9-61">            <span class="c1"># Make operator appear in the actions row above the sample grid</span>
</span><span id="__span-9-62">            <span class="n">types</span><span class="o">.</span><span class="n">Places</span><span class="o">.</span><span class="n">SAMPLES_GRID_SECONDARY_ACTIONS</span><span class="p">,</span>
</span><span id="__span-9-63">
</span><span id="__span-9-64">            <span class="c1"># Use a button as the operator&#39;s placement</span>
</span><span id="__span-9-65">            <span class="n">types</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
</span><span id="__span-9-66">                <span class="c1"># A label for placement button visible on hover</span>
</span><span id="__span-9-67">                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Open Histograms Panel&quot;</span><span class="p">,</span>
</span><span id="__span-9-68">
</span><span id="__span-9-69">                <span class="c1"># An icon for the button</span>
</span><span id="__span-9-70">                <span class="c1"># The default is a button with the `label` displayed</span>
</span><span id="__span-9-71">                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon.svg&quot;</span><span class="p">,</span>
</span><span id="__span-9-72">
</span><span id="__span-9-73">                <span class="c1"># If False, don&#39;t show the operator&#39;s input prompt when we</span>
</span><span id="__span-9-74">                <span class="c1"># do not require user input</span>
</span><span id="__span-9-75">                <span class="n">prompt</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span>  <span class="c1"># False</span>
</span><span id="__span-9-76">            <span class="p">)</span>
</span><span id="__span-9-77">        <span class="p">)</span>
</span><span id="__span-9-78">
</span><span id="__span-9-79">    <span class="k">def</span><span class="w"> </span><span class="nf">resolve_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-9-80"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to collect user inputs as parameters</span>
</span><span id="__span-9-81"><span class="sd">        that are stored in `ctx.params`.</span>
</span><span id="__span-9-82">
</span><span id="__span-9-83"><span class="sd">        Returns:</span>
</span><span id="__span-9-84"><span class="sd">            a `types.Property` defining the form&#39;s components</span>
</span><span id="__span-9-85"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-9-86">        <span class="n">inputs</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
</span><span id="__span-9-87">
</span><span id="__span-9-88">        <span class="c1"># Use the builtin `types` and the current `ctx.params` to define</span>
</span><span id="__span-9-89">        <span class="c1"># the necessary user input data</span>
</span><span id="__span-9-90">        <span class="n">inputs</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="s2">&quot;key&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</span><span id="__span-9-91">
</span><span id="__span-9-92">        <span class="c1"># When `dynamic=True`, you&#39;ll often use the current `ctx` to</span>
</span><span id="__span-9-93">        <span class="c1"># conditionally render different components</span>
</span><span id="__span-9-94">        <span class="k">if</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;value&quot;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
</span><span id="__span-9-95">            <span class="c1"># do something</span>
</span><span id="__span-9-96">        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-9-97">            <span class="c1"># do something else</span>
</span><span id="__span-9-98">
</span><span id="__span-9-99">        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Example operator&quot;</span><span class="p">))</span>
</span><span id="__span-9-100">
</span><span id="__span-9-101">    <span class="k">def</span><span class="w"> </span><span class="nf">resolve_delegation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-9-102"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method if you want to programmatically *force*</span>
</span><span id="__span-9-103"><span class="sd">        this operation to be delegated or executed immediately.</span>
</span><span id="__span-9-104">
</span><span id="__span-9-105"><span class="sd">        Returns:</span>
</span><span id="__span-9-106"><span class="sd">            whether the operation should be delegated (True), run</span>
</span><span id="__span-9-107"><span class="sd">            immediately (False), or None to defer to</span>
</span><span id="__span-9-108"><span class="sd">            `resolve_execution_options()` to specify the available options</span>
</span><span id="__span-9-109"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-9-110">        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1000</span>  <span class="c1"># delegate for larger views</span>
</span><span id="__span-9-111">
</span><span id="__span-9-112">    <span class="k">def</span><span class="w"> </span><span class="nf">resolve_execution_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-9-113"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method if you want to dynamically configure the</span>
</span><span id="__span-9-114"><span class="sd">        execution options available to this operator based on the current</span>
</span><span id="__span-9-115"><span class="sd">        `ctx`.</span>
</span><span id="__span-9-116">
</span><span id="__span-9-117"><span class="sd">        Returns:</span>
</span><span id="__span-9-118"><span class="sd">            an `ExecutionOptions` instance</span>
</span><span id="__span-9-119"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-9-120">        <span class="n">should_delegate</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1000</span>  <span class="c1"># delegate for larger views</span>
</span><span id="__span-9-121">        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">ExecutionOptions</span><span class="p">(</span>
</span><span id="__span-9-122">            <span class="n">allow_immediate_execution</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-9-123">            <span class="n">allow_delegated_execution</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-9-124">            <span class="n">default_choice_to_delegated</span><span class="o">=</span><span class="n">should_delegate</span><span class="p">,</span>
</span><span id="__span-9-125">        <span class="p">)</span>
</span><span id="__span-9-126">
</span><span id="__span-9-127">    <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-9-128"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Executes the actual operation based on the hydrated `ctx`.</span>
</span><span id="__span-9-129"><span class="sd">        All operators must implement this method.</span>
</span><span id="__span-9-130">
</span><span id="__span-9-131"><span class="sd">        This method can optionally be implemented as `async`.</span>
</span><span id="__span-9-132">
</span><span id="__span-9-133"><span class="sd">        Returns:</span>
</span><span id="__span-9-134"><span class="sd">            an optional dict of results values</span>
</span><span id="__span-9-135"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-9-136">        <span class="c1"># Use ctx.params, ctx.dataset, ctx.view, etc to perform the</span>
</span><span id="__span-9-137">        <span class="c1"># necessary computation</span>
</span><span id="__span-9-138">        <span class="n">value</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span>
</span><span id="__span-9-139">        <span class="n">view</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">view</span>
</span><span id="__span-9-140">        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
</span><span id="__span-9-141">
</span><span id="__span-9-142">        <span class="c1"># Use ctx.ops to trigger builtin operations</span>
</span><span id="__span-9-143">        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">clear_selected_samples</span><span class="p">()</span>
</span><span id="__span-9-144">        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">set_view</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="p">)</span>
</span><span id="__span-9-145">
</span><span id="__span-9-146">        <span class="c1"># Use ctx.trigger to call other operators as necessary</span>
</span><span id="__span-9-147">        <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;operator_uri&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">})</span>
</span><span id="__span-9-148">
</span><span id="__span-9-149">        <span class="c1"># If `execute_as_generator=True`, this method may yield multiple</span>
</span><span id="__span-9-150">        <span class="c1"># messages</span>
</span><span id="__span-9-151">        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sample</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">current_view</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="__span-9-152">            <span class="c1"># do some computation</span>
</span><span id="__span-9-153">            <span class="k">yield</span> <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">set_progress</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">i</span><span class="o">/</span><span class="n">n</span><span class="p">)</span>
</span><span id="__span-9-154">
</span><span id="__span-9-155">        <span class="k">yield</span> <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">reload_dataset</span><span class="p">()</span>
</span><span id="__span-9-156">
</span><span id="__span-9-157">        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
</span><span id="__span-9-158">
</span><span id="__span-9-159">    <span class="k">def</span><span class="w"> </span><span class="nf">resolve_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-9-160"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method if your operator renders an output form</span>
</span><span id="__span-9-161"><span class="sd">        to the user.</span>
</span><span id="__span-9-162">
</span><span id="__span-9-163"><span class="sd">        Returns:</span>
</span><span id="__span-9-164"><span class="sd">            a `types.Property` defining the components of the output form</span>
</span><span id="__span-9-165"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-9-166">        <span class="n">outputs</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
</span><span id="__span-9-167">
</span><span id="__span-9-168">        <span class="c1"># Use the builtin `types` and the current `ctx.params` and</span>
</span><span id="__span-9-169">        <span class="c1"># `ctx.results` as necessary to define the necessary output form</span>
</span><span id="__span-9-170">        <span class="n">outputs</span><span class="o">.</span><span class="n">define_property</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</span><span id="__span-9-171">
</span><span id="__span-9-172">        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">outputs</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Example operator&quot;</span><span class="p">))</span>
</span><span id="__span-9-173">
</span><span id="__span-9-174"><span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
</span><span id="__span-9-175"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Always implement this method and register() each operator that your</span>
</span><span id="__span-9-176"><span class="sd">    plugin defines.</span>
</span><span id="__span-9-177"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-9-178">    <span class="n">p</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">ExampleOperator</span><span class="p">)</span>
</span></code></pre></div>
<p>Note</p>
<p>Remember that you must also include the operator’s name in the plugin’s
<a href="#plugin-fiftyone-yml">fiftyone.yml</a>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><span class="n">operators</span><span class="p">:</span>
</span><span id="__span-10-2">  <span class="o">-</span> <span class="n">example_operator</span>
</span></code></pre></div>
<h3 id="operator-config">Operator config <a href="#operator-config" title="Permalink to this headline">¶</a><a class="headerlink" href="#operator-config" title="Permanent link">&para;</a></h3>
<p>Every operator must define a
<a href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.config" title="fiftyone.operators.operator.Operator.config"><code>config</code></a> property that
defines its name, display name, and other optional metadata about its
execution:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><span class="nd">@property</span>
</span><span id="__span-11-2"><span class="k">def</span><span class="w"> </span><span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-11-3">    <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">OperatorConfig</span><span class="p">(</span>
</span><span id="__span-11-4">        <span class="c1"># The operator&#39;s URI: f&quot;{plugin_name}/{name}&quot;</span>
</span><span id="__span-11-5">        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;example_operator&quot;</span><span class="p">,</span>  <span class="c1"># required</span>
</span><span id="__span-11-6">
</span><span id="__span-11-7">        <span class="c1"># The display name of the operator</span>
</span><span id="__span-11-8">        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Example operator&quot;</span><span class="p">,</span>  <span class="c1"># required</span>
</span><span id="__span-11-9">
</span><span id="__span-11-10">        <span class="c1"># A description for the operator</span>
</span><span id="__span-11-11">        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;An example description&quot;</span>
</span><span id="__span-11-12">
</span><span id="__span-11-13">        <span class="c1"># Whether to re-execute resolve_input() after each user input</span>
</span><span id="__span-11-14">        <span class="n">dynamic</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>
</span><span id="__span-11-15">
</span><span id="__span-11-16">        <span class="c1"># Whether the operator&#39;s execute() method returns a generator</span>
</span><span id="__span-11-17">        <span class="c1"># that should be iterated over until exhausted</span>
</span><span id="__span-11-18">        <span class="n">execute_as_generator</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>
</span><span id="__span-11-19">
</span><span id="__span-11-20">        <span class="c1"># Whether to hide this operator from the App&#39;s operator browser</span>
</span><span id="__span-11-21">        <span class="c1"># Set this to True if the operator is only for internal use</span>
</span><span id="__span-11-22">        <span class="n">unlisted</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>
</span><span id="__span-11-23">
</span><span id="__span-11-24">        <span class="c1"># Whether the operator should be executed every time a new App</span>
</span><span id="__span-11-25">        <span class="c1"># session starts</span>
</span><span id="__span-11-26">        <span class="n">on_startup</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>
</span><span id="__span-11-27">
</span><span id="__span-11-28">        <span class="c1"># Whether the operator should be executed every time a new dataset</span>
</span><span id="__span-11-29">        <span class="c1"># is opened in the App</span>
</span><span id="__span-11-30">        <span class="n">on_dataset_open</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>
</span><span id="__span-11-31">
</span><span id="__span-11-32">        <span class="c1"># Custom icons to use</span>
</span><span id="__span-11-33">        <span class="c1"># Can be a URL, a local path in the plugin directory, or the</span>
</span><span id="__span-11-34">        <span class="c1"># name of a MUI icon: https://marella.me/material-icons/demo</span>
</span><span id="__span-11-35">        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon.svg&quot;</span><span class="p">,</span>
</span><span id="__span-11-36">        <span class="n">light_icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon-light.svg&quot;</span><span class="p">,</span>  <span class="c1"># light theme only</span>
</span><span id="__span-11-37">        <span class="n">dark_icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon-dark.svg&quot;</span><span class="p">,</span>  <span class="c1"># dark theme only</span>
</span><span id="__span-11-38">
</span><span id="__span-11-39">        <span class="c1"># Whether the operator supports immediate and/or delegated execution</span>
</span><span id="__span-11-40">        <span class="n">allow_immediate_execution</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>    <span class="c1"># default True</span>
</span><span id="__span-11-41">        <span class="n">allow_delegated_execution</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>    <span class="c1"># default False</span>
</span><span id="__span-11-42">        <span class="n">default_choice_to_delegated</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>
</span><span id="__span-11-43">        <span class="n">resolve_execution_options_on_change</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-11-44">    <span class="p">)</span>
</span></code></pre></div>
<h3 id="execution-context">Execution context <a href="#execution-context" title="Permalink to this headline">¶</a><a class="headerlink" href="#execution-context" title="Permanent link">&para;</a></h3>
<p>An <code>ExecutionContext</code> is
passed to each of the operator’s methods at runtime. This <code>ctx</code> contains static
information about the current state of the App (dataset, view, panel,
selection, etc) as well as dynamic information about the current parameters and
results.</p>
<p>An <code>ExecutionContext</code>
contains the following properties:</p>
<ul>
<li>
<p><code>ctx.params</code>: a dict containing the operator’s current input parameter
values</p>
</li>
<li>
<p><code>ctx.dataset_name</code>: the name of the current dataset</p>
</li>
<li>
<p><code>ctx.dataset</code> - the current <a href="../api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset" title="fiftyone.core.dataset.Dataset"><code>Dataset</code></a> instance</p>
</li>
<li>
<p><code>ctx.view</code> - the current <a href="../api/fiftyone.core.view.html#fiftyone.core.view.DatasetView" title="fiftyone.core.view.DatasetView"><code>DatasetView</code></a> instance</p>
</li>
<li>
<p><code>ctx.spaces</code> - the current <a href="../fiftyone_concepts/app.html#app-spaces">Spaces layout</a> in the App</p>
</li>
<li>
<p><code>ctx.current_sample</code> - the ID of the active sample in the App modal, if any</p>
</li>
<li>
<p><code>ctx.selected</code> - the list of currently selected samples in the App, if any</p>
</li>
<li>
<p><code>ctx.selected_labels</code> - the list of currently selected labels in the App,
if any</p>
</li>
<li>
<p><code>ctx.extended_selection</code> - the extended selection of the view, if any</p>
</li>
<li>
<p><code>ctx.group_slice</code> - the active group slice in the App, if any</p>
</li>
<li>
<p><code>ctx.user_id</code> - the ID of the user that invoked the operator, if known</p>
</li>
<li>
<p><code>ctx.user</code> - an object of information about the user that invoked the
operator, if known, including the user’s <code>id</code>, <code>name</code>, <code>email</code>, <code>role</code>, and
<code>dataset_permission</code></p>
</li>
<li>
<p><code>ctx.user_request_token</code> - the request token authenticating the user
executing the operation, if known</p>
</li>
<li>
<p><code>ctx.panel_id</code> - the ID of the panel that invoked the operator, if any</p>
</li>
<li>
<p><code>ctx.panel</code> - a <a href="../api/fiftyone.operators.panel.html#fiftyone.operators.panel.PanelRef" title="fiftyone.operators.panel.PanelRef"><code>PanelRef</code></a>
instance that you can use to read and write the <a href="#panel-state">state</a>
and <a href="#panel-data">data</a> of the current panel, if the operator was
invoked from a panel</p>
</li>
<li>
<p><code>ctx.delegated</code> - whether the operation was delegated</p>
</li>
<li>
<p><code>ctx.requesting_delegated_execution</code> - whether delegated execution was
requested for the operation</p>
</li>
<li>
<p><code>ctx.delegation_target</code> - the orchestrator to which the operation should be
delegated, if applicable</p>
</li>
<li>
<p><code>ctx.ops</code> - an
<a href="../api/fiftyone.operators.operations.html#fiftyone.operators.operations.Operations" title="fiftyone.operators.operations.Operations"><code>Operations</code></a> instance
that you can use to trigger builtin operations on the current context</p>
</li>
<li>
<p><code>ctx.trigger</code> - a method that you can use to trigger arbitrary operations
on the current context</p>
</li>
<li>
<p><code>ctx.secrets</code> - a dict of <a href="#operator-secrets">secrets</a> for the plugin,
if any</p>
</li>
<li>
<p><code>ctx.results</code> - a dict containing the outputs of the <code>execute()</code> method, if
it has been called</p>
</li>
<li>
<p><code>ctx.hooks</code> <strong>(JS only)</strong> - the return value of the operator’s <code>useHooks()</code>
method</p>
</li>
</ul>
<h3 id="operator-inputs">Operator inputs <a href="#operator-inputs" title="Permalink to this headline">¶</a><a class="headerlink" href="#operator-inputs" title="Permanent link">&para;</a></h3>
<p>Operators can optionally implement
<a href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_input" title="fiftyone.operators.operator.Operator.resolve_input"><code>resolve_input()</code></a>
to define user input forms that are presented to the user as a modal in the App
when the operator is invoked.</p>
<p>The basic objective of
<a href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_input" title="fiftyone.operators.operator.Operator.resolve_input"><code>resolve_input()</code></a>
is to populate the <code>ctx.params</code> dict with user-provided parameter values, which
are retrieved from the various subproperties of the
<a href="../api/fiftyone.operators.types.html#fiftyone.operators.types.Property" title="fiftyone.operators.types.Property"><code>Property</code></a> returned by the method
( <code>inputs</code> in the examples below).</p>
<p>The <a href="../api/fiftyone.operators.types.html#module-fiftyone.operators.types" title="fiftyone.operators.types"><code>fiftyone.operators.types</code></a> module defines a rich builtin type system
that you can use to define the necessary input properties. These types handle
all aspects of input collection, validation, and component rendering for you!</p>
<p>For example, here’s a simple example of collecting a single string input from
the user:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><span class="k">def</span><span class="w"> </span><span class="nf">resolve_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-12-2">    <span class="n">inputs</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
</span><span id="__span-12-3">    <span class="n">inputs</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Message&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-12-4">    <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Static example&quot;</span><span class="p">))</span>
</span><span id="__span-12-5">
</span><span id="__span-12-6"><span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-12-7">    <span class="n">the_message</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span>
</span></code></pre></div>
<p>If the <a href="#operator-config">operator’s config</a> declares <code>dynamic=True</code>, then
<a href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_input" title="fiftyone.operators.operator.Operator.resolve_input"><code>resolve_input()</code></a>
will be called after each user input, which allows you to construct dynamic
forms whose components may contextually change based on the already provided
values and any other aspects of the
<a href="#operator-execution-context">execution context</a>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.brain</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">fob</span>
</span><span id="__span-13-2">
</span><span id="__span-13-3"><span class="k">def</span><span class="w"> </span><span class="nf">resolve_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-13-4">    <span class="n">inputs</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
</span><span id="__span-13-5">    <span class="n">brain_keys</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">list_brain_runs</span><span class="p">()</span>
</span><span id="__span-13-6">
</span><span id="__span-13-7">    <span class="k">if</span> <span class="ow">not</span> <span class="n">brain_keys</span><span class="p">:</span>
</span><span id="__span-13-8">        <span class="n">warning</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Warning</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;This dataset has no brain runs&quot;</span><span class="p">)</span>
</span><span id="__span-13-9">        <span class="n">prop</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="s2">&quot;warning&quot;</span><span class="p">,</span> <span class="n">warning</span><span class="p">)</span>
</span><span id="__span-13-10">        <span class="n">prop</span><span class="o">.</span><span class="n">invalid</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># so form&#39;s `Execute` button is disabled</span>
</span><span id="__span-13-11">        <span class="k">return</span>
</span><span id="__span-13-12">
</span><span id="__span-13-13">    <span class="n">choices</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">DropdownView</span><span class="p">()</span>
</span><span id="__span-13-14">    <span class="k">for</span> <span class="n">brain_key</span> <span class="ow">in</span> <span class="n">brain_keys</span><span class="p">:</span>
</span><span id="__span-13-15">        <span class="n">choices</span><span class="o">.</span><span class="n">add_choice</span><span class="p">(</span><span class="n">brain_key</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">brain_key</span><span class="p">)</span>
</span><span id="__span-13-16">
</span><span id="__span-13-17">    <span class="n">inputs</span><span class="o">.</span><span class="n">str</span><span class="p">(</span>
</span><span id="__span-13-18">        <span class="s2">&quot;brain_key&quot;</span><span class="p">,</span>
</span><span id="__span-13-19">        <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-13-20">        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Brain key&quot;</span><span class="p">,</span>
</span><span id="__span-13-21">        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Choose a brain key to use&quot;</span><span class="p">,</span>
</span><span id="__span-13-22">        <span class="n">view</span><span class="o">=</span><span class="n">choices</span><span class="p">,</span>
</span><span id="__span-13-23">    <span class="p">)</span>
</span><span id="__span-13-24">
</span><span id="__span-13-25">    <span class="n">brain_key</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;brain_key&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="__span-13-26">    <span class="k">if</span> <span class="n">brain_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-13-27">        <span class="k">return</span>  <span class="c1"># single `brain_key`</span>
</span><span id="__span-13-28">
</span><span id="__span-13-29">    <span class="n">info</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_brain_info</span><span class="p">(</span><span class="n">brain_key</span><span class="p">)</span>
</span><span id="__span-13-30">
</span><span id="__span-13-31">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">fob</span><span class="o">.</span><span class="n">SimilarityConfig</span><span class="p">):</span>
</span><span id="__span-13-32">        <span class="c1"># We found a similarity config; render some inputs specific to that</span>
</span><span id="__span-13-33">        <span class="n">inputs</span><span class="o">.</span><span class="n">bool</span><span class="p">(</span>
</span><span id="__span-13-34">            <span class="s2">&quot;upgrade&quot;</span><span class="p">,</span>
</span><span id="__span-13-35">            <span class="n">label</span><span class="s2">&quot;Compute visualization&quot;</span><span class="p">,</span>
</span><span id="__span-13-36">            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generate an embeddings visualization for this index?&quot;</span><span class="p">,</span>
</span><span id="__span-13-37">            <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">CheckboxView</span><span class="p">(),</span>
</span><span id="__span-13-38">        <span class="p">)</span>
</span><span id="__span-13-39">
</span><span id="__span-13-40">    <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Dynamic example&quot;</span><span class="p">))</span>
</span></code></pre></div>
<p>Remember that properties automatically handle validation for you. So if you
configure a property as <code>required=True</code> but the user has not provided a value,
the property will automatically be marked as <code>invalid=True</code>. The operator’s
<code>Execute</code> button will be enabled if and only if all input properties are valid
(recursively searching nested objects).</p>
<p>Note</p>
<p>As the example above shows, you can manually set a property to invalid by
setting its <code>invalid</code> property.</p>
<p>Note</p>
<p>Avoid expensive computations in
<a href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_input" title="fiftyone.operators.operator.Operator.resolve_input"><code>resolve_input()</code></a>
or else the form may take too long to render, especially for dynamic inputs
where the method is called after every user input.</p>
<h3 id="delegated-execution">Delegated execution <a href="#delegated-execution" title="Permalink to this headline">¶</a><a class="headerlink" href="#delegated-execution" title="Permanent link">&para;</a></h3>
<p>By default, operations are <a href="#operator-execution">executed</a> immediately
after their inputs are provided in the App or they are triggered
programmatically.</p>
<p>However, many interesting operations like model inference, embeddings
computation, evaluation, and exports are computationally intensive and/or not
suitable for immediate execution.</p>
<p>In such cases, <a href="using_plugins.html#delegated-operations">delegated operations</a> come to the
rescue by allowing users to schedule potentially long-running tasks that are
executed in the background while you continue to use the App.</p>
<p>Note</p>
<p><a href="../teams/teams_plugins.html#teams-delegated-operations">FiftyOne Teams</a> deployments come out of
the box with a connected compute cluster for executing delegated operations
at scale.</p>
<p>In FiftyOne Open Source, you can use delegated operations at small scale
by <a href="using_plugins.html#delegated-orchestrator-open-source">running them locally</a>.</p>
<p>There are a variety of options available for configuring whether a given
operation should be delegated or executed immediately.</p>
<h4 id="execution-options">Execution options <a href="#execution-options" title="Permalink to this headline">¶</a><a class="headerlink" href="#execution-options" title="Permanent link">&para;</a></h4>
<p>You can provide the optional properties described below in the
<a href="#operator-config">operator’s config</a> to specify the available execution
modes for the operator:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><span class="nd">@property</span>
</span><span id="__span-14-2"><span class="k">def</span><span class="w"> </span><span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-14-3">    <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">OperatorConfig</span><span class="p">(</span>
</span><span id="__span-14-4">        <span class="c1"># Other parameters...</span>
</span><span id="__span-14-5">
</span><span id="__span-14-6">        <span class="c1"># Whether to allow immediate execution</span>
</span><span id="__span-14-7">        <span class="n">allow_immediate_execution</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>    <span class="c1"># default True</span>
</span><span id="__span-14-8">
</span><span id="__span-14-9">        <span class="c1"># Whether to allow delegated execution</span>
</span><span id="__span-14-10">        <span class="n">allow_delegated_execution</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>    <span class="c1"># default False</span>
</span><span id="__span-14-11">
</span><span id="__span-14-12">        <span class="c1"># Whether the default execution mode should be delegated, if both</span>
</span><span id="__span-14-13">        <span class="c1"># options are available</span>
</span><span id="__span-14-14">        <span class="n">default_choice_to_delegated</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># default False</span>
</span><span id="__span-14-15">
</span><span id="__span-14-16">        <span class="c1"># Whether to resolve execution options dynamically when the</span>
</span><span id="__span-14-17">        <span class="c1"># operator&#39;s inputs change. By default, this behavior will match</span>
</span><span id="__span-14-18">        <span class="c1"># the operator&#39;s ``dynamic`` setting</span>
</span><span id="__span-14-19">        <span class="n">resolve_execution_options_on_change</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="o">/</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># default None</span>
</span><span id="__span-14-20">    <span class="p">)</span>
</span></code></pre></div>
<p>When the operator’s input form is rendered in the App, the <code>Execute|Schedule</code>
button at the bottom of the modal will contextually show whether the operation
will be executed immediately, scheduled for delegated execution, or allow the
user to choose between the supported options if there are multiple:</p>
<p><img alt="../_images/operator-execute-button.png" src="../../_images/operator-execute-button.png" /></p>
<h4 id="dynamic-execution-options">Dynamic execution options <a href="#dynamic-execution-options" title="Permalink to this headline">¶</a><a class="headerlink" href="#dynamic-execution-options" title="Permanent link">&para;</a></h4>
<p>Operators may also implement
<a href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_execution_options" title="fiftyone.operators.operator.Operator.resolve_execution_options"><code>resolve_execution_options()</code></a>
to dynamically configure the available execution options based on the current
execution context:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><span class="c1"># Option 1: recommend delegation for larger views</span>
</span><span id="__span-15-2"><span class="k">def</span><span class="w"> </span><span class="nf">resolve_execution_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-15-3">    <span class="n">should_delegate</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1000</span>
</span><span id="__span-15-4">    <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">ExecutionOptions</span><span class="p">(</span>
</span><span id="__span-15-5">        <span class="n">allow_immediate_execution</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-15-6">        <span class="n">allow_delegated_execution</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-15-7">        <span class="n">default_choice_to_delegated</span><span class="o">=</span><span class="n">should_delegate</span><span class="p">,</span>
</span><span id="__span-15-8">    <span class="p">)</span>
</span><span id="__span-15-9">
</span><span id="__span-15-10"><span class="c1"># Option 2: force delegation for larger views</span>
</span><span id="__span-15-11"><span class="k">def</span><span class="w"> </span><span class="nf">resolve_execution_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-15-12">    <span class="n">delegate</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1000</span>
</span><span id="__span-15-13">    <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">ExecutionOptions</span><span class="p">(</span>
</span><span id="__span-15-14">        <span class="n">allow_immediate_execution</span><span class="o">=</span><span class="ow">not</span> <span class="n">delegate</span><span class="p">,</span>
</span><span id="__span-15-15">        <span class="n">allow_delegated_execution</span><span class="o">=</span><span class="n">delegate</span><span class="p">,</span>
</span><span id="__span-15-16">    <span class="p">)</span>
</span></code></pre></div>
<p>If implemented, this method will override any static execution parameters
included in the <a href="#operator-config">operator’s config</a> as described in the
previous section.</p>
<h4 id="forced-delegation">Forced delegation <a href="#forced-delegation" title="Permalink to this headline">¶</a><a class="headerlink" href="#forced-delegation" title="Permanent link">&para;</a></h4>
<p>Operators can implement
<a href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_delegation" title="fiftyone.operators.operator.Operator.resolve_delegation"><code>resolve_delegation()</code></a>
to force a particular operation to be delegated (by returning <code>True</code>) or
executed immediately (by returning <code>False</code>) based on the current execution
context.</p>
<p>For example, you could decide whether to delegate execution based on the size
of the current view:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><span class="k">def</span><span class="w"> </span><span class="nf">resolve_delegation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-16-2">    <span class="c1"># Force delegation for large views and immediate execution for small views</span>
</span><span id="__span-16-3">    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1000</span>
</span></code></pre></div>
<p>If <a href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_delegation" title="fiftyone.operators.operator.Operator.resolve_delegation"><code>resolve_delegation()</code></a>
is not implemented or returns <code>None</code>, then the choice of execution mode is
deferred to the prior mechanisms described above.</p>
<h4 id="reporting-progress">Reporting progress <a href="#reporting-progress" title="Permalink to this headline">¶</a><a class="headerlink" href="#reporting-progress" title="Permanent link">&para;</a></h4>
<p>Delegated operations can report their execution progress by calling
<code>set_progress()</code>
on their execution context from within
<a href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.execute" title="fiftyone.operators.operator.Operator.execute"><code>execute()</code></a>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">fo</span>
</span><span id="__span-17-2"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.core.storage</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">fos</span>
</span><span id="__span-17-3"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.core.utils</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">fou</span>
</span><span id="__span-17-4">
</span><span id="__span-17-5"><span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-17-6">    <span class="n">images_dir</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;images_dir&quot;</span><span class="p">]</span>
</span><span id="__span-17-7">
</span><span id="__span-17-8">    <span class="n">filepaths</span> <span class="o">=</span> <span class="n">fos</span><span class="o">.</span><span class="n">list_files</span><span class="p">(</span><span class="n">images_dir</span><span class="p">,</span> <span class="n">abs_paths</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-17-9">
</span><span id="__span-17-10">    <span class="n">num_added</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-17-11">    <span class="n">num_total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">filepaths</span><span class="p">)</span>
</span><span id="__span-17-12">    <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">fou</span><span class="o">.</span><span class="n">iter_batches</span><span class="p">(</span><span class="n">filepaths</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
</span><span id="__span-17-13">        <span class="n">samples</span> <span class="o">=</span> <span class="p">[</span><span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">batch</span><span class="p">]</span>
</span><span id="__span-17-14">        <span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">add_samples</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span>
</span><span id="__span-17-15">
</span><span id="__span-17-16">        <span class="n">num_added</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
</span><span id="__span-17-17">        <span class="n">ctx</span><span class="o">.</span><span class="n">set_progress</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">num_added</span> <span class="o">/</span> <span class="n">num_total</span><span class="p">)</span>
</span></code></pre></div>
<p>Note</p>
<p><a href="../teams/index.html#fiftyone-teams">FiftyOne Teams</a> users can view the current progress
of their delegated operations from the
<a href="../teams/teams_plugins.html#teams-managing-delegated-operations">Runs page</a> of the Teams App!</p>
<p>For your convenience, all builtin methods of the FiftyOne SDK that support
rendering progress bars provide an optional <code>progress</code> method that you can use
trigger calls to
<code>set_progress()</code>
using the pattern show below:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-18-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">fo</span>
</span><span id="__span-18-2">
</span><span id="__span-18-3"><span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-18-4">    <span class="n">images_dir</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;images_dir&quot;</span><span class="p">]</span>
</span><span id="__span-18-5">
</span><span id="__span-18-6">    <span class="c1"># Custom logic that controls how progress is reported</span>
</span><span id="__span-18-7">    <span class="k">def</span><span class="w"> </span><span class="nf">set_progress</span><span class="p">(</span><span class="n">pb</span><span class="p">):</span>
</span><span id="__span-18-8">        <span class="k">if</span> <span class="n">pb</span><span class="o">.</span><span class="n">complete</span><span class="p">:</span>
</span><span id="__span-18-9">            <span class="n">ctx</span><span class="o">.</span><span class="n">set_progress</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Operation complete&quot;</span><span class="p">)</span>
</span><span id="__span-18-10">        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-18-11">            <span class="n">ctx</span><span class="o">.</span><span class="n">set_progress</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">pb</span><span class="o">.</span><span class="n">progress</span><span class="p">)</span>
</span><span id="__span-18-12">
</span><span id="__span-18-13">    <span class="c1"># Option 1: report progress every five seconds</span>
</span><span id="__span-18-14">    <span class="n">progress</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">report_progress</span><span class="p">(</span><span class="n">set_progress</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mf">5.0</span><span class="p">)</span>
</span><span id="__span-18-15">
</span><span id="__span-18-16">    <span class="c1"># Option 2: report progress at 10 equally-spaced increments</span>
</span><span id="__span-18-17">    <span class="c1"># progress = fo.report_progress(set_progress, n=10)</span>
</span><span id="__span-18-18">
</span><span id="__span-18-19">    <span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">add_images_dir</span><span class="p">(</span><span class="n">images_dir</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="n">progress</span><span class="p">)</span>
</span></code></pre></div>
<p>You can also use the builtin
<code>ProgressHandler</code> class to
automatically forward logging messages to
<code>set_progress()</code>
as <code>label</code> values using the pattern shown below:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
</span><span id="__span-19-2"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.operators</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">foo</span>
</span><span id="__span-19-3"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.zoo</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">foz</span>
</span><span id="__span-19-4">
</span><span id="__span-19-5"><span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-19-6">    <span class="n">name</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
</span><span id="__span-19-7">
</span><span id="__span-19-8">    <span class="c1"># Automatically report all `fiftyone` logging messages</span>
</span><span id="__span-19-9">    <span class="k">with</span> <span class="n">foo</span><span class="o">.</span><span class="n">ProgressHandler</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;fiftyone&quot;</span><span class="p">)):</span>
</span><span id="__span-19-10">        <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">persistent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="operator-execution">Operator execution <a href="#operator-execution" title="Permalink to this headline">¶</a><a class="headerlink" href="#operator-execution" title="Permanent link">&para;</a></h3>
<p>All operators must implement
<a href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.execute" title="fiftyone.operators.operator.Operator.execute"><code>execute()</code></a>, which is
where their main actions are performed.</p>
<p>The <a href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.execute" title="fiftyone.operators.operator.Operator.execute"><code>execute()</code></a> method
takes an <a href="#operator-execution-context">execution context</a> as input whose
<code>ctx.params</code> dict has been hydrated with parameters provided either by the
user by filling out the operator’s <a href="#operator-inputs">input form</a> or
directly provided by the operation that triggered it. The method can optionally
return a dict of results values that will be made available via <code>ctx.results</code>
when the operator’s <a href="#operator-outputs">output form</a> is rendered.</p>
<h4 id="synchronous-execution">Synchronous execution <a href="#synchronous-execution" title="Permalink to this headline">¶</a><a class="headerlink" href="#synchronous-execution" title="Permanent link">&para;</a></h4>
<p>Your execution method is free to make use of the full power of the FiftyOne SDK
and any external dependencies that it needs.</p>
<p>For example, you might perform inference on a model:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.zoo</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">foz</span>
</span><span id="__span-20-2">
</span><span id="__span-20-3"><span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-20-4">    <span class="n">name</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
</span><span id="__span-20-5">    <span class="n">label_field</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;label_field&quot;</span><span class="p">]</span>
</span><span id="__span-20-6">    <span class="n">confidence_thresh</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;confidence_thresh&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="__span-20-7">
</span><span id="__span-20-8">    <span class="n">model</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_model</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-20-9">    <span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">apply_model</span><span class="p">(</span>
</span><span id="__span-20-10">        <span class="n">model</span><span class="p">,</span> <span class="n">label_field</span><span class="o">=</span><span class="n">label_field</span><span class="p">,</span> <span class="n">confidence_thresh</span><span class="o">=</span><span class="n">confidence_thresh</span>
</span><span id="__span-20-11">    <span class="p">)</span>
</span><span id="__span-20-12">
</span><span id="__span-20-13">    <span class="n">num_predictions</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">label_field</span><span class="si">}</span><span class="s2">.detections&quot;</span><span class="p">)</span>
</span><span id="__span-20-14">    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;num_predictions&quot;</span><span class="p">:</span> <span class="n">num_predictions</span><span class="p">}</span>
</span></code></pre></div>
<p>Note</p>
<p>When an operator’s
<a href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.execute" title="fiftyone.operators.operator.Operator.execute"><code>execute()</code></a> method
throws an error it will be displayed to the user in the browser.</p>
<h4 id="asynchronous-execution">Asynchronous execution <a href="#asynchronous-execution" title="Permalink to this headline">¶</a><a class="headerlink" href="#asynchronous-execution" title="Permanent link">&para;</a></h4>
<p>The <a href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.execute" title="fiftyone.operators.operator.Operator.execute"><code>execute()</code></a> method
can also be <code>async</code>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-21-1"><span class="kn">import</span><span class="w"> </span><span class="nn">aiohttp</span>
</span><span id="__span-21-2">
</span><span id="__span-21-3"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-21-4">    <span class="c1"># do something async</span>
</span><span id="__span-21-5">    <span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
</span><span id="__span-21-6">        <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">resp</span><span class="p">:</span>
</span><span id="__span-21-7">            <span class="n">r</span> <span class="o">=</span> <span class="k">await</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span></code></pre></div>
<h4 id="operator-composition">Operator composition <a href="#operator-composition" title="Permalink to this headline">¶</a><a class="headerlink" href="#operator-composition" title="Permanent link">&para;</a></h4>
<p>Many operators are designed to be composed with other operators to build up
more complex behaviors. You can trigger other operations from within an
operator’s <a href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.execute" title="fiftyone.operators.operator.Operator.execute"><code>execute()</code></a>
method via <a href="../api/fiftyone.operators.operations.html#fiftyone.operators.operations.Operations" title="fiftyone.operators.operations.Operations"><code>ctx.ops</code></a> and
<code>ctx.trigger</code>.</p>
<p>The <a href="../api/fiftyone.operators.operations.html#fiftyone.operators.operations.Operations" title="fiftyone.operators.operations.Operations"><code>ctx.ops</code></a> property of an
execution context exposes all builtin
<code>Python</code> and
<a href="https://github.com/voxel51/fiftyone/blob/develop/app/packages/operators/src/built-in-operators.ts">JavaScript</a>
in a conveniently documented functional interface. For example, many operations
involve updating the current state of the App:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-22-1"><span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-22-2">    <span class="c1"># Dataset</span>
</span><span id="__span-22-3">    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s2">&quot;...&quot;</span><span class="p">)</span>
</span><span id="__span-22-4">    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">reload_dataset</span><span class="p">()</span>
</span><span id="__span-22-5">
</span><span id="__span-22-6">    <span class="c1"># View/sidebar</span>
</span><span id="__span-22-7">    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">set_view</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">)</span>  <span class="c1"># saved view by name</span>
</span><span id="__span-22-8">    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">set_view</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="p">)</span>  <span class="c1"># arbitrary view</span>
</span><span id="__span-22-9">    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">clear_view</span><span class="p">()</span>
</span><span id="__span-22-10">    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">clear_sidebar_filters</span><span class="p">()</span>
</span><span id="__span-22-11">
</span><span id="__span-22-12">    <span class="c1"># Selected samples</span>
</span><span id="__span-22-13">    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">set_selected_samples</span><span class="p">([</span><span class="o">...</span><span class="p">]))</span>
</span><span id="__span-22-14">    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">clear_selected_samples</span><span class="p">()</span>
</span><span id="__span-22-15">
</span><span id="__span-22-16">    <span class="c1"># Selected labels</span>
</span><span id="__span-22-17">    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">set_selected_labels</span><span class="p">([</span><span class="o">...</span><span class="p">])</span>
</span><span id="__span-22-18">    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">clear_selected_labels</span><span class="p">()</span>
</span><span id="__span-22-19">
</span><span id="__span-22-20">    <span class="c1"># Panels</span>
</span><span id="__span-22-21">    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">open_panel</span><span class="p">(</span><span class="s2">&quot;Embeddings&quot;</span><span class="p">)</span>
</span><span id="__span-22-22">    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">close_panel</span><span class="p">(</span><span class="s2">&quot;Embeddings&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>The <code>ctx.trigger</code>
property is a lower-level function that allows you to invoke arbitrary
operations by providing their URI and parameters, including all builtin
operations as well as any operations installed via custom plugins. For example,
here’s how to trigger the same App-related operations from above:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-23-1"><span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-23-2">    <span class="c1"># Dataset</span>
</span><span id="__span-23-3">    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;open_dataset&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">))</span>
</span><span id="__span-23-4">    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;reload_dataset&quot;</span><span class="p">)</span>  <span class="c1"># refreshes the App</span>
</span><span id="__span-23-5">
</span><span id="__span-23-6">    <span class="c1"># View/sidebar</span>
</span><span id="__span-23-7">    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;set_view&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">))</span>  <span class="c1"># saved view by name</span>
</span><span id="__span-23-8">    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;set_view&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="o">.</span><span class="n">_serialize</span><span class="p">()))</span>  <span class="c1"># arbitrary view</span>
</span><span id="__span-23-9">    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;clear_view&quot;</span><span class="p">)</span>
</span><span id="__span-23-10">    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;clear_sidebar_filters&quot;</span><span class="p">)</span>
</span><span id="__span-23-11">
</span><span id="__span-23-12">    <span class="c1"># Selected samples</span>
</span><span id="__span-23-13">    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;set_selected_samples&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">samples</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">]))</span>
</span><span id="__span-23-14">    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;clear_selected_samples&quot;</span><span class="p">)</span>
</span><span id="__span-23-15">
</span><span id="__span-23-16">    <span class="c1"># Selected labels</span>
</span><span id="__span-23-17">    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;set_selected_labels&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">]))</span>
</span><span id="__span-23-18">    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;clear_selected_labels&quot;</span><span class="p">)</span>
</span><span id="__span-23-19">
</span><span id="__span-23-20">    <span class="c1"># Panels</span>
</span><span id="__span-23-21">    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;open_panel&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Embeddings&quot;</span><span class="p">))</span>
</span><span id="__span-23-22">    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;close_panel&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Embeddings&quot;</span><span class="p">))</span>
</span></code></pre></div>
<h4 id="generator-execution">Generator execution <a href="#generator-execution" title="Permalink to this headline">¶</a><a class="headerlink" href="#generator-execution" title="Permanent link">&para;</a></h4>
<p>If your <a href="#operator-config">operator’s config</a> declares that it is a
generator via <code>execute_as_generator=True</code>, then its
<a href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.execute" title="fiftyone.operators.operator.Operator.execute"><code>execute()</code></a> method should
<code>yield</code> calls to
<a href="../api/fiftyone.operators.operations.html#fiftyone.operators.operations.Operations" title="fiftyone.operators.operations.Operations"><code>ctx.ops</code></a> methods or
<code>ctx.trigger()</code>,
both of which trigger another operation and return a
<a href="../api/fiftyone.operators.message.html#fiftyone.operators.message.GeneratedMessage" title="fiftyone.operators.message.GeneratedMessage"><code>GeneratedMessage</code></a>
instance containing the result of the invocation.</p>
<p>For example, a common generator pattern is to use the builtin <code>set_progress</code>
operator to render a progress bar tracking the progress of an operation:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-24-1"><span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-24-2">    <span class="c1"># render a progress bar tracking the execution</span>
</span><span id="__span-24-3">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
</span><span id="__span-24-4">        <span class="c1"># [process a chunk here]</span>
</span><span id="__span-24-5">
</span><span id="__span-24-6">        <span class="c1"># Option 1: ctx.ops</span>
</span><span id="__span-24-7">        <span class="k">yield</span> <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">set_progress</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">i</span><span class="o">/</span><span class="n">n</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Processed </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-24-8">
</span><span id="__span-24-9">        <span class="c1"># Option 2: ctx.trigger</span>
</span><span id="__span-24-10">        <span class="k">yield</span> <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span>
</span><span id="__span-24-11">            <span class="s2">&quot;set_progress&quot;</span><span class="p">,</span>
</span><span id="__span-24-12">            <span class="nb">dict</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">i</span><span class="o">/</span><span class="n">n</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Processed </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
</span><span id="__span-24-13">        <span class="p">)</span>
</span></code></pre></div>
<p>Note</p>
<p>Check out the
<a href="https://github.com/voxel51/voxelgpt/blob/dfe23093485081fb889dbe18685587f4358a4438/__init__.py#L133">VoxelGPT plugin</a>
for a more sophisticated example of using generator execution to stream an
LLM’s response to a panel.</p>
<h3 id="accessing-secrets">Accessing secrets <a href="#accessing-secrets" title="Permalink to this headline">¶</a><a class="headerlink" href="#accessing-secrets" title="Permanent link">&para;</a></h3>
<p>Some plugins may require sensitive information such as API tokens and login
credentials in order to function. Any secrets that a plugin requires are
in its <a href="#plugin-fiftyone-yml">fiftyone.yml</a>.</p>
<p>For example, the
<a href="https://github.com/voxel51/fiftyone-plugins/blob/main/plugins/annotation/fiftyone.yml">@voxel51/annotation</a>
plugin declares the following secrets:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-25-1"><span class="n">secrets</span><span class="p">:</span>
</span><span id="__span-25-2">  <span class="o">-</span> <span class="n">FIFTYONE_CVAT_URL</span>
</span><span id="__span-25-3">  <span class="o">-</span> <span class="n">FIFTYONE_CVAT_USERNAME</span>
</span><span id="__span-25-4">  <span class="o">-</span> <span class="n">FIFTYONE_CVAT_PASSWORD</span>
</span><span id="__span-25-5">  <span class="o">-</span> <span class="n">FIFTYONE_CVAT_EMAIL</span>
</span><span id="__span-25-6">  <span class="o">-</span> <span class="n">FIFTYONE_LABELBOX_URL</span>
</span><span id="__span-25-7">  <span class="o">-</span> <span class="n">FIFTYONE_LABELBOX_API_KEY</span>
</span><span id="__span-25-8">  <span class="o">-</span> <span class="n">FIFTYONE_LABELSTUDIO_URL</span>
</span><span id="__span-25-9">  <span class="o">-</span> <span class="n">FIFTYONE_LABELSTUDIO_API_KEY</span>
</span></code></pre></div>
<p>As the naming convention implies, any necessary secrets are provided by users
by setting environment variables with the appropriate names. For example, if
you want to use the CVAT backend with the
<a href="https://github.com/voxel51/fiftyone-plugins/blob/main/plugins/annotation/fiftyone.yml">@voxel51/annotation</a>
plugin, you would set:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-26-1"><span class="n">FIFTYONE_CVAT_URL</span><span class="o">=...</span>
</span><span id="__span-26-2"><span class="n">FIFTYONE_CVAT_USERNAME</span><span class="o">=...</span>
</span><span id="__span-26-3"><span class="n">FIFTYONE_CVAT_PASSWORD</span><span class="o">=...</span>
</span><span id="__span-26-4"><span class="n">FIFTYONE_CVAT_EMAIL</span><span class="o">=...</span>
</span></code></pre></div>
<p>At runtime, the plugin’s <a href="#operator-execution-context">execution context</a>
is automatically hydrated with any available secrets that are declared by the
plugin. Operators can access these secrets via the <code>ctx.secrets</code> dict:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-27-1"><span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-27-2">   <span class="n">url</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">secrets</span><span class="p">[</span><span class="s2">&quot;FIFTYONE_CVAT_URL&quot;</span><span class="p">]</span>
</span><span id="__span-27-3">   <span class="n">username</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">secrets</span><span class="p">[</span><span class="s2">&quot;FIFTYONE_CVAT_USERNAME&quot;</span><span class="p">]</span>
</span><span id="__span-27-4">   <span class="n">password</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">secrets</span><span class="p">[</span><span class="s2">&quot;FIFTYONE_CVAT_PASSWORD&quot;</span><span class="p">]</span>
</span><span id="__span-27-5">   <span class="n">email</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">secrets</span><span class="p">[</span><span class="s2">&quot;FIFTYONE_CVAT_EMAIL&quot;</span><span class="p">]</span>
</span></code></pre></div>
<h3 id="operator-outputs">Operator outputs <a href="#operator-outputs" title="Permalink to this headline">¶</a><a class="headerlink" href="#operator-outputs" title="Permanent link">&para;</a></h3>
<p>Operators can optionally implement
<a href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_output" title="fiftyone.operators.operator.Operator.resolve_output"><code>resolve_output()</code></a>
to define read-only output forms that are presented to the user as a modal in
the App after the operator’s execution completes.</p>
<p>The basic objective of
<a href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_output" title="fiftyone.operators.operator.Operator.resolve_output"><code>resolve_output()</code></a>
is to define properties that describe how to render the values in <code>ctx.results</code>
for the user. As with input forms, you can use the
<a href="../api/fiftyone.operators.types.html#module-fiftyone.operators.types" title="fiftyone.operators.types"><code>fiftyone.operators.types</code></a> module to define the output properties.</p>
<p>For example, the output form below renders the number of samples ( <code>count</code>)
computed during the operator’s <a href="#operator-execution">execution</a>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-28-1"><span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-28-2">    <span class="c1"># computation here...</span>
</span><span id="__span-28-3">
</span><span id="__span-28-4">    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="n">count</span><span class="p">}</span>
</span><span id="__span-28-5">
</span><span id="__span-28-6"><span class="k">def</span><span class="w"> </span><span class="nf">resolve_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-28-7">    <span class="n">outputs</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
</span><span id="__span-28-8">    <span class="n">outputs</span><span class="o">.</span><span class="n">int</span><span class="p">(</span>
</span><span id="__span-28-9">        <span class="s2">&quot;count&quot;</span><span class="p">,</span>
</span><span id="__span-28-10">        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Count&quot;</span><span class="p">,</span>
</span><span id="__span-28-11">        <span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;The number of samples in the current </span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-28-12">    <span class="p">)</span>
</span><span id="__span-28-13">    <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span>
</span></code></pre></div>
<p>Note</p>
<p>All properties in output forms are implicitly rendered as read-only.</p>
<h3 id="operator-placement">Operator placement <a href="#operator-placement" title="Permalink to this headline">¶</a><a class="headerlink" href="#operator-placement" title="Permanent link">&para;</a></h3>
<p>By default, operators are only accessible from the
<a href="using_plugins.html#using-operators">operator browser</a>. However, you can place a custom
button, icon, menu item, etc. in the App that will trigger the operator when
clicked in any location supported by the
<a href="../api/fiftyone.operators.types.html#fiftyone.operators.types.Places" title="fiftyone.operators.types.Places"><code>types.Places</code></a> enum.</p>
<p>For example, you can use:</p>
<ul>
<li><code>types.Places.SAMPLES_GRID_ACTIONS</code>
<img alt="../_images/samples_grid_actions.png" src="../../_images/samples_grid_actions.png" /></li>
<li><code>types.Places.SAMPLES_GRID_SECONDARY_ACTIONS</code>
<img alt="../_images/samples_grid_secondary_actions.png" src="../../_images/samples_grid_secondary_actions.png" /></li>
<li><code>types.Places.SAMPLES_VIEWER_ACTIONS</code>
<img alt="../_images/samples_viewer_actions.png" src="../../_images/samples_viewer_actions.png" /></li>
<li><code>types.Places.EMBEDDINGS_ACTIONS</code>
<img alt="../_images/embeddings_actions.png" src="../../_images/embeddings_actions.png" /></li>
<li><code>types.Places.HISTOGRAM_ACTIONS</code>
<img alt="../_images/histograms_actions.png" src="../../_images/histograms_actions.png" /></li>
<li><code>types.Places.MAP_ACTIONS</code>
<img alt="../_images/map_actions.png" src="../../_images/map_actions.png" /></li>
</ul>
<p>You can add a placement for an operator by implementing the
<a href="../api/fiftyone.operators.operator.html#fiftyone.operators.operator.Operator.resolve_placement" title="fiftyone.operators.operator.Operator.resolve_placement"><code>resolve_placement()</code></a>
method as demonstrated below:</p>
<h2 id="developing-panels">Developing panels <a href="#developing-panels" title="Permalink to this headline">¶</a><a class="headerlink" href="#developing-panels" title="Permanent link">&para;</a></h2>
<p>Panels are miniature full-featured data applications that you can open in
<a href="../fiftyone_concepts/app.html#app-spaces">App spaces</a> and interactively manipulate to explore your
dataset and update/respond to updates from other spaces that are currently open
in the App.</p>
<p>Panels can be defined in either Python or JS, and FiftyOne comes with a
number of <a href="#plugins-design-panels">builtin panels</a> for common tasks.</p>
<p>Panels can be scoped to the App’s grid view or modal view via their
<a href="#panel-config">config</a>. Grid panels enable extensibility at the macro
level, allowing you to work with entire datasets or views, while modal panels
provide extensibility at the micro level, focusing on individual samples and
scenarios.</p>
<p>Panels, like <a href="#developing-operators">operators</a>, can make use of the
<a href="../api/fiftyone.operators.types.html#module-fiftyone.operators.types" title="fiftyone.operators.types"><code>fiftyone.operators.types</code></a> module and the
<a href="api/plugins.fiftyone.operators.html#module-fiftyone-operators" title="@fiftyone/operators"><code>@fiftyone/operators</code></a> package, which define a
rich builtin type system that panel developers can use to implement the layout
and associated events that define the panel.</p>
<p>Panels can trigger both Python and JS operators, either programmatically or
by interactively launching a prompt that users can fill out to provide the
necessary parameters for the operator’s execution. This powerful composability
allows panels to define interactive workflows that guide the user through
executing workflows on their data and then interactively exploring and
analyzing the results of the computation.</p>
<p>Panels can also interact with other components of the App, such as responding
to changes in (or programmatically updating) the current dataset, view, current
selection, or active sample in the modal.</p>
<h3 id="panel-interface">Panel interface <a href="#panel-interface" title="Permalink to this headline">¶</a><a class="headerlink" href="#panel-interface" title="Permanent link">&para;</a></h3>
<p>The code block below describes the Python interface for defining panels.
We’ll dive into each component of the interface in more detail in the
subsequent sections.</p>
<p>Note</p>
<p>See <a href="#developing-js-plugins">this section</a> for more information on
developing panels in JS.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-29-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.operators</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">foo</span>
</span><span id="__span-29-2"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.operators.types</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">types</span>
</span><span id="__span-29-3">
</span><span id="__span-29-4"><span class="k">class</span><span class="w"> </span><span class="nc">ExamplePanel</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">Panel</span><span class="p">):</span>
</span><span id="__span-29-5">    <span class="nd">@property</span>
</span><span id="__span-29-6">    <span class="k">def</span><span class="w"> </span><span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-29-7">        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">PanelConfig</span><span class="p">(</span>
</span><span id="__span-29-8">            <span class="c1"># The panel&#39;s URI: f&quot;{plugin_name}/{name}&quot;</span>
</span><span id="__span-29-9">            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;example_panel&quot;</span><span class="p">,</span>  <span class="c1"># required</span>
</span><span id="__span-29-10">
</span><span id="__span-29-11">            <span class="c1"># The display name of the panel in the &quot;+&quot; menu</span>
</span><span id="__span-29-12">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Example panel&quot;</span><span class="p">,</span>  <span class="c1"># required</span>
</span><span id="__span-29-13">
</span><span id="__span-29-14">            <span class="c1"># Custom icons to use in the &quot;+&quot;&quot; menu</span>
</span><span id="__span-29-15">            <span class="c1"># Can be a URL, a local path in the plugin directory, or the</span>
</span><span id="__span-29-16">            <span class="c1"># name of a MUI icon: https://marella.me/material-icons/demo</span>
</span><span id="__span-29-17">            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon.svg&quot;</span><span class="p">,</span>
</span><span id="__span-29-18">            <span class="n">light_icon</span><span class="o">=</span><span class="s2">&quot;developer_mode&quot;</span><span class="p">,</span>  <span class="c1"># light theme only</span>
</span><span id="__span-29-19">            <span class="n">dark_icon</span><span class="o">=</span><span class="s2">&quot;developer_mode&quot;</span><span class="p">,</span>  <span class="c1"># dark theme only</span>
</span><span id="__span-29-20">
</span><span id="__span-29-21">            <span class="c1"># Whether to allow multiple instances of the panel to be opened</span>
</span><span id="__span-29-22">            <span class="n">allow_multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="__span-29-23">
</span><span id="__span-29-24">            <span class="c1"># Whether the panel should be available in the grid, modal, or both</span>
</span><span id="__span-29-25">            <span class="c1"># Possible values: &quot;grid&quot;, &quot;modal&quot;, &quot;grid modal&quot;</span>
</span><span id="__span-29-26">            <span class="n">surfaces</span><span class="o">=</span><span class="s2">&quot;grid&quot;</span><span class="p">,</span>  <span class="c1"># default = &quot;grid&quot;</span>
</span><span id="__span-29-27">
</span><span id="__span-29-28">            <span class="c1"># Markdown-formatted text that describes the panel. This is</span>
</span><span id="__span-29-29">            <span class="c1"># rendererd in a tooltip when the help icon in the panel</span>
</span><span id="__span-29-30">            <span class="c1"># title is hovered over</span>
</span><span id="__span-29-31">            <span class="n">help_markdown</span><span class="o">=</span><span class="s2">&quot;A description of the panel&quot;</span><span class="p">,</span>
</span><span id="__span-29-32">        <span class="p">)</span>
</span><span id="__span-29-33">
</span><span id="__span-29-34">    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-29-35"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to define your panel&#39;s layout and events.</span>
</span><span id="__span-29-36">
</span><span id="__span-29-37"><span class="sd">        This method is called after every panel event is executed (panel</span>
</span><span id="__span-29-38"><span class="sd">        load, button callback, context change event, etc).</span>
</span><span id="__span-29-39">
</span><span id="__span-29-40"><span class="sd">        Returns:</span>
</span><span id="__span-29-41"><span class="sd">            a `types.Property` defining the panel&#39;s components</span>
</span><span id="__span-29-42"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-29-43">        <span class="n">panel</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
</span><span id="__span-29-44">
</span><span id="__span-29-45">        <span class="n">brain_keys</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="s2">&quot;brain_keys&quot;</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="__span-29-46">
</span><span id="__span-29-47">        <span class="c1"># Define a menu of actions for the panel</span>
</span><span id="__span-29-48">        <span class="n">menu</span> <span class="o">=</span> <span class="n">panel</span><span class="o">.</span><span class="n">menu</span><span class="p">(</span><span class="s2">&quot;menu&quot;</span><span class="p">,</span> <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;51&quot;</span><span class="p">)</span>
</span><span id="__span-29-49">        <span class="n">menu</span><span class="o">.</span><span class="n">enum</span><span class="p">(</span>
</span><span id="__span-29-50">            <span class="s2">&quot;brain_key&quot;</span><span class="p">,</span>
</span><span id="__span-29-51">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Choose a brain key&quot;</span><span class="p">,</span>  <span class="c1"># placeholder text</span>
</span><span id="__span-29-52">            <span class="n">values</span><span class="o">=</span><span class="n">brain_keys</span><span class="p">,</span>
</span><span id="__span-29-53">            <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_change_brain_key</span><span class="p">,</span>  <span class="c1"># custom event callback</span>
</span><span id="__span-29-54">        <span class="p">)</span>
</span><span id="__span-29-55">        <span class="n">menu</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
</span><span id="__span-29-56">            <span class="s2">&quot;learn_more&quot;</span><span class="p">,</span>
</span><span id="__span-29-57">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Learn more&quot;</span><span class="p">,</span>  <span class="c1"># tooltip text</span>
</span><span id="__span-29-58">            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;help&quot;</span><span class="p">,</span>  <span class="c1"># material UI icon</span>
</span><span id="__span-29-59">            <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_click_learn_more</span><span class="p">,</span>  <span class="c1"># custom event callback</span>
</span><span id="__span-29-60">        <span class="p">)</span>
</span><span id="__span-29-61">
</span><span id="__span-29-62">        <span class="c1"># Define components that appear in the panel&#39;s main body</span>
</span><span id="__span-29-63">        <span class="n">panel</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;The last event&quot;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">LabelValueView</span><span class="p">())</span>
</span><span id="__span-29-64">        <span class="n">panel</span><span class="o">.</span><span class="n">obj</span><span class="p">(</span>
</span><span id="__span-29-65">            <span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;The last event data&quot;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">JSONView</span><span class="p">()</span>
</span><span id="__span-29-66">        <span class="p">)</span>
</span><span id="__span-29-67">
</span><span id="__span-29-68">        <span class="c1"># Display a checkbox to toggle between plot and compute visualization button</span>
</span><span id="__span-29-69">        <span class="n">show_compute_visualization_btn</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span>
</span><span id="__span-29-70">            <span class="s2">&quot;show_start_button&quot;</span><span class="p">,</span> <span class="kc">True</span>
</span><span id="__span-29-71">        <span class="p">)</span>
</span><span id="__span-29-72">        <span class="n">panel</span><span class="o">.</span><span class="n">bool</span><span class="p">(</span>
</span><span id="__span-29-73">            <span class="s2">&quot;show_start_button&quot;</span><span class="p">,</span>
</span><span id="__span-29-74">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Show compute visualization button&quot;</span><span class="p">,</span>
</span><span id="__span-29-75">            <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_change_show_start_button</span><span class="p">,</span>
</span><span id="__span-29-76">        <span class="p">)</span>
</span><span id="__span-29-77">
</span><span id="__span-29-78">        <span class="c1"># You can use conditional logic to dynamically change the layout</span>
</span><span id="__span-29-79">        <span class="c1"># based on the current panel state</span>
</span><span id="__span-29-80">        <span class="k">if</span> <span class="n">show_compute_visualization_btn</span><span class="p">:</span>
</span><span id="__span-29-81">            <span class="c1"># Define a button with a custom on click event</span>
</span><span id="__span-29-82">            <span class="n">panel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
</span><span id="__span-29-83">                <span class="s2">&quot;start&quot;</span><span class="p">,</span>
</span><span id="__span-29-84">                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Compute visualization&quot;</span><span class="p">,</span>  <span class="c1"># button text</span>
</span><span id="__span-29-85">                <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_click_start</span><span class="p">,</span>  <span class="c1"># custom event callback</span>
</span><span id="__span-29-86">                <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span><span class="p">,</span>  <span class="c1"># button style</span>
</span><span id="__span-29-87">            <span class="p">)</span>
</span><span id="__span-29-88">        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-29-89">            <span class="c1"># Define an interactive plot with custom callbacks</span>
</span><span id="__span-29-90">            <span class="n">panel</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="__span-29-91">                <span class="s2">&quot;embeddings&quot;</span><span class="p">,</span>
</span><span id="__span-29-92">                <span class="n">config</span><span class="o">=</span><span class="p">{},</span>  <span class="c1"># plotly config</span>
</span><span id="__span-29-93">                <span class="n">layout</span><span class="o">=</span><span class="p">{},</span>  <span class="c1"># plotly layout config</span>
</span><span id="__span-29-94">                <span class="n">on_selected</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_selected_embeddings</span><span class="p">,</span>  <span class="c1"># custom event callback</span>
</span><span id="__span-29-95">                <span class="n">height</span><span class="o">=</span><span class="s2">&quot;400px&quot;</span><span class="p">,</span>
</span><span id="__span-29-96">            <span class="p">)</span>
</span><span id="__span-29-97">
</span><span id="__span-29-98">        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span>
</span><span id="__span-29-99">            <span class="n">panel</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GridView</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span><span class="p">)</span>
</span><span id="__span-29-100">        <span class="p">)</span>
</span><span id="__span-29-101">
</span><span id="__span-29-102">    <span class="c1">#######################################################################</span>
</span><span id="__span-29-103">    <span class="c1"># Builtin events</span>
</span><span id="__span-29-104">    <span class="c1">#######################################################################</span>
</span><span id="__span-29-105">
</span><span id="__span-29-106">    <span class="k">def</span><span class="w"> </span><span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-29-107"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when the panel</span>
</span><span id="__span-29-108"><span class="sd">        initially loads.</span>
</span><span id="__span-29-109"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-29-110">        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-29-111">            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-29-112">            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the panel is loaded&quot;</span><span class="p">,</span>
</span><span id="__span-29-113">        <span class="p">}</span>
</span><span id="__span-29-114">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_load&quot;</span><span class="p">)</span>
</span><span id="__span-29-115">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="__span-29-116">
</span><span id="__span-29-117">        <span class="c1"># Get the list of brain keys to populate `brain_key` dropdown</span>
</span><span id="__span-29-118">        <span class="n">visualization_keys</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">list_brain_runs</span><span class="p">(</span><span class="s2">&quot;visualization&quot;</span><span class="p">)</span>
</span><span id="__span-29-119">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;brain_keys&quot;</span><span class="p">,</span> <span class="n">visualization_keys</span><span class="p">)</span>
</span><span id="__span-29-120">
</span><span id="__span-29-121">        <span class="c1"># Show compute visualization button by default</span>
</span><span id="__span-29-122">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;show_start_button&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="__span-29-123">
</span><span id="__span-29-124">    <span class="k">def</span><span class="w"> </span><span class="nf">on_unload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-29-125"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when the panel is</span>
</span><span id="__span-29-126"><span class="sd">        being closed.</span>
</span><span id="__span-29-127"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-29-128">        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-29-129">            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-29-130">            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the panel is unloaded&quot;</span><span class="p">,</span>
</span><span id="__span-29-131">        <span class="p">}</span>
</span><span id="__span-29-132">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_unload&quot;</span><span class="p">)</span>
</span><span id="__span-29-133">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="__span-29-134">
</span><span id="__span-29-135">    <span class="k">def</span><span class="w"> </span><span class="nf">on_change_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-29-136"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when any aspect</span>
</span><span id="__span-29-137"><span class="sd">        of the execution context (view, selected samples, filters, etc.) changes.</span>
</span><span id="__span-29-138">
</span><span id="__span-29-139"><span class="sd">        The current execution context will be available via ``ctx``.</span>
</span><span id="__span-29-140"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-29-141">        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-29-142">            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-29-143">                <span class="s2">&quot;view&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">_serialize</span><span class="p">(),</span>
</span><span id="__span-29-144">                <span class="s2">&quot;selected&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">selected</span><span class="p">,</span>
</span><span id="__span-29-145">                <span class="s2">&quot;has_custom_view&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">has_custom_view</span><span class="p">,</span>
</span><span id="__span-29-146">            <span class="p">},</span>
</span><span id="__span-29-147">            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the current ExecutionContext&quot;</span><span class="p">,</span>
</span><span id="__span-29-148">        <span class="p">}</span>
</span><span id="__span-29-149">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_change_ctx&quot;</span><span class="p">)</span>
</span><span id="__span-29-150">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="__span-29-151">
</span><span id="__span-29-152">    <span class="k">def</span><span class="w"> </span><span class="nf">on_change_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-29-153"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when the current</span>
</span><span id="__span-29-154"><span class="sd">        dataset is changed.</span>
</span><span id="__span-29-155">
</span><span id="__span-29-156"><span class="sd">        The new dataset will be available via ``ctx.dataset``.</span>
</span><span id="__span-29-157"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-29-158">        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-29-159">            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="__span-29-160">            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the current dataset name&quot;</span><span class="p">,</span>
</span><span id="__span-29-161">        <span class="p">}</span>
</span><span id="__span-29-162">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_change_dataset&quot;</span><span class="p">)</span>
</span><span id="__span-29-163">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="__span-29-164">
</span><span id="__span-29-165">    <span class="k">def</span><span class="w"> </span><span class="nf">on_change_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-29-166"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when the current</span>
</span><span id="__span-29-167"><span class="sd">        view is changed.</span>
</span><span id="__span-29-168">
</span><span id="__span-29-169"><span class="sd">        The new view will be available via ``ctx.view``.</span>
</span><span id="__span-29-170"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-29-171">        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-29-172">            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">_serialize</span><span class="p">(),</span>
</span><span id="__span-29-173">            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the current view&quot;</span><span class="p">,</span>
</span><span id="__span-29-174">        <span class="p">}</span>
</span><span id="__span-29-175">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_change_view&quot;</span><span class="p">)</span>
</span><span id="__span-29-176">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="__span-29-177">
</span><span id="__span-29-178">    <span class="k">def</span><span class="w"> </span><span class="nf">on_change_spaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-29-179"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when the current</span>
</span><span id="__span-29-180"><span class="sd">        spaces layout changes.</span>
</span><span id="__span-29-181">
</span><span id="__span-29-182"><span class="sd">        The current spaces layout will be available via ``ctx.spaces``.</span>
</span><span id="__span-29-183"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-29-184">        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-29-185">            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">spaces</span><span class="p">,</span>
</span><span id="__span-29-186">            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the current spaces layout&quot;</span><span class="p">,</span>
</span><span id="__span-29-187">        <span class="p">}</span>
</span><span id="__span-29-188">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_change_spaces&quot;</span><span class="p">)</span>
</span><span id="__span-29-189">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="__span-29-190">
</span><span id="__span-29-191">    <span class="k">def</span><span class="w"> </span><span class="nf">on_change_current_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-29-192"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when a new sample</span>
</span><span id="__span-29-193"><span class="sd">        is loaded in the Sample modal.</span>
</span><span id="__span-29-194">
</span><span id="__span-29-195"><span class="sd">        The ID of the new sample will be available via</span>
</span><span id="__span-29-196"><span class="sd">        ``ctx.current_sample``.</span>
</span><span id="__span-29-197"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-29-198">        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-29-199">            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">current_sample</span><span class="p">,</span>
</span><span id="__span-29-200">            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the current sample&quot;</span><span class="p">,</span>
</span><span id="__span-29-201">        <span class="p">}</span>
</span><span id="__span-29-202">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_change_current_sample&quot;</span><span class="p">)</span>
</span><span id="__span-29-203">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="__span-29-204">
</span><span id="__span-29-205">    <span class="k">def</span><span class="w"> </span><span class="nf">on_change_selected</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-29-206"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when the current</span>
</span><span id="__span-29-207"><span class="sd">        selection changes (eg in the Samples panel).</span>
</span><span id="__span-29-208">
</span><span id="__span-29-209"><span class="sd">        The IDs of the current selected samples will be available via</span>
</span><span id="__span-29-210"><span class="sd">        ``ctx.selected``.</span>
</span><span id="__span-29-211"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-29-212">        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-29-213">            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">selected</span><span class="p">,</span>
</span><span id="__span-29-214">            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the current selection&quot;</span><span class="p">,</span>
</span><span id="__span-29-215">        <span class="p">}</span>
</span><span id="__span-29-216">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_change_selected&quot;</span><span class="p">)</span>
</span><span id="__span-29-217">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="__span-29-218">
</span><span id="__span-29-219">    <span class="k">def</span><span class="w"> </span><span class="nf">on_change_selected_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-29-220"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when the current</span>
</span><span id="__span-29-221"><span class="sd">        selected labels change (eg in the Sample modal).</span>
</span><span id="__span-29-222">
</span><span id="__span-29-223"><span class="sd">        Information about the current selected labels will be available</span>
</span><span id="__span-29-224"><span class="sd">        via ``ctx.selected_labels``.</span>
</span><span id="__span-29-225"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-29-226">        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-29-227">            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">selected_labels</span><span class="p">,</span>
</span><span id="__span-29-228">            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the current selected labels&quot;</span><span class="p">,</span>
</span><span id="__span-29-229">        <span class="p">}</span>
</span><span id="__span-29-230">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_change_selected_labels&quot;</span><span class="p">)</span>
</span><span id="__span-29-231">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="__span-29-232">
</span><span id="__span-29-233">    <span class="k">def</span><span class="w"> </span><span class="nf">on_change_extended_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-29-234"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when the current</span>
</span><span id="__span-29-235"><span class="sd">        extended selection changes.</span>
</span><span id="__span-29-236">
</span><span id="__span-29-237"><span class="sd">        The IDs of the current extended selection will be available via</span>
</span><span id="__span-29-238"><span class="sd">        ``ctx.extended_selection``.</span>
</span><span id="__span-29-239"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-29-240">        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-29-241">            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">extended_selection</span><span class="p">,</span>
</span><span id="__span-29-242">            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the current extended selection&quot;</span><span class="p">,</span>
</span><span id="__span-29-243">        <span class="p">}</span>
</span><span id="__span-29-244">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_change_extended_selection&quot;</span><span class="p">)</span>
</span><span id="__span-29-245">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="__span-29-246">
</span><span id="__span-29-247">    <span class="k">def</span><span class="w"> </span><span class="nf">on_change_group_slice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-29-248"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Implement this method to set panel state/data when the current</span>
</span><span id="__span-29-249"><span class="sd">        group slice changes.</span>
</span><span id="__span-29-250">
</span><span id="__span-29-251"><span class="sd">        The current group slice will be available via ``ctx.group_slice``.</span>
</span><span id="__span-29-252"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-29-253">        <span class="n">event</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-29-254">            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">group_slice</span><span class="p">,</span>
</span><span id="__span-29-255">            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the current group slice&quot;</span><span class="p">,</span>
</span><span id="__span-29-256">        <span class="p">}</span>
</span><span id="__span-29-257">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;on_change_group_slice&quot;</span><span class="p">)</span>
</span><span id="__span-29-258">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;event_data&quot;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="__span-29-259">
</span><span id="__span-29-260">    <span class="c1">#######################################################################</span>
</span><span id="__span-29-261">    <span class="c1"># Custom events</span>
</span><span id="__span-29-262">    <span class="c1"># These events are defined by user code above and, just like builtin</span>
</span><span id="__span-29-263">    <span class="c1"># events, take `ctx` as input and are followed by a call to render()</span>
</span><span id="__span-29-264">    <span class="c1">#######################################################################</span>
</span><span id="__span-29-265">
</span><span id="__span-29-266">    <span class="k">def</span><span class="w"> </span><span class="nf">on_change_brain_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-29-267">        <span class="c1"># Load expensive content based on current `brain_key`</span>
</span><span id="__span-29-268">        <span class="n">brain_key</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="s2">&quot;menu.brain_key&quot;</span><span class="p">)</span>
</span><span id="__span-29-269">        <span class="n">results</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">load_brain_results</span><span class="p">(</span><span class="n">brain_key</span><span class="p">)</span>
</span><span id="__span-29-270">
</span><span id="__span-29-271">        <span class="c1"># Format results for plotly</span>
</span><span id="__span-29-272">        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">results</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
</span><span id="__span-29-273">        <span class="n">ids</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">sample_ids</span>
</span><span id="__span-29-274">
</span><span id="__span-29-275">        <span class="n">plot_data</span> <span class="o">=</span> <span class="p">[</span>\
</span><span id="__span-29-276">            <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">y</span><span class="p">,</span> <span class="s2">&quot;ids&quot;</span><span class="p">:</span> <span class="n">ids</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;scatter&quot;</span><span class="p">,</span> <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;markers&quot;</span><span class="p">}</span>\
</span><span id="__span-29-277">        <span class="p">]</span>
</span><span id="__span-29-278">
</span><span id="__span-29-279">        <span class="c1"># Store large content as panel data for efficiency</span>
</span><span id="__span-29-280">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;embeddings&quot;</span><span class="p">,</span> <span class="n">plot_data</span><span class="p">)</span>
</span><span id="__span-29-281">
</span><span id="__span-29-282">        <span class="c1"># Show plot with embeddings data instead of the compute visualization button</span>
</span><span id="__span-29-283">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;show_start_button&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="__span-29-284">
</span><span id="__span-29-285">    <span class="k">def</span><span class="w"> </span><span class="nf">on_click_start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-29-286">        <span class="c1"># Launch an interactive prompt for user to execute an operator</span>
</span><span id="__span-29-287">        <span class="n">ctx</span><span class="o">.</span><span class="n">prompt</span><span class="p">(</span><span class="s2">&quot;@voxel51/brain/compute_visualization&quot;</span><span class="p">)</span>
</span><span id="__span-29-288">
</span><span id="__span-29-289">        <span class="c1"># Lightweight state update</span>
</span><span id="__span-29-290">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;show_start_button&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="__span-29-291">
</span><span id="__span-29-292">    <span class="k">def</span><span class="w"> </span><span class="nf">on_click_learn_more</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-29-293">        <span class="c1"># Trigger a builtin operation via `ctx.ops`</span>
</span><span id="__span-29-294">        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://docs.voxel51.com/plugins/developing_plugins.html&quot;</span>
</span><span id="__span-29-295">        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Check out </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> for more information&quot;</span><span class="p">)</span>
</span><span id="__span-29-296">
</span><span id="__span-29-297">    <span class="k">def</span><span class="w"> </span><span class="nf">on_selected_embeddings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-29-298">        <span class="c1"># Get selected points from event params</span>
</span><span id="__span-29-299">        <span class="n">selected_points</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="__span-29-300">        <span class="n">selected_sample_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">selected_points</span><span class="p">]</span>
</span><span id="__span-29-301">
</span><span id="__span-29-302">        <span class="c1"># Conditionally trigger a builtin operation via `ctx.ops`</span>
</span><span id="__span-29-303">        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">selected_sample_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-29-304">            <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">set_extended_selection</span><span class="p">(</span><span class="n">selected_sample_ids</span><span class="p">)</span>
</span><span id="__span-29-305">
</span><span id="__span-29-306">    <span class="k">def</span><span class="w"> </span><span class="nf">on_change_show_start_button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-29-307">        <span class="c1"># Get current state of the checkbox on change</span>
</span><span id="__span-29-308">        <span class="n">current_state</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="__span-29-309">
</span><span id="__span-29-310"><span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
</span><span id="__span-29-311"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Always implement this method and register() each panel that your</span>
</span><span id="__span-29-312"><span class="sd">    plugin defines.</span>
</span><span id="__span-29-313"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-29-314">    <span class="n">p</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">ExamplePanel</span><span class="p">)</span>
</span></code></pre></div>
<p><img alt="../_images/example-panel-inline.gif" src="../../_images/example-panel-inline.gif" /></p>
<p>Note</p>
<p>Remember that you must also include the panel’s name in the plugin’s
<a href="#plugin-fiftyone-yml">fiftyone.yml</a>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-30-1"><span class="n">panels</span><span class="p">:</span>
</span><span id="__span-30-2">  <span class="o">-</span> <span class="n">example_panel</span>
</span></code></pre></div>
<h3 id="panel-config">Panel config <a href="#panel-config" title="Permalink to this headline">¶</a><a class="headerlink" href="#panel-config" title="Permanent link">&para;</a></h3>
<p>Every panel must define a
<a href="../api/fiftyone.operators.panel.html#fiftyone.operators.panel.Panel.config" title="fiftyone.operators.panel.Panel.config"><code>config</code></a> property that
defines its name, display name, surfaces, and other optional metadata about its
behavior:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-31-1"><span class="nd">@property</span>
</span><span id="__span-31-2"><span class="k">def</span><span class="w"> </span><span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-31-3">    <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">PanelConfig</span><span class="p">(</span>
</span><span id="__span-31-4">        <span class="c1"># The panel&#39;s URI: f&quot;{plugin_name}/{name}&quot;</span>
</span><span id="__span-31-5">        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;example_panel&quot;</span><span class="p">,</span>  <span class="c1"># required</span>
</span><span id="__span-31-6">
</span><span id="__span-31-7">        <span class="c1"># The display name of the panel in the &quot;+&quot; menu</span>
</span><span id="__span-31-8">        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Example panel&quot;</span><span class="p">,</span>  <span class="c1"># required</span>
</span><span id="__span-31-9">
</span><span id="__span-31-10">        <span class="c1"># Custom icons to use in the &quot;+&quot;&quot; menu</span>
</span><span id="__span-31-11">        <span class="c1"># Can be a URL, a local path in the plugin directory, or the</span>
</span><span id="__span-31-12">        <span class="c1"># name of a MUI icon: https://marella.me/material-icons/demo</span>
</span><span id="__span-31-13">        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon.svg&quot;</span><span class="p">,</span>
</span><span id="__span-31-14">        <span class="n">light_icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon-light.svg&quot;</span><span class="p">,</span>  <span class="c1"># light theme only</span>
</span><span id="__span-31-15">        <span class="n">dark_icon</span><span class="o">=</span><span class="s2">&quot;/assets/icon-dark.svg&quot;</span><span class="p">,</span>  <span class="c1"># dark theme only</span>
</span><span id="__span-31-16">
</span><span id="__span-31-17">        <span class="c1"># Whether to allow multiple instances of the panel to be opened</span>
</span><span id="__span-31-18">        <span class="n">allow_multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="__span-31-19">
</span><span id="__span-31-20">        <span class="c1"># Whether the panel should be available in the grid, modal, or both</span>
</span><span id="__span-31-21">        <span class="c1"># Possible values: &quot;grid&quot;, &quot;modal&quot;, &quot;grid modal&quot;</span>
</span><span id="__span-31-22">        <span class="n">surfaces</span><span class="o">=</span><span class="s2">&quot;grid&quot;</span><span class="p">,</span>  <span class="c1"># default = &quot;grid&quot;</span>
</span><span id="__span-31-23">
</span><span id="__span-31-24">        <span class="c1"># Markdown-formatted text that describes the panel. This is</span>
</span><span id="__span-31-25">        <span class="c1"># rendererd in a tooltip when the help icon in the panel</span>
</span><span id="__span-31-26">        <span class="c1"># title is hovered over</span>
</span><span id="__span-31-27">        <span class="n">help_markdown</span><span class="o">=</span><span class="s2">&quot;A description of the panel&quot;</span><span class="p">,</span>
</span><span id="__span-31-28">    <span class="p">)</span>
</span></code></pre></div>
<p>The <code>surfaces</code> key defines the panel’s scope:</p>
<ul>
<li>
<p>Grid panels can be accessed from the <code>+</code> button in the App’s
<a href="../fiftyone_concepts/app.html#app-fields-sidebar">grid view</a>, which allows you to build macro
experiences that work with entire datasets or views</p>
</li>
<li>
<p>Modal panels can be accessed from the <code>+</code> button in the App’s
<a href="../fiftyone_concepts/app.html#app-sample-view">modal view</a>, which allows you to build interactions
that focus on individual samples and scenarios</p>
</li>
</ul>
<p>Note</p>
<p>For an example of a modal panel, refer to the
<a href="https://github.com/voxel51/fiftyone-plugins/tree/main/plugins/label_count">label count panel</a>.</p>
<h3 id="execution-context_1">Execution context <a href="#panel-execution-context" title="Permalink to this headline">¶</a><a class="headerlink" href="#execution-context_1" title="Permanent link">&para;</a></h3>
<p>An <code>ExecutionContext</code> is
passed to each of the panel’s methods at runtime. This <code>ctx</code> contains static
information about the current state of the App (dataset, view, panel,
selection, etc) as well as dynamic information about the panel’s current
state and data.</p>
<p>See <a href="#operator-execution-context">this section</a> for a full description
of the execution context.</p>
<h3 id="panel-state-and-data">Panel state and data <a href="#panel-state-and-data" title="Permalink to this headline">¶</a><a class="headerlink" href="#panel-state-and-data" title="Permanent link">&para;</a></h3>
<p>Panels provide two mechanisms for persisting information:
<a href="#panel-state">panel state</a> and <a href="#panel-data">panel data</a>.</p>
<h4 id="basic-structure">Basic structure <a href="#basic-structure" title="Permalink to this headline">¶</a><a class="headerlink" href="#basic-structure" title="Permanent link">&para;</a></h4>
<p>Panel state can be accessed and updated via <code>ctx.panel.state</code>, and panel data
can be updated (but not accessed) via <code>ctx.panel.data</code>.</p>
<p>Under the hood, panel state and data is merged into a single nested object that
maps 1-1 to the structure and naming of the properties defined by the panel’s
<a href="../api/fiftyone.operators.panel.html#fiftyone.operators.panel.Panel.render" title="fiftyone.operators.panel.Panel.render"><code>render()</code></a> method.</p>
<p>The example code below shows how to access and update panel state.</p>
<p>Note</p>
<p>Since panel state and panel data are merged into a single object, it is
important to avoid naming conflicts between state and data keys. If a key
is present in both panel state and data, the value in <em>panel data</em> will be
used.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-32-1"><span class="k">class</span><span class="w"> </span><span class="nc">CounterPanel</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">Panel</span><span class="p">):</span>
</span><span id="__span-32-2">    <span class="nd">@property</span>
</span><span id="__span-32-3">    <span class="k">def</span><span class="w"> </span><span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-32-4">        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">PanelConfig</span><span class="p">(</span>
</span><span id="__span-32-5">            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;counter_panel&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Counter Panel&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;123&quot;</span>
</span><span id="__span-32-6">        <span class="p">)</span>
</span><span id="__span-32-7">
</span><span id="__span-32-8">    <span class="k">def</span><span class="w"> </span><span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-32-9">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">v_stack</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;h_stack&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}}</span>
</span><span id="__span-32-10">
</span><span id="__span-32-11">    <span class="k">def</span><span class="w"> </span><span class="nf">increment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-32-12">        <span class="n">count</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;v_stack.h_stack.count&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-32-13">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;v_stack.h_stack.count&quot;</span><span class="p">,</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-32-14">
</span><span id="__span-32-15">    <span class="k">def</span><span class="w"> </span><span class="nf">decrement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-32-16">        <span class="n">count</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="s2">&quot;v_stack.h_stack.count&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-32-17">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;v_stack.h_stack.count&quot;</span><span class="p">,</span> <span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-32-18">
</span><span id="__span-32-19">    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-32-20">        <span class="n">panel</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
</span><span id="__span-32-21">
</span><span id="__span-32-22">        <span class="c1"># Define a vertical stack object with the name &#39;v_stack&#39;</span>
</span><span id="__span-32-23">        <span class="c1"># key: &#39;v_stack&#39;</span>
</span><span id="__span-32-24">        <span class="n">v_stack</span> <span class="o">=</span> <span class="n">panel</span><span class="o">.</span><span class="n">v_stack</span><span class="p">(</span><span class="s2">&quot;v_stack&quot;</span><span class="p">,</span> <span class="n">align_x</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">gap</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__span-32-25">
</span><span id="__span-32-26">        <span class="c1"># Define a horizontal stack object with the name &#39;h_stack&#39; on &#39;v_stack&#39;</span>
</span><span id="__span-32-27">        <span class="c1"># key: &#39;v_stack.h_stack&#39;</span>
</span><span id="__span-32-28">        <span class="n">h_stack</span> <span class="o">=</span> <span class="n">v_stack</span><span class="o">.</span><span class="n">h_stack</span><span class="p">(</span><span class="s2">&quot;h_stack&quot;</span><span class="p">,</span> <span class="n">align_y</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">)</span>
</span><span id="__span-32-29">
</span><span id="__span-32-30">        <span class="c1"># Get state</span>
</span><span id="__span-32-31">        <span class="n">v_stack_state</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">v_stack</span>
</span><span id="__span-32-32">        <span class="n">h_stack_state</span> <span class="o">=</span> <span class="n">v_stack_state</span><span class="p">[</span><span class="s2">&quot;h_stack&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">v_stack_state</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
</span><span id="__span-32-33">        <span class="n">count</span> <span class="o">=</span> <span class="n">h_stack_state</span><span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">h_stack_state</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="__span-32-34">
</span><span id="__span-32-35">        <span class="c1"># Add a message to the horizontal stack object with the name &#39;count&#39;</span>
</span><span id="__span-32-36">        <span class="c1"># key: &#39;v_stack.h_stack.count&#39;</span>
</span><span id="__span-32-37">        <span class="n">h_stack</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Count: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-32-38">
</span><span id="__span-32-39">        <span class="c1"># Add a button to the horizontal stack object with the name &#39;increment&#39;</span>
</span><span id="__span-32-40">        <span class="c1"># key: &#39;v_stack.h_stack.increment&#39;</span>
</span><span id="__span-32-41">        <span class="n">h_stack</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
</span><span id="__span-32-42">            <span class="s2">&quot;increment&quot;</span><span class="p">,</span>
</span><span id="__span-32-43">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Increment&quot;</span><span class="p">,</span>
</span><span id="__span-32-44">            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;add&quot;</span><span class="p">,</span>
</span><span id="__span-32-45">            <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">increment</span><span class="p">,</span>
</span><span id="__span-32-46">            <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span><span class="p">,</span>
</span><span id="__span-32-47">        <span class="p">)</span>
</span><span id="__span-32-48">
</span><span id="__span-32-49">        <span class="c1"># Add a button to the horizontal stack object with the name &#39;decrement&#39;</span>
</span><span id="__span-32-50">        <span class="c1"># key: &#39;v_stack.h_stack.count&#39;</span>
</span><span id="__span-32-51">        <span class="n">h_stack</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
</span><span id="__span-32-52">            <span class="s2">&quot;decrement&quot;</span><span class="p">,</span>
</span><span id="__span-32-53">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Decrement&quot;</span><span class="p">,</span>
</span><span id="__span-32-54">            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;remove&quot;</span><span class="p">,</span>
</span><span id="__span-32-55">            <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">decrement</span><span class="p">,</span>
</span><span id="__span-32-56">            <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span><span class="p">,</span>
</span><span id="__span-32-57">        <span class="p">)</span>
</span><span id="__span-32-58">
</span><span id="__span-32-59">        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">panel</span><span class="p">)</span>
</span></code></pre></div>
<p><img alt="../_images/counter-panel-inline.gif" src="../../_images/counter-panel-inline.gif" /></p>
<h4 id="panel-state">Panel state <a href="#panel-state" title="Permalink to this headline">¶</a><a class="headerlink" href="#panel-state" title="Permanent link">&para;</a></h4>
<p>Panel state is included in every
<a href="../api/fiftyone.operators.panel.html#fiftyone.operators.panel.Panel.render" title="fiftyone.operators.panel.Panel.render"><code>render()</code></a> call and event
callback and is analogous to <a href="#operator-inputs">operator parameters</a>:</p>
<ul>
<li>
<p>The values of any components defined in a panel’s
<a href="../api/fiftyone.operators.panel.html#fiftyone.operators.panel.Panel.render" title="fiftyone.operators.panel.Panel.render"><code>render()</code></a> method are
available via corresponding state properties of the same name</p>
</li>
<li>
<p>The current panel state is readable during a panel’s execution</p>
</li>
</ul>
<div class="language-python highlight"><pre><span></span><code><span id="__span-33-1"><span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-33-2">    <span class="n">panel</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
</span><span id="__span-33-3">
</span><span id="__span-33-4">    <span class="n">menu</span> <span class="o">=</span> <span class="n">panel</span><span class="o">.</span><span class="n">menu</span><span class="p">(</span><span class="s2">&quot;menu&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</span><span id="__span-33-5">    <span class="n">actions</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">btn_group</span><span class="p">(</span><span class="s2">&quot;actions&quot;</span><span class="p">)</span>
</span><span id="__span-33-6">    <span class="n">actions</span><span class="o">.</span><span class="n">enum</span><span class="p">(</span>
</span><span id="__span-33-7">        <span class="s2">&quot;mode&quot;</span><span class="p">,</span>
</span><span id="__span-33-8">        <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">],</span>
</span><span id="__span-33-9">        <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_change_mode</span><span class="p">,</span>
</span><span id="__span-33-10">        <span class="o">...</span>
</span><span id="__span-33-11">    <span class="p">)</span>
</span><span id="__span-33-12">
</span><span id="__span-33-13">    <span class="n">panel</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="s2">&quot;user_input&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;spam&quot;</span><span class="p">)</span>
</span><span id="__span-33-14">
</span><span id="__span-33-15"><span class="k">def</span><span class="w"> </span><span class="nf">on_change_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-33-16">    <span class="c1"># Object-based interface</span>
</span><span id="__span-33-17">    <span class="n">mode</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">mode</span>
</span><span id="__span-33-18">    <span class="n">user_input</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">user_input</span>
</span><span id="__span-33-19">
</span><span id="__span-33-20">    <span class="c1"># Functional interface</span>
</span><span id="__span-33-21">    <span class="n">mode</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="s2">&quot;menu.actions.mode&quot;</span><span class="p">)</span>
</span><span id="__span-33-22">    <span class="n">user_input</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="s2">&quot;user_input&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Panel state can be programmatically updated in panel methods via the two
syntaxes shown below:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-34-1"><span class="k">def</span><span class="w"> </span><span class="nf">on_change_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-34-2">    <span class="c1"># Top-level state attributes can be modified by setting properties</span>
</span><span id="__span-34-3">    <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">foo</span> <span class="o">=</span> <span class="s2">&quot;bar&quot;</span>
</span><span id="__span-34-4">
</span><span id="__span-34-5">    <span class="c1"># Use set_state() to efficiently apply nested updates</span>
</span><span id="__span-34-6">    <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="s2">&quot;foo.bar&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;spam&quot;</span><span class="p">:</span> <span class="s2">&quot;eggs&quot;</span><span class="p">})</span>
</span></code></pre></div>
<p>Warning</p>
<p>Don’t directly modify panel state in
<a href="../api/fiftyone.operators.panel.html#fiftyone.operators.panel.Panel.render" title="fiftyone.operators.panel.Panel.render"><code>render()</code></a>, just like how
<code>setState()</code> should not be called in
React’s
<a href="https://legacy.reactjs.org/docs/react-component.html#render">render()</a>.</p>
<p>Instead set panel state in event callbacks as demonstrated above.</p>
<h4 id="panel-data">Panel data <a href="#panel-data" title="Permalink to this headline">¶</a><a class="headerlink" href="#panel-data" title="Permanent link">&para;</a></h4>
<p>Panel data is designed to store larger content such as plot data that is
loaded once and henceforward stored <em>only</em> clientside to avoid
unnecessary/expensive reloads and serverside serialization during the lifecycle
of the panel.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-35-1"><span class="k">def</span><span class="w"> </span><span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-35-2">    <span class="bp">self</span><span class="o">.</span><span class="n">update_plot_data</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
</span><span id="__span-35-3">
</span><span id="__span-35-4"><span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-35-5">    <span class="n">panel</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
</span><span id="__span-35-6">
</span><span id="__span-35-7">    <span class="n">menu</span> <span class="o">=</span> <span class="n">panel</span><span class="o">.</span><span class="n">menu</span><span class="p">(</span><span class="s2">&quot;menu&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</span><span id="__span-35-8">    <span class="n">actions</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">btn_group</span><span class="p">(</span><span class="s2">&quot;actions&quot;</span><span class="p">)</span>
</span><span id="__span-35-9">    <span class="n">actions</span><span class="o">.</span><span class="n">enum</span><span class="p">(</span>
</span><span id="__span-35-10">        <span class="s2">&quot;brain_key&quot;</span><span class="p">,</span>
</span><span id="__span-35-11">        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Brain key&quot;</span><span class="p">,</span>
</span><span id="__span-35-12">        <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">],</span>
</span><span id="__span-35-13">        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-35-14">        <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">update_plot_data</span><span class="p">,</span>
</span><span id="__span-35-15">    <span class="p">)</span>
</span><span id="__span-35-16">
</span><span id="__span-35-17">    <span class="n">panel</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;embeddings&quot;</span><span class="p">,</span> <span class="n">config</span><span class="o">=...</span><span class="p">,</span> <span class="n">layout</span><span class="o">=...</span><span class="p">)</span>
</span><span id="__span-35-18">
</span><span id="__span-35-19">    <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">panel</span><span class="p">)</span>
</span><span id="__span-35-20">
</span><span id="__span-35-21"><span class="k">def</span><span class="w"> </span><span class="nf">update_plot_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-35-22">    <span class="n">brain_key</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">brain_key</span>
</span><span id="__span-35-23">    <span class="k">if</span> <span class="n">brain_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-35-24">        <span class="k">return</span>
</span><span id="__span-35-25">
</span><span id="__span-35-26">    <span class="c1"># Load expensive content based on current `brain_key`</span>
</span><span id="__span-35-27">    <span class="n">results</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">load_brain_results</span><span class="p">(</span><span class="n">brain_key</span><span class="p">)</span>
</span><span id="__span-35-28">
</span><span id="__span-35-29">    <span class="c1"># Store large content as panel data for efficiency</span>
</span><span id="__span-35-30">    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;points&quot;</span><span class="p">:</span> <span class="n">results</span><span class="o">.</span><span class="n">points</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
</span><span id="__span-35-31">    <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="s2">&quot;embeddings&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span></code></pre></div>
<p>Note how the panel’s <code>on_load()</code> hook is implemented so that panel data can be
hydrated when the panel is initially loaded, and then subsequently plot data is
loaded only when the <code>brain_key</code> property is modified.</p>
<p>Note</p>
<p>Panel data is never readable in Python; it is only implicitly used by
the types you define when they are rendered clientside.</p>
<h3 id="execution-store">Execution store <a href="#execution-store" title="Permalink to this headline">¶</a><a class="headerlink" href="#execution-store" title="Permanent link">&para;</a></h3>
<p>Panels can store data in the execution store, which is a key-value store that
is persisted beyond the lifetime of the panel. This is useful for storing
information that should persist across panel instances and App sessions, such
as cached data, long-lived panel state, or user preferences.</p>
<p>You can create/retrieve execution stores scoped to the current <code>ctx.dataset</code>
via <code>ctx.store</code>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-36-1"><span class="k">def</span><span class="w"> </span><span class="nf">on_load</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-36-2">    <span class="c1"># Retrieve a store scoped to the current `ctx.dataset`</span>
</span><span id="__span-36-3">    <span class="c1"># The store is automatically created if necessary</span>
</span><span id="__span-36-4">    <span class="n">store</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">store</span><span class="p">(</span><span class="s2">&quot;my_store&quot;</span><span class="p">)</span>
</span><span id="__span-36-5">
</span><span id="__span-36-6">    <span class="c1"># Load a pre-existing value from the store</span>
</span><span id="__span-36-7">    <span class="n">user_choice</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;user_choice&quot;</span><span class="p">)</span>
</span><span id="__span-36-8">
</span><span id="__span-36-9">    <span class="c1"># Store data with a TTL to ensure it is evicted after `ttl` seconds</span>
</span><span id="__span-36-10">    <span class="n">store</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;my_key&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">},</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
</span><span id="__span-36-11">
</span><span id="__span-36-12">    <span class="c1"># List all keys in the store</span>
</span><span id="__span-36-13">    <span class="nb">print</span><span class="p">(</span><span class="n">store</span><span class="o">.</span><span class="n">list_keys</span><span class="p">())</span>  <span class="c1"># [&quot;user_choice&quot;, &quot;my_key&quot;]</span>
</span><span id="__span-36-14">
</span><span id="__span-36-15">    <span class="c1"># Retrieve data from the store</span>
</span><span id="__span-36-16">    <span class="nb">print</span><span class="p">(</span><span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;my_key&quot;</span><span class="p">))</span>  <span class="c1"># {&quot;foo&quot;: &quot;bar&quot;}</span>
</span><span id="__span-36-17">
</span><span id="__span-36-18">    <span class="c1"># Retrieve metadata about a key</span>
</span><span id="__span-36-19">    <span class="nb">print</span><span class="p">(</span><span class="n">store</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s2">&quot;my_key&quot;</span><span class="p">))</span>
</span><span id="__span-36-20">    <span class="c1"># {&quot;created_at&quot;: ..., &quot;updated_at&quot;: ..., &quot;expires_at&quot;: ...}</span>
</span><span id="__span-36-21">
</span><span id="__span-36-22">    <span class="c1"># Delete a key from the store</span>
</span><span id="__span-36-23">    <span class="n">store</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;my_key&quot;</span><span class="p">)</span>
</span><span id="__span-36-24">
</span><span id="__span-36-25">    <span class="c1"># Clear all data in the store</span>
</span><span id="__span-36-26">    <span class="n">store</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span></code></pre></div>
<p>Note</p>
<p>Did you know? Any execution stores associated with a dataset are
automatically deleted when the dataset is deleted.</p>
<p>For advanced use cases, it is also possible to create and use global stores
that are available to all datasets via the
<a href="../api/fiftyone.operators.store.html#fiftyone.operators.store.ExecutionStore" title="fiftyone.operators.store.ExecutionStore"><code>ExecutionStore</code></a> class:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-37-1"><span class="kn">from</span><span class="w"> </span><span class="nn">fiftyone.operators</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExecutionStore</span>
</span><span id="__span-37-2">
</span><span id="__span-37-3"><span class="c1"># Retrieve a global store</span>
</span><span id="__span-37-4"><span class="c1"># The store is automatically created if necessary</span>
</span><span id="__span-37-5"><span class="n">store</span> <span class="o">=</span> <span class="n">ExecutionStore</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;my_store&quot;</span><span class="p">)</span>
</span><span id="__span-37-6">
</span><span id="__span-37-7"><span class="c1"># Store data with a TTL to ensure it is evicted after `ttl` seconds</span>
</span><span id="__span-37-8"><span class="n">store</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;my_key&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">},</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
</span><span id="__span-37-9">
</span><span id="__span-37-10"><span class="c1"># List all keys in the global store</span>
</span><span id="__span-37-11"><span class="nb">print</span><span class="p">(</span><span class="n">store</span><span class="o">.</span><span class="n">list_keys</span><span class="p">())</span>  <span class="c1"># [&quot;my_key&quot;]</span>
</span><span id="__span-37-12">
</span><span id="__span-37-13"><span class="c1"># Retrieve data from the global store</span>
</span><span id="__span-37-14"><span class="nb">print</span><span class="p">(</span><span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;my_key&quot;</span><span class="p">))</span>  <span class="c1"># {&quot;foo&quot;: &quot;bar&quot;}</span>
</span><span id="__span-37-15">
</span><span id="__span-37-16"><span class="c1"># Retrieve metadata about a key</span>
</span><span id="__span-37-17"><span class="nb">print</span><span class="p">(</span><span class="n">store</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s2">&quot;my_key&quot;</span><span class="p">))</span>
</span><span id="__span-37-18"><span class="c1"># {&quot;created_at&quot;: ..., &quot;updated_at&quot;: ..., &quot;expires_at&quot;: ...}</span>
</span><span id="__span-37-19">
</span><span id="__span-37-20"><span class="c1"># Delete a key from the global store</span>
</span><span id="__span-37-21"><span class="n">store</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;my_key&quot;</span><span class="p">)</span>
</span><span id="__span-37-22">
</span><span id="__span-37-23"><span class="c1"># Clear all data in the global store</span>
</span><span id="__span-37-24"><span class="n">store</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span></code></pre></div>
<p>Warning</p>
<p>Global stores have no automatic garbage collection, so take care when
creating and using global stores whose keys do not utilize TTLs.</p>
<h3 id="saved-workspaces">Saved workspaces <a href="#saved-workspaces" title="Permalink to this headline">¶</a><a class="headerlink" href="#saved-workspaces" title="Permanent link">&para;</a></h3>
<p><a href="../fiftyone_concepts/app.html#app-workspaces">Saved workspaces</a> may contain any number of Python
panels!</p>
<p>When a workspace is saved, the current <a href="#panel-state">panel state</a> of any
panels in the layout is persisted as part of the workspace’s definition. Thus
when the workspace is loaded later, all panels will “remember” their state.</p>
<p><a href="#panel-data">Panel data</a> (which may be large), on the other hand, is
<em>not</em> explicitly persisted. Instead it should be hydrated when the panel is
loaded using the pattern <a href="#panel-data">demonstrated here</a>.</p>
<h3 id="accessing-secrets_1">Accessing secrets <a href="#panel-accessing-secrets" title="Permalink to this headline">¶</a><a class="headerlink" href="#accessing-secrets_1" title="Permanent link">&para;</a></h3>
<p>Panels can <a href="#operator-secrets">access secrets</a> defined by their plugin.</p>
<p>At runtime, the panel’s <a href="#operator-execution-context">execution context</a>
is automatically hydrated with any available secrets that are declared by the
plugin. Panels can access these secrets via the <code>ctx.secrets</code> dict:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-38-1"><span class="k">def</span><span class="w"> </span><span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-38-2">    <span class="n">url</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">secrets</span><span class="p">[</span><span class="s2">&quot;FIFTYONE_CVAT_URL&quot;</span><span class="p">]</span>
</span><span id="__span-38-3">    <span class="n">username</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">secrets</span><span class="p">[</span><span class="s2">&quot;FIFTYONE_CVAT_USERNAME&quot;</span><span class="p">]</span>
</span><span id="__span-38-4">    <span class="n">password</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">secrets</span><span class="p">[</span><span class="s2">&quot;FIFTYONE_CVAT_PASSWORD&quot;</span><span class="p">]</span>
</span><span id="__span-38-5">    <span class="n">email</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">secrets</span><span class="p">[</span><span class="s2">&quot;FIFTYONE_CVAT_EMAIL&quot;</span><span class="p">]</span>
</span></code></pre></div>
<h3 id="common-patterns">Common patterns <a href="#common-patterns" title="Permalink to this headline">¶</a><a class="headerlink" href="#common-patterns" title="Permanent link">&para;</a></h3>
<p>Most panels make use of common patterns like callbacks, menus, interactive
plots, and walkthrough layouts.</p>
<p>Learning the patterns described below will help you build panels faster and
avoid roadblocks along the way.</p>
<p>Note</p>
<p>Check out the
<a href="https://github.com/voxel51/fiftyone-plugins/tree/main/plugins/panel-examples">panel examples</a>
plugin to see a collection of fully-functional panels that demonstrate
the common patterns below.</p>
<h4 id="callbacks">Callbacks <a href="#callbacks" title="Permalink to this headline">¶</a><a class="headerlink" href="#callbacks" title="Permanent link">&para;</a></h4>
<p>Most panel components support callback methods like <code>on_click</code> and <code>on_change</code>
that you can implement to perform operations and trigger state updates when
users interact with the components.</p>
<p>For example, the code below shows how clicking a button or changing the state
of a slider can initiate callbacks that trigger operators, open other panels,
and programmatically modify the current state.</p>
<p>Note</p>
<p>All callback functions have access to the current
<code>ExecutionContext</code>
via their <code>ctx</code> argument and can use it to get/update panel state and
trigger other operations.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-39-1"><span class="k">def</span><span class="w"> </span><span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-39-2">    <span class="c1"># Set initial slider state</span>
</span><span id="__span-39-3">    <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">slider_value</span> <span class="o">=</span> <span class="mi">5</span>
</span><span id="__span-39-4">
</span><span id="__span-39-5"><span class="k">def</span><span class="w"> </span><span class="nf">open_compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-39-6">    <span class="c1"># Launch an interactive prompt for user to execute an operator</span>
</span><span id="__span-39-7">    <span class="n">ctx</span><span class="o">.</span><span class="n">prompt</span><span class="p">(</span><span class="s2">&quot;@voxel51/brain/compute_visualization&quot;</span><span class="p">)</span>
</span><span id="__span-39-8">
</span><span id="__span-39-9"><span class="k">def</span><span class="w"> </span><span class="nf">open_embeddings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-39-10">    <span class="c1"># Open embeddings panel</span>
</span><span id="__span-39-11">    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s2">&quot;open_panel&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Embeddings&quot;</span><span class="p">))</span>
</span><span id="__span-39-12">
</span><span id="__span-39-13"><span class="k">def</span><span class="w"> </span><span class="nf">change_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-39-14">    <span class="c1"># Grab current slider value from `ctx.params`</span>
</span><span id="__span-39-15">    <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">slider_value</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-39-16">        <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;panel_state&quot;</span><span class="p">][</span><span class="s2">&quot;slider_value&quot;</span><span class="p">]</span>
</span><span id="__span-39-17">    <span class="p">)</span>
</span><span id="__span-39-18">
</span><span id="__span-39-19"><span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-39-20">    <span class="n">panel</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
</span><span id="__span-39-21">
</span><span id="__span-39-22">    <span class="c1"># Define buttons that work with on_click callbacks</span>
</span><span id="__span-39-23">    <span class="n">panel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
</span><span id="__span-39-24">        <span class="s2">&quot;button_1&quot;</span><span class="p">,</span>
</span><span id="__span-39-25">        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Compute visualization&quot;</span><span class="p">,</span>
</span><span id="__span-39-26">        <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">open_compute</span><span class="p">,</span>
</span><span id="__span-39-27">    <span class="p">)</span>
</span><span id="__span-39-28">    <span class="n">panel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
</span><span id="__span-39-29">        <span class="s2">&quot;button_2&quot;</span><span class="p">,</span>
</span><span id="__span-39-30">        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Open embeddings panel&quot;</span><span class="p">,</span>
</span><span id="__span-39-31">        <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">open_embeddings</span><span class="p">,</span>
</span><span id="__span-39-32">    <span class="p">)</span>
</span><span id="__span-39-33">
</span><span id="__span-39-34">    <span class="c1"># Define a slider with an `on_change` callback</span>
</span><span id="__span-39-35">    <span class="n">slider</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">SliderView</span><span class="p">(</span>
</span><span id="__span-39-36">        <span class="n">data</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">slider_value</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Example Slider&quot;</span>
</span><span id="__span-39-37">    <span class="p">)</span>
</span><span id="__span-39-38">    <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;multipleOf&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
</span><span id="__span-39-39">    <span class="n">panel</span><span class="o">.</span><span class="n">int</span><span class="p">(</span>
</span><span id="__span-39-40">        <span class="s2">&quot;slider_value&quot;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">slider</span><span class="p">,</span> <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">change_value</span><span class="p">,</span> <span class="o">**</span><span class="n">schema</span>
</span><span id="__span-39-41">    <span class="p">)</span>
</span></code></pre></div>
<p>Note</p>
<p>Did you know? You can use <code>ctx.params</code> in a callback to access the state
of the property that triggered the action.</p>
<h4 id="dropdown-menus">Dropdown menus <a href="#dropdown-menus" title="Permalink to this headline">¶</a><a class="headerlink" href="#dropdown-menus" title="Permanent link">&para;</a></h4>
<p>Dropdown menus can be a useful tool to build panels whose layout/content
dynamically changes based on the current state of the menu.</p>
<p>Here’s an example of a dropdown menu with selectable options that alters the
panel layout based on user input.</p>
<p>Note</p>
<p>Panels also support a <code>menu()</code> property that provides a convenient syntax
for defining a group of dropdowns, buttons, etc that can be anchored
to a particular position in your panel (e.g., top-left).</p>
<p>Check out <a href="#panel-interface">this section</a> for an example panel that
makes use of <code>menu()</code>.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-40-1"><span class="k">class</span><span class="w"> </span><span class="nc">DropdownMenuExample</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">Panel</span><span class="p">):</span>
</span><span id="__span-40-2">    <span class="nd">@property</span>
</span><span id="__span-40-3">    <span class="k">def</span><span class="w"> </span><span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-40-4">        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">PanelConfig</span><span class="p">(</span>
</span><span id="__span-40-5">            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;example_dropdown_menu&quot;</span><span class="p">,</span>
</span><span id="__span-40-6">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Examples: Dropdown Menu&quot;</span><span class="p">,</span>
</span><span id="__span-40-7">        <span class="p">)</span>
</span><span id="__span-40-8">
</span><span id="__span-40-9">    <span class="k">def</span><span class="w"> </span><span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-40-10">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">selection</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-40-11">
</span><span id="__span-40-12">    <span class="k">def</span><span class="w"> </span><span class="nf">alter_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-40-13">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">selection</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>
</span><span id="__span-40-14">
</span><span id="__span-40-15">    <span class="k">def</span><span class="w"> </span><span class="nf">refresh_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-40-16">        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">reload_dataset</span><span class="p">()</span>
</span><span id="__span-40-17">
</span><span id="__span-40-18">    <span class="k">def</span><span class="w"> </span><span class="nf">reload_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-40-19">        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">reload_samples</span><span class="p">()</span>
</span><span id="__span-40-20">
</span><span id="__span-40-21">    <span class="k">def</span><span class="w"> </span><span class="nf">say_hi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-40-22">        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Hi!&quot;</span><span class="p">,</span> <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;success&quot;</span><span class="p">)</span>
</span><span id="__span-40-23">
</span><span id="__span-40-24">    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-40-25">        <span class="n">panel</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
</span><span id="__span-40-26">
</span><span id="__span-40-27">        <span class="n">panel</span><span class="o">.</span><span class="n">md</span><span class="p">(</span>
</span><span id="__span-40-28"><span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-40-29"><span class="sd">            ### Welcome to the Python Panel Dropdown Menu Example</span>
</span><span id="__span-40-30"><span class="sd">            Use the menu below to select what you would like to do next!</span>
</span><span id="__span-40-31">
</span><span id="__span-40-32"><span class="sd">            ---</span>
</span><span id="__span-40-33">
</span><span id="__span-40-34"><span class="sd">        &quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-40-35">            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;header&quot;</span><span class="p">,</span>
</span><span id="__span-40-36">            <span class="n">width</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>  <span class="c1"># 50% of current panel width</span>
</span><span id="__span-40-37">            <span class="n">height</span><span class="o">=</span><span class="s2">&quot;200px&quot;</span><span class="p">,</span>
</span><span id="__span-40-38">        <span class="p">)</span>
</span><span id="__span-40-39">
</span><span id="__span-40-40">        <span class="c1"># Define a dropdown menu and add choices</span>
</span><span id="__span-40-41">        <span class="n">dropdown</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">DropdownView</span><span class="p">()</span>
</span><span id="__span-40-42">        <span class="n">dropdown</span><span class="o">.</span><span class="n">add_choice</span><span class="p">(</span>
</span><span id="__span-40-43">            <span class="s2">&quot;refresh&quot;</span><span class="p">,</span>
</span><span id="__span-40-44">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Display Refresh Button&quot;</span><span class="p">,</span>
</span><span id="__span-40-45">            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Displays button that will refresh the FiftyOne App&quot;</span><span class="p">,</span>
</span><span id="__span-40-46">        <span class="p">)</span>
</span><span id="__span-40-47">        <span class="n">dropdown</span><span class="o">.</span><span class="n">add_choice</span><span class="p">(</span>
</span><span id="__span-40-48">            <span class="s2">&quot;reload_samples&quot;</span><span class="p">,</span>
</span><span id="__span-40-49">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Display Reload Samples Button&quot;</span><span class="p">,</span>
</span><span id="__span-40-50">            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Displays button that will reload the samples view&quot;</span><span class="p">,</span>
</span><span id="__span-40-51">        <span class="p">)</span>
</span><span id="__span-40-52">        <span class="n">dropdown</span><span class="o">.</span><span class="n">add_choice</span><span class="p">(</span>
</span><span id="__span-40-53">            <span class="s2">&quot;say_hi&quot;</span><span class="p">,</span>
</span><span id="__span-40-54">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Display Hi Button&quot;</span><span class="p">,</span>
</span><span id="__span-40-55">            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Displays button that will say hi&quot;</span><span class="p">,</span>
</span><span id="__span-40-56">        <span class="p">)</span>
</span><span id="__span-40-57">
</span><span id="__span-40-58">        <span class="c1"># Add dropdown menu to the panel as a view and use the `on_change`</span>
</span><span id="__span-40-59">        <span class="c1"># callback to trigger `alter_selection`</span>
</span><span id="__span-40-60">        <span class="n">panel</span><span class="o">.</span><span class="n">view</span><span class="p">(</span>
</span><span id="__span-40-61">            <span class="s2">&quot;dropdown&quot;</span><span class="p">,</span>
</span><span id="__span-40-62">            <span class="n">view</span><span class="o">=</span><span class="n">dropdown</span><span class="p">,</span>
</span><span id="__span-40-63">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Dropdown Menu&quot;</span><span class="p">,</span>
</span><span id="__span-40-64">            <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">alter_selection</span><span class="p">,</span>
</span><span id="__span-40-65">        <span class="p">)</span>
</span><span id="__span-40-66">
</span><span id="__span-40-67">        <span class="c1"># Change panel visual state dependent on dropdown menu selection</span>
</span><span id="__span-40-68">        <span class="k">if</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">selection</span> <span class="o">==</span> <span class="s2">&quot;refresh&quot;</span><span class="p">:</span>
</span><span id="__span-40-69">            <span class="n">panel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
</span><span id="__span-40-70">                <span class="s2">&quot;refresh&quot;</span><span class="p">,</span>
</span><span id="__span-40-71">                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Refresh FiftyOne&quot;</span><span class="p">,</span>
</span><span id="__span-40-72">                <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">refresh_page</span><span class="p">,</span>
</span><span id="__span-40-73">                <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span><span class="p">,</span>
</span><span id="__span-40-74">            <span class="p">)</span>
</span><span id="__span-40-75">        <span class="k">elif</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">selection</span> <span class="o">==</span> <span class="s2">&quot;reload_samples&quot;</span><span class="p">:</span>
</span><span id="__span-40-76">            <span class="n">panel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
</span><span id="__span-40-77">                <span class="s2">&quot;reload_samples&quot;</span><span class="p">,</span>
</span><span id="__span-40-78">                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Reload Samples&quot;</span><span class="p">,</span>
</span><span id="__span-40-79">                <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">reload_samples</span><span class="p">,</span>
</span><span id="__span-40-80">                <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span><span class="p">,</span>
</span><span id="__span-40-81">            <span class="p">)</span>
</span><span id="__span-40-82">        <span class="k">elif</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">selection</span> <span class="o">==</span> <span class="s2">&quot;say_hi&quot;</span><span class="p">:</span>
</span><span id="__span-40-83">            <span class="n">panel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
</span><span id="__span-40-84">                <span class="s2">&quot;say_hi&quot;</span><span class="p">,</span>
</span><span id="__span-40-85">                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Say Hi&quot;</span><span class="p">,</span>
</span><span id="__span-40-86">                <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">say_hi</span><span class="p">,</span>
</span><span id="__span-40-87">                <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span><span class="p">,</span>
</span><span id="__span-40-88">            <span class="p">)</span>
</span><span id="__span-40-89">
</span><span id="__span-40-90">        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span>
</span><span id="__span-40-91">            <span class="n">panel</span><span class="p">,</span>
</span><span id="__span-40-92">            <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GridView</span><span class="p">(</span>
</span><span id="__span-40-93">                <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
</span><span id="__span-40-94">                <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
</span><span id="__span-40-95">                <span class="n">align_x</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
</span><span id="__span-40-96">                <span class="n">align_y</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
</span><span id="__span-40-97">                <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span><span class="p">,</span>
</span><span id="__span-40-98">            <span class="p">),</span>
</span><span id="__span-40-99">        <span class="p">)</span>
</span></code></pre></div>
<p><img alt="../_images/dropdown-example-inline.gif" src="../../_images/dropdown-example-inline.gif" /></p>
<h4 id="interactive-plots">Interactive plots <a href="#interactive-plots" title="Permalink to this headline">¶</a><a class="headerlink" href="#interactive-plots" title="Permanent link">&para;</a></h4>
<p>Panels provide native support for defining interactive plots that can render
data from the current dataset and dynamically update or trigger actions as
users interact with the plots.</p>
<p>For example, here’s a panel that displays a histogram of a specified field of
the current dataset where clicking a bar loads the corresponding samples in
the App.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-41-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.operators</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">foo</span>
</span><span id="__span-41-2"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.operators.types</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">types</span>
</span><span id="__span-41-3"><span class="kn">from</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>
</span><span id="__span-41-4">
</span><span id="__span-41-5"><span class="k">class</span><span class="w"> </span><span class="nc">InteractivePlotExample</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">Panel</span><span class="p">):</span>
</span><span id="__span-41-6">    <span class="nd">@property</span>
</span><span id="__span-41-7">    <span class="k">def</span><span class="w"> </span><span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-41-8">        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">PanelConfig</span><span class="p">(</span>
</span><span id="__span-41-9">            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;example_interactive_plot&quot;</span><span class="p">,</span>
</span><span id="__span-41-10">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Examples: Interactive Plot&quot;</span><span class="p">,</span>
</span><span id="__span-41-11">            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;bar_chart&quot;</span><span class="p">,</span>
</span><span id="__span-41-12">        <span class="p">)</span>
</span><span id="__span-41-13">
</span><span id="__span-41-14">    <span class="k">def</span><span class="w"> </span><span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-41-15">        <span class="c1"># Get target field</span>
</span><span id="__span-41-16">        <span class="n">target_field</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-41-17">            <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">target_field</span> <span class="ow">or</span> <span class="s2">&quot;ground_truth.detections.label&quot;</span>
</span><span id="__span-41-18">        <span class="p">)</span>
</span><span id="__span-41-19">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">target_field</span> <span class="o">=</span> <span class="n">target_field</span>
</span><span id="__span-41-20">
</span><span id="__span-41-21">        <span class="c1"># Compute target histogram for current dataset</span>
</span><span id="__span-41-22">        <span class="n">counts</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="n">target_field</span><span class="p">)</span>
</span><span id="__span-41-23">        <span class="n">keys</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="nb">sorted</span><span class="p">(</span><span class="n">counts</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span id="__span-41-24">
</span><span id="__span-41-25">        <span class="c1"># Store as panel data for efficiency</span>
</span><span id="__span-41-26">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">histogram</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">keys</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">values</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">}</span>
</span><span id="__span-41-27">
</span><span id="__span-41-28">        <span class="c1"># Launch panel in a horizontal split view</span>
</span><span id="__span-41-29">        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">split_panel</span><span class="p">(</span><span class="s2">&quot;example_interactive_plot&quot;</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="s2">&quot;horizontal&quot;</span><span class="p">)</span>
</span><span id="__span-41-30">
</span><span id="__span-41-31">    <span class="k">def</span><span class="w"> </span><span class="nf">on_change_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-41-32">        <span class="c1"># Update histogram when current view changes</span>
</span><span id="__span-41-33">        <span class="bp">self</span><span class="o">.</span><span class="n">on_load</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
</span><span id="__span-41-34">
</span><span id="__span-41-35">    <span class="k">def</span><span class="w"> </span><span class="nf">on_histogram_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-41-36">        <span class="c1"># The histogram bar that the user clicked</span>
</span><span id="__span-41-37">        <span class="n">value</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>
</span><span id="__span-41-38">
</span><span id="__span-41-39">        <span class="c1"># Create a view that matches the selected histogram bar</span>
</span><span id="__span-41-40">        <span class="n">field</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">target_field</span>
</span><span id="__span-41-41">        <span class="n">view</span> <span class="o">=</span> <span class="n">_make_matching_view</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="__span-41-42">
</span><span id="__span-41-43">        <span class="c1"># Load view in App</span>
</span><span id="__span-41-44">        <span class="k">if</span> <span class="n">view</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-41-45">            <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">set_view</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="p">)</span>
</span><span id="__span-41-46">
</span><span id="__span-41-47">    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-41-48">        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">clear_view</span><span class="p">()</span>
</span><span id="__span-41-49">        <span class="bp">self</span><span class="o">.</span><span class="n">on_load</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
</span><span id="__span-41-50">
</span><span id="__span-41-51">    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-41-52">        <span class="n">panel</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
</span><span id="__span-41-53">
</span><span id="__span-41-54">        <span class="n">panel</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="__span-41-55">            <span class="s2">&quot;histogram&quot;</span><span class="p">,</span>
</span><span id="__span-41-56">            <span class="n">layout</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-41-57">                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-41-58">                    <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Interactive Histogram&quot;</span><span class="p">,</span>
</span><span id="__span-41-59">                    <span class="s2">&quot;xanchor&quot;</span><span class="p">:</span> <span class="s2">&quot;center&quot;</span><span class="p">,</span>
</span><span id="__span-41-60">                    <span class="s2">&quot;yanchor&quot;</span><span class="p">:</span> <span class="s2">&quot;top&quot;</span><span class="p">,</span>
</span><span id="__span-41-61">                    <span class="s2">&quot;automargin&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-41-62">                <span class="p">},</span>
</span><span id="__span-41-63">                <span class="s2">&quot;xaxis&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Labels&quot;</span><span class="p">},</span>
</span><span id="__span-41-64">                <span class="s2">&quot;yaxis&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Count&quot;</span><span class="p">},</span>
</span><span id="__span-41-65">            <span class="p">},</span>
</span><span id="__span-41-66">            <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_histogram_click</span><span class="p">,</span>
</span><span id="__span-41-67">            <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
</span><span id="__span-41-68">        <span class="p">)</span>
</span><span id="__span-41-69">
</span><span id="__span-41-70">        <span class="n">panel</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
</span><span id="__span-41-71">            <span class="s2">&quot;reset&quot;</span><span class="p">,</span>
</span><span id="__span-41-72">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Reset Chart&quot;</span><span class="p">,</span>
</span><span id="__span-41-73">            <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">,</span>
</span><span id="__span-41-74">            <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span><span class="p">,</span>
</span><span id="__span-41-75">        <span class="p">)</span>
</span><span id="__span-41-76">
</span><span id="__span-41-77">        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span>
</span><span id="__span-41-78">            <span class="n">panel</span><span class="p">,</span>
</span><span id="__span-41-79">            <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GridView</span><span class="p">(</span>
</span><span id="__span-41-80">                <span class="n">align_x</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
</span><span id="__span-41-81">                <span class="n">align_y</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
</span><span id="__span-41-82">                <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span><span class="p">,</span>
</span><span id="__span-41-83">                <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
</span><span id="__span-41-84">                <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
</span><span id="__span-41-85">                <span class="n">gap</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="__span-41-86">                <span class="n">padding</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-41-87">            <span class="p">),</span>
</span><span id="__span-41-88">        <span class="p">)</span>
</span><span id="__span-41-89">
</span><span id="__span-41-90"><span class="k">def</span><span class="w"> </span><span class="nf">_make_matching_view</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="__span-41-91">    <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.label&quot;</span><span class="p">):</span>
</span><span id="__span-41-92">        <span class="n">root_field</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-41-93">        <span class="k">return</span> <span class="n">dataset</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="n">root_field</span><span class="p">,</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">value</span><span class="p">)</span>
</span><span id="__span-41-94">    <span class="k">elif</span> <span class="n">field</span> <span class="o">==</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span>
</span><span id="__span-41-95">        <span class="k">return</span> <span class="n">dataset</span><span class="o">.</span><span class="n">match_tags</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="__span-41-96">    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-41-97">        <span class="k">return</span> <span class="n">dataset</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="o">==</span> <span class="n">value</span><span class="p">)</span>
</span></code></pre></div>
<p><img alt="../_images/interactive-plot-example-inline.gif" src="../../_images/interactive-plot-example-inline.gif" /></p>
<h4 id="walkthroughs">Walkthroughs <a href="#walkthroughs" title="Permalink to this headline">¶</a><a class="headerlink" href="#walkthroughs" title="Permanent link">&para;</a></h4>
<p>You can use a combination of panel objects like markdown, buttons, arrow
navigation, and layout containers to create guided walkthroughs similar to the
ones at <a href="https://try.fiftyone.ai/datasets/example/samples">try.fiftyone.ai</a>.</p>
<p>Here’s an example of a panel that leads the user through multiple steps of a
guided workflow.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-42-1"><span class="k">class</span><span class="w"> </span><span class="nc">WalkthroughExample</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">Panel</span><span class="p">):</span>
</span><span id="__span-42-2">    <span class="nd">@property</span>
</span><span id="__span-42-3">    <span class="k">def</span><span class="w"> </span><span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-42-4">        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">PanelConfig</span><span class="p">(</span>
</span><span id="__span-42-5">            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;example_walkthrough&quot;</span><span class="p">,</span>
</span><span id="__span-42-6">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Examples: Walkthrough&quot;</span><span class="p">,</span>
</span><span id="__span-42-7">        <span class="p">)</span>
</span><span id="__span-42-8">
</span><span id="__span-42-9">    <span class="k">def</span><span class="w"> </span><span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-42-10">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">page</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-42-11">        <span class="n">info_table</span> <span class="o">=</span> <span class="p">[</span>\
</span><span id="__span-42-12">            <span class="p">{</span>\
</span><span id="__span-42-13">                <span class="s2">&quot;Dataset Name&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>\
</span><span id="__span-42-14">                <span class="s2">&quot;Dataset Description&quot;</span><span class="p">:</span> <span class="s2">&quot;FiftyOne Quick Start Zoo Dataset&quot;</span><span class="p">,</span>\
</span><span id="__span-42-15">                <span class="s2">&quot;Number of Samples&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ctx</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>\
</span><span id="__span-42-16">            <span class="p">},</span>\
</span><span id="__span-42-17">        <span class="p">]</span>
</span><span id="__span-42-18">
</span><span id="__span-42-19">    <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">info_table</span> <span class="o">=</span> <span class="n">info_table</span>
</span><span id="__span-42-20">
</span><span id="__span-42-21">    <span class="k">def</span><span class="w"> </span><span class="nf">go_to_next_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-42-22">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">page</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">page</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-42-23">
</span><span id="__span-42-24">    <span class="k">def</span><span class="w"> </span><span class="nf">go_to_previous_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-42-25">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">page</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">page</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="__span-42-26">
</span><span id="__span-42-27">    <span class="k">def</span><span class="w"> </span><span class="nf">reset_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-42-28">        <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">page</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-42-29">
</span><span id="__span-42-30">    <span class="k">def</span><span class="w"> </span><span class="nf">open_operator_io</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-42-31">        <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">open_panel</span><span class="p">(</span><span class="s2">&quot;OperatorIO&quot;</span><span class="p">)</span>
</span><span id="__span-42-32">
</span><span id="__span-42-33">    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-42-34">        <span class="n">panel</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
</span><span id="__span-42-35">
</span><span id="__span-42-36">        <span class="c1"># Define a vertical stack to live inside your panel</span>
</span><span id="__span-42-37">        <span class="n">stack</span> <span class="o">=</span> <span class="n">panel</span><span class="o">.</span><span class="n">v_stack</span><span class="p">(</span>
</span><span id="__span-42-38">            <span class="s2">&quot;welcome&quot;</span><span class="p">,</span> <span class="n">gap</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">75</span><span class="p">,</span> <span class="n">align_x</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">align_y</span><span class="o">=</span><span class="s2">&quot;center&quot;</span>
</span><span id="__span-42-39">        <span class="p">)</span>
</span><span id="__span-42-40">        <span class="n">button_container</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">GridView</span><span class="p">(</span>
</span><span id="__span-42-41">            <span class="n">gap</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">align_x</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">align_y</span><span class="o">=</span><span class="s2">&quot;center&quot;</span>
</span><span id="__span-42-42">        <span class="p">)</span>
</span><span id="__span-42-43">
</span><span id="__span-42-44">        <span class="n">page</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;page&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-42-45">
</span><span id="__span-42-46">        <span class="k">if</span> <span class="n">page</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="__span-42-47">            <span class="n">stack</span><span class="o">.</span><span class="n">md</span><span class="p">(</span>
</span><span id="__span-42-48"><span class="w">                </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-42-49"><span class="sd">                ### A Tutorial Walkthrough</span>
</span><span id="__span-42-50">
</span><span id="__span-42-51"><span class="sd">                Welcome to the FiftyOne App! Here is a great example of what it looks like to create a tutorial style walkthrough via a Python Panel.</span>
</span><span id="__span-42-52"><span class="sd">            &quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-42-53">                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;markdown_screen_1&quot;</span><span class="p">,</span>
</span><span id="__span-42-54">            <span class="p">)</span>
</span><span id="__span-42-55">            <span class="n">stack</span><span class="o">.</span><span class="n">media_player</span><span class="p">(</span>
</span><span id="__span-42-56">                <span class="s2">&quot;video&quot;</span><span class="p">,</span>
</span><span id="__span-42-57">                <span class="s2">&quot;https://youtu.be/ad79nYk2keg&quot;</span><span class="p">,</span>
</span><span id="__span-42-58">                <span class="n">align_x</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
</span><span id="__span-42-59">                <span class="n">align_y</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
</span><span id="__span-42-60">            <span class="p">)</span>
</span><span id="__span-42-61">        <span class="k">elif</span> <span class="n">page</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="__span-42-62">            <span class="n">stack</span><span class="o">.</span><span class="n">md</span><span class="p">(</span>
</span><span id="__span-42-63"><span class="w">                </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-42-64"><span class="sd">                ### Information About Your Dataset</span>
</span><span id="__span-42-65">
</span><span id="__span-42-66"><span class="sd">                Perhaps you would like to know some more information about your dataset?</span>
</span><span id="__span-42-67"><span class="sd">            &quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-42-68">                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;markdown_screen_2&quot;</span><span class="p">,</span>
</span><span id="__span-42-69">            <span class="p">)</span>
</span><span id="__span-42-70">            <span class="n">table</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">TableView</span><span class="p">()</span>
</span><span id="__span-42-71">            <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Dataset Name&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Dataset Name&quot;</span><span class="p">)</span>
</span><span id="__span-42-72">            <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Dataset Description&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Description&quot;</span><span class="p">)</span>
</span><span id="__span-42-73">            <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Number of Samples&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Number of Samples&quot;</span><span class="p">)</span>
</span><span id="__span-42-74">
</span><span id="__span-42-75">            <span class="n">panel</span><span class="o">.</span><span class="n">obj</span><span class="p">(</span>
</span><span id="__span-42-76">                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;info_table&quot;</span><span class="p">,</span>
</span><span id="__span-42-77">                <span class="n">view</span><span class="o">=</span><span class="n">table</span><span class="p">,</span>
</span><span id="__span-42-78">                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Cool Info About Your Data&quot;</span><span class="p">,</span>
</span><span id="__span-42-79">            <span class="p">)</span>
</span><span id="__span-42-80">        <span class="k">elif</span> <span class="n">page</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="__span-42-81">            <span class="k">if</span> <span class="n">ctx</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">operator_status</span> <span class="o">!=</span> <span class="s2">&quot;opened&quot;</span><span class="p">:</span>
</span><span id="__span-42-82">                <span class="n">stack</span><span class="o">.</span><span class="n">md</span><span class="p">(</span>
</span><span id="__span-42-83"><span class="w">                    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-42-84"><span class="sd">                    ### One Last Trick</span>
</span><span id="__span-42-85">
</span><span id="__span-42-86"><span class="sd">                    If you want to do something cool, click the button below.</span>
</span><span id="__span-42-87"><span class="sd">                &quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-42-88">                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;markdown_screen_3&quot;</span><span class="p">,</span>
</span><span id="__span-42-89">                <span class="p">)</span>
</span><span id="__span-42-90">                <span class="n">btns</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">obj</span><span class="p">(</span><span class="s2">&quot;top_btns&quot;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">button_container</span><span class="p">)</span>
</span><span id="__span-42-91">                <span class="n">btns</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span>
</span><span id="__span-42-92">                    <span class="s2">&quot;open_operator_io&quot;</span><span class="p">,</span>
</span><span id="__span-42-93">                    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Do Something Cool&quot;</span><span class="p">,</span>
</span><span id="__span-42-94">                    <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">open_operator_io</span><span class="p">,</span>
</span><span id="__span-42-95">                    <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span>
</span><span id="__span-42-96">                <span class="p">)</span>
</span><span id="__span-42-97">        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-42-98">            <span class="n">stack</span><span class="o">.</span><span class="n">md</span><span class="p">(</span>
</span><span id="__span-42-99"><span class="w">                </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-42-100"><span class="sd">                #### How did you get here?</span>
</span><span id="__span-42-101"><span class="sd">                Looks like you found the end of the walkthrough. Or have you gotten a little lost in the grid? No worries, let&#39;s get you back to the walkthrough!</span>
</span><span id="__span-42-102"><span class="sd">            &quot;&quot;&quot;</span>
</span><span id="__span-42-103">            <span class="p">)</span>
</span><span id="__span-42-104">            <span class="n">btns</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">obj</span><span class="p">(</span><span class="s2">&quot;btns&quot;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">button_container</span><span class="p">)</span>
</span><span id="__span-42-105">            <span class="n">btns</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">btn</span><span class="p">(</span><span class="s2">&quot;reset&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Go Home&quot;</span><span class="p">,</span> <span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_page</span><span class="p">)</span>
</span><span id="__span-42-106">
</span><span id="__span-42-107">        <span class="c1"># Arrow navigation to go to next or previous page</span>
</span><span id="__span-42-108">        <span class="n">panel</span><span class="o">.</span><span class="n">arrow_nav</span><span class="p">(</span>
</span><span id="__span-42-109">            <span class="s2">&quot;arrow_nav&quot;</span><span class="p">,</span>
</span><span id="__span-42-110">            <span class="n">forward</span><span class="o">=</span><span class="n">page</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">,</span>  <span class="c1"># hidden for the last page</span>
</span><span id="__span-42-111">            <span class="n">backward</span><span class="o">=</span><span class="n">page</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># hidden for the first page</span>
</span><span id="__span-42-112">            <span class="n">on_forward</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">go_to_next_page</span><span class="p">,</span>
</span><span id="__span-42-113">            <span class="n">on_backward</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">go_to_previous_page</span><span class="p">,</span>
</span><span id="__span-42-114">        <span class="p">)</span>
</span><span id="__span-42-115">
</span><span id="__span-42-116">        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span>
</span><span id="__span-42-117">            <span class="n">panel</span><span class="p">,</span>
</span><span id="__span-42-118">            <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GridView</span><span class="p">(</span>
</span><span id="__span-42-119">                <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">align_x</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">align_y</span><span class="o">=</span><span class="s2">&quot;center&quot;</span>
</span><span id="__span-42-120">            <span class="p">),</span>
</span><span id="__span-42-121">        <span class="p">)</span>
</span></code></pre></div>
<p><img alt="../_images/walkthrough-example-inline.gif" src="../../_images/walkthrough-example-inline.gif" /></p>
<h4 id="displaying-multimedia">Displaying multimedia <a href="#displaying-multimedia" title="Permalink to this headline">¶</a><a class="headerlink" href="#displaying-multimedia" title="Permanent link">&para;</a></h4>
<p>Displaying images, videos, and other forms of multimedia is straightforward in
panels. You can embed third-party resources like URLs or load multimedia stored
in local directories.</p>
<p>Here are some examples of panels that load, render, and manipulate various
forms of image and video data.</p>
<p><img alt="../_images/multimedia-example-inline.gif" src="../../_images/multimedia-example-inline.gif" /></p>
<h4 id="type-hints">Type hints <a href="#type-hints" title="Permalink to this headline">¶</a><a class="headerlink" href="#type-hints" title="Permanent link">&para;</a></h4>
<p>Defining the types of your panel’s function arguments allows you to inspect the
methods available to an object and will dramatically help you increase your
speed of development.</p>
<p>With type hints, your IDE can preview helpful docstrings, trace <code>fiftyone</code>
source code, and see what methods exist on your object during the development
process.</p>
<p>For example, declaring that the <code>ctx</code> variable has type
<code>ExecutionContext</code> allows
you to reveal all of its available methods during development:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-43-1"><span class="kn">from</span><span class="w"> </span><span class="nn">fiftyone.operators</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExecutionContext</span>
</span><span id="__span-43-2">
</span><span id="__span-43-3"><span class="k">def</span><span class="w"> </span><span class="nf">on_load</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">ExecutionContext</span><span class="p">):</span>
</span><span id="__span-43-4">    <span class="n">ctx</span><span class="o">.</span><span class="n">trigger</span><span class="p">()</span>
</span><span id="__span-43-5">    <span class="n">ctx</span><span class="o">.</span><span class="n">ops</span><span class="p">()</span>
</span><span id="__span-43-6">    <span class="n">ctx</span><span class="o">.</span><span class="n">secrets</span><span class="p">()</span>
</span><span id="__span-43-7">
</span><span id="__span-43-8">    <span class="c1"># Reveals the remaining methods available to ctx</span>
</span><span id="__span-43-9">    <span class="n">ctx</span><span class="o">.</span>
</span><span id="__span-43-10">    <span class="o">...</span>
</span></code></pre></div>
<h2 id="developing-js-plugins">Developing JS plugins <a href="#developing-js-plugins" title="Permalink to this headline">¶</a><a class="headerlink" href="#developing-js-plugins" title="Permanent link">&para;</a></h2>
<p>This section describes how to develop JS-specific plugin components.</p>
<h3 id="getting-started">Getting Started <a href="#getting-started" title="Permalink to this headline">¶</a><a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h3>
<p>To start building your own JS plugin, refer to the
<a href="https://github.com/voxel51/hello-world-plugin-js">hello-world-plugin-js</a>
repository. This repo serves as a starting point, providing examples of a build
process, a JS panel, and a JS operator.</p>
<p>The <a href="https://github.com/voxel51/fiftyone-js-plugin-build">fiftyone-js-plugin-build</a>
package offers a utility for configuring <a href="https://vite.dev">vite</a> to build your
JS plugin bundle.</p>
<h3 id="component-types">Component types <a href="#component-types" title="Permalink to this headline">¶</a><a class="headerlink" href="#component-types" title="Permanent link">&para;</a></h3>
<p>JS plugins may register components to add or customize functionality within the
FiftyOne App. Each component is registered with an activation function. The
component will only be considered for rendering when the activation function
returns <code>true</code>:</p>
<ul>
<li>
<p><strong>Panel</strong>: JS plugins can register panel components that can be opened by
clicking the <code>+</code> next to any existing panel’s tab</p>
</li>
<li>
<p><strong>Component</strong>: JS plugins can register generic components that can be used
to render operator input and output</p>
</li>
</ul>
<h3 id="panels-and-components">Panels and Components <a href="#panels-and-components" title="Permalink to this headline">¶</a><a class="headerlink" href="#panels-and-components" title="Permanent link">&para;</a></h3>
<p>Here’s some examples of using panels and components to add your
own custom user interface and components to the FiftyOne App.</p>
<h4 id="hello-world-panel">Hello world panel <a href="#hello-world-panel" title="Permalink to this headline">¶</a><a class="headerlink" href="#hello-world-panel" title="Permanent link">&para;</a></h4>
<p>A simple plugin that renders “Hello world” in a panel would look like this:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-44-1"><span class="kn">import</span><span class="w"> </span><span class="p">{</span> <span class="n">registerComponent</span><span class="p">,</span> <span class="n">PluginComponentTypes</span> <span class="p">}</span> <span class="kn">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/plugins&quot;</span><span class="p">;</span>
</span><span id="__span-44-2">
</span><span id="__span-44-3"><span class="n">function</span> <span class="n">HelloWorld</span><span class="p">()</span> <span class="p">{</span>
</span><span id="__span-44-4">    <span class="k">return</span> <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">Hello</span> <span class="n">world</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span><span class="p">;</span>
</span><span id="__span-44-5"><span class="p">}</span>
</span><span id="__span-44-6">
</span><span id="__span-44-7"><span class="n">registerComponent</span><span class="p">({</span>
</span><span id="__span-44-8">    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;HelloWorld&quot;</span><span class="p">,</span>
</span><span id="__span-44-9">    <span class="n">label</span><span class="p">:</span> <span class="s2">&quot;Hello world&quot;</span><span class="p">,</span>
</span><span id="__span-44-10">    <span class="n">component</span><span class="p">:</span> <span class="n">HelloWorld</span><span class="p">,</span>
</span><span id="__span-44-11">    <span class="nb">type</span><span class="p">:</span> <span class="n">PluginComponentTypes</span><span class="o">.</span><span class="n">Panel</span><span class="p">,</span>
</span><span id="__span-44-12">    <span class="n">activator</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="n">true</span>
</span><span id="__span-44-13"><span class="p">});</span>
</span></code></pre></div>
<h4 id="adding-a-custom-panel">Adding a custom Panel <a href="#adding-a-custom-panel" title="Permalink to this headline">¶</a><a class="headerlink" href="#adding-a-custom-panel" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-45-1"><span class="kn">import</span><span class="w"> </span><span class="o">*</span> <span class="k">as</span> <span class="n">fop</span> <span class="kn">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/plugins&quot;</span><span class="p">;</span>
</span><span id="__span-45-2"><span class="kn">import</span><span class="w"> </span><span class="o">*</span> <span class="k">as</span> <span class="n">fos</span> <span class="kn">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/state&quot;</span><span class="p">;</span>
</span><span id="__span-45-3"><span class="kn">import</span><span class="w"> </span><span class="o">*</span> <span class="k">as</span> <span class="n">foa</span> <span class="kn">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/aggregations&quot;</span><span class="p">;</span>
</span><span id="__span-45-4"><span class="kn">import</span><span class="w"> </span><span class="nn">AwesomeMap</span> <span class="kn">from</span><span class="w"> </span><span class="s2">&quot;react-mapping-library&quot;</span><span class="p">;</span>
</span><span id="__span-45-5">
</span><span id="__span-45-6"><span class="n">function</span> <span class="n">CustomPanel</span><span class="p">()</span> <span class="p">{</span>
</span><span id="__span-45-7">    <span class="n">const</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">useRecoilValue</span><span class="p">(</span><span class="n">fos</span><span class="o">.</span><span class="n">dataset</span><span class="p">);</span>
</span><span id="__span-45-8">    <span class="n">const</span> <span class="n">view</span> <span class="o">=</span> <span class="n">useRecoilValue</span><span class="p">(</span><span class="n">fos</span><span class="o">.</span><span class="n">view</span><span class="p">);</span>
</span><span id="__span-45-9">    <span class="n">const</span> <span class="n">filters</span> <span class="o">=</span> <span class="n">useRecoilValue</span><span class="p">(</span><span class="n">fos</span><span class="o">.</span><span class="n">filters</span><span class="p">);</span>
</span><span id="__span-45-10">    <span class="n">const</span> <span class="p">[</span><span class="n">aggregate</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">loading</span><span class="p">]</span> <span class="o">=</span> <span class="n">foa</span><span class="o">.</span><span class="n">useAggregation</span><span class="p">({</span>
</span><span id="__span-45-11">        <span class="n">dataset</span><span class="p">,</span>
</span><span id="__span-45-12">        <span class="n">filters</span><span class="p">,</span>
</span><span id="__span-45-13">        <span class="n">view</span><span class="p">,</span>
</span><span id="__span-45-14">    <span class="p">});</span>
</span><span id="__span-45-15">
</span><span id="__span-45-16">    <span class="n">React</span><span class="o">.</span><span class="n">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span id="__span-45-17">        <span class="n">aggregate</span><span class="p">(</span>
</span><span id="__span-45-18">            <span class="p">[</span>\
</span><span id="__span-45-19">                <span class="n">new</span> <span class="n">foa</span><span class="o">.</span><span class="n">aggregations</span><span class="o">.</span><span class="n">Values</span><span class="p">({</span>\
</span><span id="__span-45-20">                    <span class="n">fieldOrExpr</span><span class="p">:</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span>\
</span><span id="__span-45-21">                <span class="p">}),</span>\
</span><span id="__span-45-22">                <span class="n">new</span> <span class="n">foa</span><span class="o">.</span><span class="n">aggregations</span><span class="o">.</span><span class="n">Values</span><span class="p">({</span>\
</span><span id="__span-45-23">                    <span class="n">fieldOrExpr</span><span class="p">:</span> <span class="s2">&quot;location.point.coordinates&quot;</span><span class="p">,</span>\
</span><span id="__span-45-24">                <span class="p">}),</span>\
</span><span id="__span-45-25">            <span class="p">],</span>
</span><span id="__span-45-26">            <span class="n">dataset</span><span class="o">.</span><span class="n">name</span>
</span><span id="__span-45-27">        <span class="p">);</span>
</span><span id="__span-45-28">    <span class="p">},</span> <span class="p">[</span><span class="n">dataset</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">view</span><span class="p">]);</span>
</span><span id="__span-45-29">
</span><span id="__span-45-30">    <span class="k">if</span> <span class="p">(</span><span class="n">loading</span><span class="p">)</span> <span class="k">return</span> <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">Loading</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span><span class="p">;</span>
</span><span id="__span-45-31">
</span><span id="__span-45-32">    <span class="k">return</span> <span class="o">&lt;</span><span class="n">MyMap</span> <span class="n">geoPoints</span><span class="o">=</span><span class="p">{</span><span class="n">points</span><span class="p">}</span> <span class="o">/&gt;</span><span class="p">;</span>
</span><span id="__span-45-33"><span class="p">}</span>
</span><span id="__span-45-34">
</span><span id="__span-45-35"><span class="n">fop</span><span class="o">.</span><span class="n">registerComponent</span><span class="p">({</span>
</span><span id="__span-45-36">    <span class="o">//</span> <span class="n">component</span> <span class="n">to</span> <span class="n">delegate</span> <span class="n">to</span>
</span><span id="__span-45-37">    <span class="n">component</span><span class="p">:</span> <span class="n">CustomPanel</span><span class="p">,</span>
</span><span id="__span-45-38">
</span><span id="__span-45-39">    <span class="o">//</span> <span class="n">tell</span> <span class="n">FiftyOne</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="n">provide</span> <span class="n">a</span> <span class="n">custom</span> <span class="n">panel</span>
</span><span id="__span-45-40">    <span class="nb">type</span><span class="p">:</span> <span class="n">PluginComponentTypes</span><span class="o">.</span><span class="n">Panel</span><span class="p">,</span>
</span><span id="__span-45-41">
</span><span id="__span-45-42">    <span class="o">//</span> <span class="n">used</span> <span class="k">for</span> <span class="n">the</span> <span class="n">panel</span> <span class="n">selector</span> <span class="n">button</span>
</span><span id="__span-45-43">    <span class="n">label</span><span class="p">:</span> <span class="s2">&quot;Map&quot;</span><span class="p">,</span>
</span><span id="__span-45-44">
</span><span id="__span-45-45">    <span class="o">//</span> <span class="n">only</span> <span class="n">show</span> <span class="n">the</span> <span class="n">Map</span> <span class="n">panel</span> <span class="n">when</span> <span class="n">the</span> <span class="n">dataset</span> <span class="n">has</span> <span class="n">Geo</span> <span class="n">data</span>
</span><span id="__span-45-46">    <span class="n">activator</span><span class="p">:</span> <span class="p">({</span> <span class="n">dataset</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">sampleFields</span><span class="o">.</span><span class="n">location</span><span class="p">,</span>
</span><span id="__span-45-47"><span class="p">});</span>
</span></code></pre></div>
<h4 id="custom-operator-view-using-component-plugin">Custom operator view using component plugin <a href="#custom-operator-view-using-component-plugin" title="Permalink to this headline">¶</a><a class="headerlink" href="#custom-operator-view-using-component-plugin" title="Permanent link">&para;</a></h4>
<p>Creating and registering a custom view type:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-46-1"><span class="kn">import</span><span class="w"> </span><span class="o">*</span> <span class="k">as</span> <span class="n">fop</span> <span class="kn">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/plugins&quot;</span><span class="p">;</span>
</span><span id="__span-46-2"><span class="kn">import</span><span class="w"> </span><span class="p">{</span> <span class="n">useState</span> <span class="p">}</span> <span class="kn">from</span><span class="w"> </span><span class="s2">&quot;react&quot;</span>
</span><span id="__span-46-3">
</span><span id="__span-46-4"><span class="n">function</span> <span class="n">CustomOperatorView</span><span class="p">(</span><span class="n">props</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-46-5">    <span class="o">//</span> <span class="n">these</span> <span class="n">props</span> <span class="n">are</span> <span class="n">provided</span> <span class="n">to</span> <span class="n">the</span> <span class="n">component</span> <span class="n">used</span> <span class="k">as</span> <span class="n">the</span> <span class="n">view</span> <span class="k">for</span> <span class="n">an</span>
</span><span id="__span-46-6">    <span class="o">//</span> <span class="n">operator</span> <span class="nb">input</span><span class="o">/</span><span class="n">output</span> <span class="n">field</span>
</span><span id="__span-46-7">    <span class="n">const</span> <span class="p">{</span> <span class="n">errors</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">onChange</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">schema</span> <span class="p">}</span> <span class="o">=</span> <span class="n">props</span>
</span><span id="__span-46-8">
</span><span id="__span-46-9">    <span class="o">//</span> <span class="n">schema</span> <span class="n">may</span> <span class="n">optionally</span> <span class="n">include</span> <span class="n">a</span> <span class="n">view</span> <span class="nb">property</span> <span class="n">which</span> <span class="n">contains</span>
</span><span id="__span-46-10">    <span class="o">//</span> <span class="n">attributes</span> <span class="n">such</span> <span class="n">label</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">caption</span> <span class="k">for</span>
</span><span id="__span-46-11">    <span class="o">//</span> <span class="n">the</span> <span class="n">field</span><span class="o">.</span> <span class="n">Schema</span> <span class="n">will</span> <span class="n">also</span> <span class="n">provide</span> <span class="n">a</span> <span class="nb">type</span> <span class="nb">property</span> <span class="n">to</span> <span class="n">indicate</span> <span class="n">the</span> <span class="nb">type</span>
</span><span id="__span-46-12">    <span class="o">//</span> <span class="n">of</span> <span class="n">value</span> <span class="n">expected</span> <span class="k">for</span> <span class="n">the</span> <span class="n">field</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span> <span class="n">string</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">array</span><span class="p">,</span> <span class="n">etc</span><span class="o">.</span><span class="p">)</span>
</span><span id="__span-46-13">    <span class="n">const</span> <span class="p">{</span> <span class="n">default</span><span class="p">:</span> <span class="n">defaultValue</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="nb">type</span> <span class="p">}</span> <span class="o">=</span> <span class="n">schema</span>
</span><span id="__span-46-14">
</span><span id="__span-46-15">    <span class="o">//</span> <span class="n">Schema</span> <span class="n">may</span> <span class="n">also</span> <span class="n">provide</span> <span class="n">a</span> <span class="n">default</span> <span class="n">value</span> <span class="k">for</span> <span class="n">the</span> <span class="n">field</span>
</span><span id="__span-46-16">    <span class="n">const</span> <span class="p">[</span><span class="n">value</span><span class="p">,</span> <span class="n">setValue</span><span class="p">]</span> <span class="o">=</span> <span class="n">useState</span><span class="p">(</span><span class="n">defaultValue</span><span class="p">)</span>
</span><span id="__span-46-17">
</span><span id="__span-46-18">    <span class="k">return</span> <span class="p">(</span>
</span><span id="__span-46-19">        <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
</span><span id="__span-46-20">            <span class="o">&lt;</span><span class="n">label</span> <span class="n">htmlFor</span><span class="o">=</span><span class="p">{</span><span class="nb">id</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="n">view</span><span class="o">.</span><span class="n">label</span><span class="p">}</span><span class="o">&lt;/</span><span class="n">label</span><span class="o">&gt;</span>
</span><span id="__span-46-21">            <span class="o">&lt;</span><span class="nb">input</span>
</span><span id="__span-46-22">                <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="n">value</span><span class="p">}</span>
</span><span id="__span-46-23">                <span class="nb">id</span><span class="o">=</span><span class="p">{</span><span class="nb">id</span><span class="p">}</span>
</span><span id="__span-46-24">                <span class="nb">type</span><span class="o">=</span><span class="p">{</span><span class="nb">type</span><span class="p">}</span>
</span><span id="__span-46-25">                <span class="n">onChange</span><span class="o">=</span><span class="p">{(</span><span class="n">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span id="__span-46-26">                    <span class="o">//</span> <span class="n">onChange</span> <span class="n">function</span> <span class="n">passed</span> <span class="k">as</span> <span class="n">a</span> <span class="n">prop</span> <span class="n">can</span> <span class="n">be</span> <span class="n">called</span> <span class="k">with</span>
</span><span id="__span-46-27">                    <span class="o">//</span> <span class="n">path</span> <span class="ow">and</span> <span class="n">value</span> <span class="n">to</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">current</span> <span class="n">value</span> <span class="k">for</span> <span class="n">a</span> <span class="n">field</span>
</span><span id="__span-46-28">                    <span class="n">onChange</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</span><span id="__span-46-29">                <span class="p">}}</span>
</span><span id="__span-46-30">            <span class="o">/&gt;</span>
</span><span id="__span-46-31">        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span><span id="__span-46-32">    <span class="p">)</span>
</span><span id="__span-46-33"><span class="p">}</span>
</span><span id="__span-46-34">
</span><span id="__span-46-35"><span class="n">fop</span><span class="o">.</span><span class="n">registerComponent</span><span class="p">({</span>
</span><span id="__span-46-36">    <span class="o">//</span> <span class="n">unique</span> <span class="n">name</span> <span class="n">you</span> <span class="n">can</span> <span class="n">use</span> <span class="n">later</span> <span class="n">to</span> <span class="n">refer</span> <span class="n">to</span> <span class="n">the</span> <span class="n">component</span> <span class="n">plugin</span>
</span><span id="__span-46-37">    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;CustomOperatorView&quot;</span><span class="p">,</span>
</span><span id="__span-46-38">
</span><span id="__span-46-39">    <span class="o">//</span> <span class="n">component</span> <span class="n">to</span> <span class="n">delegate</span> <span class="n">to</span>
</span><span id="__span-46-40">    <span class="n">component</span><span class="p">:</span> <span class="n">CustomOperatorView</span><span class="p">,</span>
</span><span id="__span-46-41">
</span><span id="__span-46-42">    <span class="o">//</span> <span class="n">tell</span> <span class="n">FiftyOne</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="n">provide</span> <span class="n">a</span> <span class="n">custom</span> <span class="n">component</span>
</span><span id="__span-46-43">    <span class="nb">type</span><span class="p">:</span> <span class="n">PluginComponentTypes</span><span class="o">.</span><span class="n">Component</span><span class="p">,</span>
</span><span id="__span-46-44">
</span><span id="__span-46-45">    <span class="o">//</span> <span class="n">activate</span> <span class="n">this</span> <span class="n">plugin</span> <span class="n">unconditionally</span>
</span><span id="__span-46-46">    <span class="n">activator</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="n">true</span><span class="p">,</span>
</span><span id="__span-46-47"><span class="p">});</span>
</span></code></pre></div>
<p>Using the custom component as the view for a Python operator field:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-47-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.operators</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">foo</span>
</span><span id="__span-47-2"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.operators.types</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">types</span>
</span><span id="__span-47-3">
</span><span id="__span-47-4"><span class="k">class</span><span class="w"> </span><span class="nc">CustomViewOperator</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">Operator</span><span class="p">):</span>
</span><span id="__span-47-5">    <span class="nd">@property</span>
</span><span id="__span-47-6">    <span class="k">def</span><span class="w"> </span><span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-47-7">        <span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="n">OperatorConfig</span><span class="p">(</span>
</span><span id="__span-47-8">            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;custom_view_operator&quot;</span><span class="p">,</span>
</span><span id="__span-47-9">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Custom View Operator&quot;</span><span class="p">,</span>
</span><span id="__span-47-10">        <span class="p">)</span>
</span><span id="__span-47-11">
</span><span id="__span-47-12">    <span class="k">def</span><span class="w"> </span><span class="nf">resolve_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-47-13">        <span class="n">inputs</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
</span><span id="__span-47-14">        <span class="n">inputs</span><span class="o">.</span><span class="n">str</span><span class="p">(</span>
</span><span id="__span-47-15">            <span class="s2">&quot;name&quot;</span><span class="p">,</span>
</span><span id="__span-47-16">            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Name&quot;</span><span class="p">,</span>
</span><span id="__span-47-17">            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;FiftyOne&quot;</span><span class="p">,</span>
</span><span id="__span-47-18">            <span class="c1"># provide the name of a registered component plugin</span>
</span><span id="__span-47-19">            <span class="n">view</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">component</span><span class="o">=</span><span class="s2">&quot;CustomOperatorView&quot;</span><span class="p">)</span>
</span><span id="__span-47-20">        <span class="p">)</span>
</span><span id="__span-47-21">        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
</span><span id="__span-47-22">
</span><span id="__span-47-23">    <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
</span><span id="__span-47-24">        <span class="k">return</span> <span class="p">{}</span>
</span></code></pre></div>
<h3 id="fiftyone-app-state">FiftyOne App state <a href="#fiftyone-app-state" title="Permalink to this headline">¶</a><a class="headerlink" href="#fiftyone-app-state" title="Permanent link">&para;</a></h3>
<p>There are a few ways to manage the state of your plugin. By default you should
defer to existing state management in the FiftyOne App.</p>
<p>For example, if you want to allow users to select samples, you can use the
<code>@fiftyone/state</code> package.</p>
<h4 id="interactivity-and-state">Interactivity and state <a href="#interactivity-and-state" title="Permalink to this headline">¶</a><a class="headerlink" href="#interactivity-and-state" title="Permanent link">&para;</a></h4>
<p>If your plugin only has internal state, you can use existing state management
to achieve your desired UX. For example, in a 3D visualizer, you might want to
use <a href="https://threejs.org">Three.js</a> and its object model, events, and state
management. Or just use your own React hooks to maintain your plugin components
internal state.</p>
<p>If you want to allow users to interact with other aspects of FiftyOne through
your plugin, you can use the <code>@fiftyone/state</code> package:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-48-1"><span class="o">//</span> <span class="n">note</span><span class="p">:</span> <span class="n">similar</span> <span class="n">to</span> <span class="n">react</span> <span class="n">hooks</span><span class="p">,</span> <span class="n">these</span> <span class="n">must</span> <span class="n">be</span> <span class="n">used</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">context</span>
</span><span id="__span-48-2"><span class="o">//</span> <span class="n">of</span> <span class="n">a</span> <span class="n">React</span> <span class="n">component</span>
</span><span id="__span-48-3">
</span><span id="__span-48-4"><span class="o">//</span> <span class="n">select</span> <span class="n">a</span> <span class="n">dataset</span>
</span><span id="__span-48-5"><span class="n">const</span> <span class="n">selectLabel</span> <span class="o">=</span> <span class="n">fos</span><span class="o">.</span><span class="n">useOnSelectLabel</span><span class="p">();</span>
</span><span id="__span-48-6">
</span><span id="__span-48-7"><span class="o">//</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">callback</span>
</span><span id="__span-48-8"><span class="n">selectLabel</span><span class="p">({</span> <span class="nb">id</span><span class="p">:</span> <span class="s2">&quot;labelId&quot;</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="s2">&quot;fieldName&quot;</span> <span class="p">});</span>
</span></code></pre></div>
<p>The example above shows how you can coordinate or surface existing features of
FiftyOne through your plugin via the <code>@fiftyone/state</code> package. This package
provides hooks to access and modify the state of the FiftyOne App.</p>
<h4 id="recoil-atoms-and-selectors">Recoil, atoms, and selectors <a href="#recoil-atoms-and-selectors" title="Permalink to this headline">¶</a><a class="headerlink" href="#recoil-atoms-and-selectors" title="Permanent link">&para;</a></h4>
<p>You can also use a combination of your own and fiftyone’s recoil <code>atoms</code> and
<code>selectors</code>.</p>
<p>Here’s an example the combines both approaches in a hook that you could call
from anywhere where hooks are supported (almost all plugin component types).</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-49-1"><span class="kn">import</span><span class="w"> </span><span class="p">{</span><span class="n">atom</span><span class="p">,</span> <span class="n">useRecoilValue</span><span class="p">,</span> <span class="n">useRecoilState</span><span class="p">}</span> <span class="kn">from</span><span class="w"> </span><span class="s1">&#39;recoil&#39;</span><span class="p">;</span>
</span><span id="__span-49-2">
</span><span id="__span-49-3"><span class="n">const</span> <span class="n">myPluginmyPluginFieldsState</span> <span class="o">=</span> <span class="n">atom</span><span class="p">({</span>
</span><span id="__span-49-4">    <span class="n">key</span><span class="p">:</span> <span class="s1">&#39;myPluginFields&#39;</span><span class="p">,</span>
</span><span id="__span-49-5">    <span class="n">default</span><span class="p">:</span> <span class="p">[]</span>
</span><span id="__span-49-6"><span class="p">})</span>
</span><span id="__span-49-7">
</span><span id="__span-49-8"><span class="n">function</span> <span class="n">useMyHook</span><span class="p">()</span> <span class="p">{</span>
</span><span id="__span-49-9">    <span class="n">const</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">useRecoilValue</span><span class="p">(</span><span class="n">fos</span><span class="o">.</span><span class="n">dataset</span><span class="p">);</span>
</span><span id="__span-49-10">    <span class="n">const</span> <span class="p">[</span><span class="n">fields</span><span class="p">,</span> <span class="n">setFields</span><span class="p">]</span> <span class="o">=</span> <span class="n">useRecoilState</span><span class="p">(</span><span class="n">myPluginFieldsState</span><span class="p">);</span>
</span><span id="__span-49-11">
</span><span id="__span-49-12">    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-49-13">        <span class="n">dataset</span><span class="p">,</span>
</span><span id="__span-49-14">        <span class="n">fields</span><span class="p">,</span>
</span><span id="__span-49-15">        <span class="n">addField</span><span class="p">:</span> <span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">setFields</span><span class="p">([</span><span class="o">...</span><span class="n">fields</span><span class="p">,</span> <span class="n">field</span><span class="p">])</span>
</span><span id="__span-49-16">    <span class="p">}</span>
</span><span id="__span-49-17"><span class="p">}</span>
</span></code></pre></div>
<h3 id="panel-state_1">Panel state <a href="#id29" title="Permalink to this headline">¶</a><a class="headerlink" href="#panel-state_1" title="Permanent link">&para;</a></h3>
<p>Plugins that provide <code>PluginComponentTypes.Panel</code> components should use the
<code>@fiftyone/spaces</code> package to manage their state. This package provides hooks
to allow plugins to manage the state of individual panel instances.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-50-1"><span class="kn">import</span><span class="w"> </span><span class="p">{</span> <span class="n">usePanelStatePartial</span><span class="p">,</span> <span class="n">usePanelTitle</span> <span class="p">}</span> <span class="kn">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/spaces&quot;</span><span class="p">;</span>
</span><span id="__span-50-2"><span class="kn">import</span><span class="w"> </span><span class="p">{</span> <span class="n">Button</span> <span class="p">}</span> <span class="kn">from</span><span class="w"> </span><span class="s1">&#39;@fiftyone/components&#39;</span><span class="p">;</span>
</span><span id="__span-50-3">
</span><span id="__span-50-4"><span class="o">//</span> <span class="ow">in</span> <span class="n">your</span> <span class="n">panel</span> <span class="n">component</span><span class="p">,</span> <span class="n">you</span> <span class="n">can</span> <span class="n">use</span> <span class="n">the</span> <span class="n">usePanelStatePartial</span> <span class="n">hook</span>
</span><span id="__span-50-5"><span class="o">//</span> <span class="n">to</span> <span class="n">read</span> <span class="ow">and</span> <span class="n">write</span> <span class="n">to</span> <span class="n">the</span> <span class="n">panel</span> <span class="n">state</span>
</span><span id="__span-50-6"><span class="n">function</span> <span class="n">MyPanel</span><span class="p">()</span> <span class="p">{</span>
</span><span id="__span-50-7">    <span class="n">const</span> <span class="p">[</span><span class="n">state</span><span class="p">,</span> <span class="n">setState</span><span class="p">]</span> <span class="o">=</span> <span class="n">usePanelStatePartial</span><span class="p">(</span><span class="s1">&#39;choice&#39;</span><span class="p">);</span>
</span><span id="__span-50-8">    <span class="n">const</span> <span class="n">setTitle</span> <span class="o">=</span> <span class="n">usePanelTitle</span><span class="p">();</span>
</span><span id="__span-50-9">
</span><span id="__span-50-10">    <span class="n">React</span><span class="o">.</span><span class="n">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span id="__span-50-11">      <span class="n">setTitle</span><span class="p">(</span><span class="err">`</span><span class="n">My</span> <span class="n">Panel</span><span class="p">:</span> <span class="err">$</span><span class="p">{</span><span class="n">state</span><span class="p">}</span><span class="err">`</span><span class="p">);</span>
</span><span id="__span-50-12">    <span class="p">},</span> <span class="p">[</span><span class="n">state</span><span class="p">]);</span>
</span><span id="__span-50-13">
</span><span id="__span-50-14">    <span class="k">return</span> <span class="p">(</span>
</span><span id="__span-50-15">      <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
</span><span id="__span-50-16">        <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">Choice</span><span class="p">:</span> <span class="p">{</span><span class="n">state</span><span class="p">}</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
</span><span id="__span-50-17">        <span class="o">&lt;</span><span class="n">Button</span> <span class="n">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="n">setState</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)}</span><span class="o">&gt;</span><span class="n">A</span><span class="o">&lt;/</span><span class="n">Button</span><span class="o">&gt;</span>
</span><span id="__span-50-18">        <span class="o">&lt;</span><span class="n">Button</span> <span class="n">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="n">setState</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)}</span><span class="o">&gt;</span><span class="n">B</span><span class="o">&lt;/</span><span class="n">Button</span><span class="o">&gt;</span>
</span><span id="__span-50-19">      <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span><span id="__span-50-20">    <span class="p">);</span>
</span><span id="__span-50-21"><span class="p">}</span>
</span></code></pre></div>
<h3 id="reading-settings-in-your-plugin">Reading settings in your plugin <a href="#reading-settings-in-your-plugin" title="Permalink to this headline">¶</a><a class="headerlink" href="#reading-settings-in-your-plugin" title="Permanent link">&para;</a></h3>
<p>Plugins may support two styles of configuration settings:</p>
<ul>
<li>
<p>System-wide plugin settings under the <code>plugins</code> key of your
<a href="../fiftyone_concepts/config.html#configuring-fiftyone-app">App config</a></p>
</li>
<li>
<p>Dataset-specific plugin settings for any subset of the above values on a
<a href="../fiftyone_concepts/using_datasets.html#dataset-app-config">dataset’s App config</a>.</p>
</li>
</ul>
<p>Plugin settings are used, for example, to allow the user to configure the
default camera position of FiftyOne’s builtin
<a href="../fiftyone_concepts/app.html#app-3d-visualizer-config">3D visualizer</a>.</p>
<p>Here’s an example of a system-wide plugin setting:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-51-1"><span class="o">//</span> <span class="n">app_config</span><span class="o">.</span><span class="n">json</span>
</span><span id="__span-51-2"><span class="p">{</span>
</span><span id="__span-51-3">  <span class="s2">&quot;plugins&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-51-4">    <span class="s2">&quot;my-plugin&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-51-5">      <span class="s2">&quot;mysetting&quot;</span><span class="p">:</span> <span class="s2">&quot;foo&quot;</span>
</span><span id="__span-51-6">    <span class="p">}</span>
</span><span id="__span-51-7">  <span class="p">}</span>
</span><span id="__span-51-8"><span class="p">}</span>
</span></code></pre></div>
<p>And here’s how to customize that setting for a particular dataset:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-52-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">fo</span>
</span><span id="__span-52-2">
</span><span id="__span-52-3"><span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
</span><span id="__span-52-4"><span class="n">dataset</span><span class="o">.</span><span class="n">app_config</span><span class="o">.</span><span class="n">plugins</span><span class="p">[</span><span class="s2">&quot;my-plugin&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;mysetting&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">}</span>
</span><span id="__span-52-5"><span class="n">dataset</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span></code></pre></div>
<p>In your plugin implementation, you can read settings with the <code>useSettings</code>
hook:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-53-1"><span class="n">const</span> <span class="p">{</span> <span class="n">mysetting</span> <span class="p">}</span> <span class="o">=</span> <span class="n">fop</span><span class="o">.</span><span class="n">useSettings</span><span class="p">(</span><span class="s2">&quot;my-plugin&quot;</span><span class="p">);</span>
</span></code></pre></div>
<p>Note</p>
<p>See the <a href="../fiftyone_concepts/config.html#configuring-plugins">this page</a> page for more information
about configuring plugins.</p>
<h3 id="querying-fiftyone">Querying FiftyOne <a href="#querying-fiftyone" title="Permalink to this headline">¶</a><a class="headerlink" href="#querying-fiftyone" title="Permanent link">&para;</a></h3>
<p>A typical use case for a JS plugin is to provide a unique way of visualizing
FiftyOne data. However some plugins may need to also fetch data in a unique way
to efficiently visualize it.</p>
<p>For example, a <code>PluginComponentType.Panel</code> plugin rendering a map of geo points
may need to fetch data relative to where the user is currently viewing. In
MongoDB, such a query would look like this:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-54-1"><span class="p">{</span>
</span><span id="__span-54-2">  <span class="err">$</span><span class="n">geoNear</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-54-3">    <span class="n">near</span><span class="p">:</span> <span class="p">{</span> <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">:</span> <span class="p">[</span> <span class="o">-</span><span class="mf">73.99279</span> <span class="p">,</span> <span class="mf">40.719296</span> <span class="p">]</span> <span class="p">},</span>
</span><span id="__span-54-4">    <span class="n">maxDistance</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span><span id="__span-54-5">    <span class="n">query</span><span class="p">:</span> <span class="p">{</span> <span class="n">category</span><span class="p">:</span> <span class="s2">&quot;Parks&quot;</span> <span class="p">},</span>
</span><span id="__span-54-6">  <span class="p">}</span>
</span><span id="__span-54-7"><span class="p">}</span>
</span></code></pre></div>
<p>In a FiftyOne plugin this same query can be performed using the
<code>useAggregation()</code> method of the plugin SDK:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-55-1"><span class="kn">import</span><span class="w"> </span><span class="o">*</span> <span class="k">as</span> <span class="n">fop</span> <span class="kn">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/plugins&quot;</span><span class="p">;</span>
</span><span id="__span-55-2"><span class="kn">import</span><span class="w"> </span><span class="o">*</span> <span class="k">as</span> <span class="n">fos</span> <span class="kn">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/state&quot;</span><span class="p">;</span>
</span><span id="__span-55-3"><span class="kn">import</span><span class="w"> </span><span class="o">*</span> <span class="k">as</span> <span class="n">foa</span> <span class="kn">from</span><span class="w"> </span><span class="s2">&quot;@fiftyone/aggregations&quot;</span><span class="p">;</span>
</span><span id="__span-55-4"><span class="kn">import</span><span class="w"> </span><span class="o">*</span> <span class="k">as</span> <span class="n">recoil</span> <span class="kn">from</span><span class="w"> </span><span class="s2">&quot;recoil&quot;</span><span class="p">;</span>
</span><span id="__span-55-5">
</span><span id="__span-55-6"><span class="n">function</span> <span class="n">useGeoDataNear</span><span class="p">()</span> <span class="p">{</span>
</span><span id="__span-55-7">    <span class="n">const</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">useRecoilValue</span><span class="p">(</span><span class="n">fos</span><span class="o">.</span><span class="n">dataset</span><span class="p">);</span>
</span><span id="__span-55-8">    <span class="n">const</span> <span class="n">view</span> <span class="o">=</span> <span class="n">useRecoilValue</span><span class="p">(</span><span class="n">fos</span><span class="o">.</span><span class="n">view</span><span class="p">);</span>
</span><span id="__span-55-9">    <span class="n">const</span> <span class="n">filters</span> <span class="o">=</span> <span class="n">useRecoilValue</span><span class="p">(</span><span class="n">fos</span><span class="o">.</span><span class="n">filters</span><span class="p">);</span>
</span><span id="__span-55-10">    <span class="n">const</span> <span class="p">[</span><span class="n">aggregate</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">isLoading</span><span class="p">]</span> <span class="o">=</span> <span class="n">foa</span><span class="o">.</span><span class="n">useAggregation</span><span class="p">({</span>
</span><span id="__span-55-11">        <span class="n">dataset</span><span class="p">,</span>
</span><span id="__span-55-12">        <span class="n">filters</span><span class="p">,</span>
</span><span id="__span-55-13">        <span class="n">view</span><span class="p">,</span>
</span><span id="__span-55-14">    <span class="p">});</span>
</span><span id="__span-55-15">    <span class="n">const</span> <span class="n">availableFields</span> <span class="o">=</span> <span class="n">findAvailableFields</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">sampleFields</span><span class="p">);</span>
</span><span id="__span-55-16">    <span class="n">const</span> <span class="p">[</span><span class="n">selectedField</span><span class="p">,</span> <span class="n">setField</span><span class="p">]</span> <span class="o">=</span> <span class="n">React</span><span class="o">.</span><span class="n">useState</span><span class="p">(</span><span class="n">availableFields</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span id="__span-55-17">
</span><span id="__span-55-18">    <span class="n">React</span><span class="o">.</span><span class="n">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span id="__span-55-19">        <span class="n">aggregate</span><span class="p">([</span>\
</span><span id="__span-55-20">            <span class="n">new</span> <span class="n">foa</span><span class="o">.</span><span class="n">aggregations</span><span class="o">.</span><span class="n">Values</span><span class="p">({</span>\
</span><span id="__span-55-21">                <span class="n">fieldOrExpr</span><span class="p">:</span> <span class="s2">&quot;location.point.coordinates&quot;</span><span class="p">,</span>\
</span><span id="__span-55-22">            <span class="p">}),</span>\
</span><span id="__span-55-23">        <span class="p">]);</span>
</span><span id="__span-55-24">    <span class="p">},</span> <span class="p">[]);</span>
</span><span id="__span-55-25">
</span><span id="__span-55-26">    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-55-27">        <span class="n">points</span><span class="p">,</span>
</span><span id="__span-55-28">        <span class="n">isLoading</span><span class="p">,</span>
</span><span id="__span-55-29">        <span class="n">setField</span><span class="p">,</span>
</span><span id="__span-55-30">        <span class="n">availableFields</span><span class="p">,</span>
</span><span id="__span-55-31">        <span class="n">selectedField</span><span class="p">,</span>
</span><span id="__span-55-32">    <span class="p">};</span>
</span><span id="__span-55-33"><span class="p">}</span>
</span><span id="__span-55-34">
</span><span id="__span-55-35"><span class="n">function</span> <span class="n">MapPlugin</span><span class="p">()</span> <span class="p">{</span>
</span><span id="__span-55-36">    <span class="n">const</span> <span class="p">{</span> <span class="n">points</span><span class="p">,</span> <span class="n">isLoading</span><span class="p">,</span> <span class="n">setField</span><span class="p">,</span> <span class="n">availableFields</span><span class="p">,</span> <span class="n">selectedField</span> <span class="p">}</span> <span class="o">=</span>
</span><span id="__span-55-37">        <span class="n">useGeoDataNear</span><span class="p">();</span>
</span><span id="__span-55-38">
</span><span id="__span-55-39">    <span class="k">return</span> <span class="p">(</span>
</span><span id="__span-55-40">        <span class="o">&lt;</span><span class="n">Map</span>
</span><span id="__span-55-41">            <span class="n">points</span><span class="o">=</span><span class="p">{</span><span class="n">points</span><span class="p">}</span>
</span><span id="__span-55-42">            <span class="n">onSelectField</span><span class="o">=</span><span class="p">{(</span><span class="n">f</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">setField</span><span class="p">(</span><span class="n">f</span><span class="p">)}</span>
</span><span id="__span-55-43">            <span class="n">selectedField</span><span class="o">=</span><span class="p">{</span><span class="n">selectedField</span><span class="p">}</span>
</span><span id="__span-55-44">            <span class="n">locationFields</span><span class="o">=</span><span class="p">{</span><span class="n">availableFields</span><span class="p">}</span>
</span><span id="__span-55-45">        <span class="o">/&gt;</span>
</span><span id="__span-55-46">    <span class="p">);</span>
</span><span id="__span-55-47"><span class="p">}</span>
</span><span id="__span-55-48">
</span><span id="__span-55-49"><span class="n">fop</span><span class="o">.</span><span class="n">registerComponent</span><span class="p">({</span>
</span><span id="__span-55-50">    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;MapPlugin&quot;</span><span class="p">,</span>
</span><span id="__span-55-51">    <span class="n">label</span><span class="p">:</span> <span class="s2">&quot;Map&quot;</span><span class="p">,</span>
</span><span id="__span-55-52">    <span class="n">activator</span><span class="p">:</span> <span class="p">({</span> <span class="n">dataset</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="n">findAvailableFields</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span><span class="o">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="__span-55-53"><span class="p">});</span>
</span></code></pre></div>
<h2 id="plugin-runtime">Plugin runtime <a href="#plugin-runtime" title="Permalink to this headline">¶</a><a class="headerlink" href="#plugin-runtime" title="Permanent link">&para;</a></h2>
<h3 id="js-runtime">JS runtime <a href="#js-runtime" title="Permalink to this headline">¶</a><a class="headerlink" href="#js-runtime" title="Permanent link">&para;</a></h3>
<p>In JS, plugins are loaded from your
<a href="using_plugins.html#plugins-directory">plugins directory</a> into the browser. The FiftyOne App
server finds these plugins by looking for <code>package.json</code> files that include
<code>fiftyone</code> as a property. This <code>fiftyone</code> property describes where the plugin
executable (dist) is.</p>
<h3 id="python-runtime">Python runtime <a href="#python-runtime" title="Permalink to this headline">¶</a><a class="headerlink" href="#python-runtime" title="Permanent link">&para;</a></h3>
<p>Python operators are executed in two ways:</p>
<h4 id="immediate-execution">Immediate execution <a href="#immediate-execution" title="Permalink to this headline">¶</a><a class="headerlink" href="#immediate-execution" title="Permanent link">&para;</a></h4>
<p>By default, all operations are executed by the plugin server immediately after
they are triggered, either programmatically or by the user in the App.</p>
<p>The plugin server is launched by the FiftyOne App as a subprocess that is
responsible for loading plugins and executing them. The plugin server is only
accessible via ipc. Its interface (similar to JSON rpc) allows for functions to
be called over interprocess communication. This allows for user python code to
be isolated from core code. It also allows for the operating system to manage
the separate process as it exists in the same process tree as the root process
(ipython, Jupyter, etc).</p>
<h4 id="delegated-execution_1">Delegated execution <a href="#id31" title="Permalink to this headline">¶</a><a class="headerlink" href="#delegated-execution_1" title="Permanent link">&para;</a></h4>
<p>Python operations may also be <a href="#operator-delegated-execution">delegated</a>
for execution in the background.</p>
<p>When an operation is delegated, the following happens:</p>
<ol>
<li>
<p>The operation’s <a href="#operator-execution-context">execution context</a> is
serialized and stored in the database</p>
</li>
<li>
<p>The <a href="using_plugins.html#delegated-orchestrator">connected orchestrator</a> picks up the
task and executes it when resources are available</p>
</li>
</ol>
<h2 id="advanced-usage">Advanced usage <a href="#advanced-usage" title="Permalink to this headline">¶</a><a class="headerlink" href="#advanced-usage" title="Permanent link">&para;</a></h2>
<h3 id="storing-custom-runs">Storing custom runs <a href="#storing-custom-runs" title="Permalink to this headline">¶</a><a class="headerlink" href="#storing-custom-runs" title="Permanent link">&para;</a></h3>
<p>When users execute builtin methods like
<a href="../fiftyone_concepts/annotation.html#fiftyone-annotation">annotation</a>,
<a href="../fiftyone_concepts/evaluation.html#evaluating-models">evaluation</a>, and
<a href="../brain.html#fiftyone-brain">brain methods</a> on their datasets, certain configuration
and results information is stored on the dataset that can be accessed later;
for example, see <a href="../brain.html#brain-managing-runs">managing brain runs</a>.</p>
<p>FiftyOne also provides the ability to store <em>custom runs</em> on datasets, which
can be used by plugin developers to persist arbitrary application-specific
information that can be accessed later by users and/or plugins.</p>
<p>The interface for creating custom runs is simple:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-56-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">fo</span>
</span><span id="__span-56-2">
</span><span id="__span-56-3"><span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="s2">&quot;custom-runs-example&quot;</span><span class="p">)</span>
</span><span id="__span-56-4"><span class="n">dataset</span><span class="o">.</span><span class="n">persistent</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-56-5">
</span><span id="__span-56-6"><span class="n">config</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">init_run</span><span class="p">()</span>
</span><span id="__span-56-7"><span class="n">config</span><span class="o">.</span><span class="n">foo</span> <span class="o">=</span> <span class="s2">&quot;bar&quot;</span>  <span class="c1"># add as many key-value pairs as you need</span>
</span><span id="__span-56-8">
</span><span id="__span-56-9"><span class="c1"># Also possible</span>
</span><span id="__span-56-10"><span class="c1"># config = fo.RunConfig(foo=&quot;bar&quot;)</span>
</span><span id="__span-56-11">
</span><span id="__span-56-12"><span class="n">dataset</span><span class="o">.</span><span class="n">register_run</span><span class="p">(</span><span class="s2">&quot;custom&quot;</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="__span-56-13">
</span><span id="__span-56-14"><span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">init_run_results</span><span class="p">(</span><span class="s2">&quot;custom&quot;</span><span class="p">)</span>
</span><span id="__span-56-15"><span class="n">results</span><span class="o">.</span><span class="n">spam</span> <span class="o">=</span> <span class="s2">&quot;eggs&quot;</span>  <span class="c1"># add as many key-value pairs as you need</span>
</span><span id="__span-56-16">
</span><span id="__span-56-17"><span class="c1"># Also possible</span>
</span><span id="__span-56-18"><span class="c1"># results = fo.RunResults(dataset, config, &quot;custom&quot;, spam=&quot;eggs&quot;)</span>
</span><span id="__span-56-19">
</span><span id="__span-56-20"><span class="n">dataset</span><span class="o">.</span><span class="n">save_run_results</span><span class="p">(</span><span class="s2">&quot;custom&quot;</span><span class="p">,</span> <span class="n">results</span><span class="p">)</span>
</span></code></pre></div>
<p>Note</p>
<p><a href="../api/fiftyone.core.runs.html#fiftyone.core.runs.RunConfig" title="fiftyone.core.runs.RunConfig"><code>RunConfig</code></a> and
<a href="../api/fiftyone.core.runs.html#fiftyone.core.runs.RunResults" title="fiftyone.core.runs.RunResults"><code>RunResults</code></a> can store any JSON
serializable values.</p>
<p><a href="../api/fiftyone.core.runs.html#fiftyone.core.runs.RunConfig" title="fiftyone.core.runs.RunConfig"><code>RunConfig</code></a> documents must be less
than 16MB, although they are generally far smaller as they are intended to
store only a handful of simple parameters.</p>
<p><a href="../api/fiftyone.core.runs.html#fiftyone.core.runs.RunResults" title="fiftyone.core.runs.RunResults"><code>RunResults</code></a> instances are stored in
<a href="https://www.mongodb.com/docs/manual/core/gridfs">GridFS</a> and may exceed
16MB. They are only loaded when specifically accessed by a user.</p>
<p>You can access custom runs at any time as follows:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-57-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">fo</span>
</span><span id="__span-57-2">
</span><span id="__span-57-3"><span class="n">dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;custom-runs-example&quot;</span><span class="p">)</span>
</span><span id="__span-57-4">
</span><span id="__span-57-5"><span class="n">info</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_run_info</span><span class="p">(</span><span class="s2">&quot;custom&quot;</span><span class="p">)</span>
</span><span id="__span-57-6"><span class="nb">print</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
</span><span id="__span-57-7">
</span><span id="__span-57-8"><span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_run_results</span><span class="p">(</span><span class="s2">&quot;custom&quot;</span><span class="p">)</span>
</span><span id="__span-57-9"><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-58-1"><span class="p">{</span>
</span><span id="__span-58-2">    <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;custom&quot;</span><span class="p">,</span>
</span><span id="__span-58-3">    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.22.3&quot;</span><span class="p">,</span>
</span><span id="__span-58-4">    <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2023-10-26T13:29:20.837595&quot;</span><span class="p">,</span>
</span><span id="__span-58-5">    <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-58-6">        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;run&quot;</span><span class="p">,</span>
</span><span id="__span-58-7">        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
</span><span id="__span-58-8">        <span class="s2">&quot;cls&quot;</span><span class="p">:</span> <span class="s2">&quot;fiftyone.core.runs.RunConfig&quot;</span><span class="p">,</span>
</span><span id="__span-58-9">        <span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span>
</span><span id="__span-58-10">    <span class="p">}</span>
</span><span id="__span-58-11"><span class="p">}</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-59-1"><span class="p">{</span>
</span><span id="__span-59-2">    <span class="s2">&quot;cls&quot;</span><span class="p">:</span> <span class="s2">&quot;fiftyone.core.runs.RunResults&quot;</span><span class="p">,</span>
</span><span id="__span-59-3">    <span class="s2">&quot;spam&quot;</span><span class="p">:</span> <span class="s2">&quot;eggs&quot;</span>
</span><span id="__span-59-4"><span class="p">}</span>
</span></code></pre></div>
<h3 id="managing-custom-runs">Managing custom runs <a href="#managing-custom-runs" title="Permalink to this headline">¶</a><a class="headerlink" href="#managing-custom-runs" title="Permanent link">&para;</a></h3>
<p>FiftyOne provides a variety of methods that you can use to manage custom runs
stored on datasets.</p>
<p>Call
<a href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.list_runs" title="fiftyone.core.collections.SampleCollection.list_runs"><code>list_runs()</code></a>
to see the available custom run keys on a dataset:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-60-1"><span class="n">dataset</span><span class="o">.</span><span class="n">list_runs</span><span class="p">()</span>
</span></code></pre></div>
<p>Use
<a href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.get_run_info" title="fiftyone.core.collections.SampleCollection.get_run_info"><code>get_run_info()</code></a>
to retrieve information about the configuration of a custom run:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-61-1"><span class="n">info</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_run_info</span><span class="p">(</span><span class="n">run_key</span><span class="p">)</span>
</span><span id="__span-61-2"><span class="nb">print</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
</span></code></pre></div>
<p>Use <a href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.init_run" title="fiftyone.core.collections.SampleCollection.init_run"><code>init_run()</code></a>
and
<a href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.register_run" title="fiftyone.core.collections.SampleCollection.register_run"><code>register_run()</code></a>
to create a new custom run on a dataset:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-62-1"><span class="n">config</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">init_run</span><span class="p">()</span>
</span><span id="__span-62-2"><span class="n">config</span><span class="o">.</span><span class="n">foo</span> <span class="o">=</span> <span class="s2">&quot;bar&quot;</span>  <span class="c1"># add as many key-value pairs as you need</span>
</span><span id="__span-62-3">
</span><span id="__span-62-4"><span class="n">dataset</span><span class="o">.</span><span class="n">register_run</span><span class="p">(</span><span class="n">run_key</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span></code></pre></div>
<p>Use
<a href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.update_run_config" title="fiftyone.core.collections.SampleCollection.update_run_config"><code>update_run_config()</code></a>
to update the run config associated with an existing custom run:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-63-1"><span class="n">dataset</span><span class="o">.</span><span class="n">update_run_config</span><span class="p">(</span><span class="n">run_key</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span></code></pre></div>
<p>Use
<a href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.init_run_results" title="fiftyone.core.collections.SampleCollection.init_run_results"><code>init_run_results()</code></a>
and
<a href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.save_run_results" title="fiftyone.core.collections.SampleCollection.save_run_results"><code>save_run_results()</code></a>
to store run results for a custom run:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-64-1"><span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">init_run_results</span><span class="p">(</span><span class="n">run_key</span><span class="p">)</span>
</span><span id="__span-64-2"><span class="n">results</span><span class="o">.</span><span class="n">spam</span> <span class="o">=</span> <span class="s2">&quot;eggs&quot;</span>  <span class="c1"># add as many key-value pairs as you need</span>
</span><span id="__span-64-3">
</span><span id="__span-64-4"><span class="n">dataset</span><span class="o">.</span><span class="n">save_run_results</span><span class="p">(</span><span class="n">run_key</span><span class="p">,</span> <span class="n">results</span><span class="p">)</span>
</span><span id="__span-64-5">
</span><span id="__span-64-6"><span class="c1"># update existing results</span>
</span><span id="__span-64-7"><span class="n">dataset</span><span class="o">.</span><span class="n">save_run_results</span><span class="p">(</span><span class="n">run_key</span><span class="p">,</span> <span class="n">results</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></code></pre></div>
<p>Use
<a href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.load_run_results" title="fiftyone.core.collections.SampleCollection.load_run_results"><code>load_run_results()</code></a>
to load the results for a custom run:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-65-1"><span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">load_run_results</span><span class="p">(</span><span class="n">run_key</span><span class="p">)</span>
</span></code></pre></div>
<p>Use
<a href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.rename_run" title="fiftyone.core.collections.SampleCollection.rename_run"><code>rename_run()</code></a>
to rename the run key associated with an existing custom run:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-66-1"><span class="n">dataset</span><span class="o">.</span><span class="n">rename_run</span><span class="p">(</span><span class="n">run_key</span><span class="p">,</span> <span class="n">new_run_key</span><span class="p">)</span>
</span></code></pre></div>
<p>Use
<a href="../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.delete_run" title="fiftyone.core.collections.SampleCollection.delete_run"><code>delete_run()</code></a>
to delete the record of a custom run from a dataset:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-67-1"><span class="n">dataset</span><span class="o">.</span><span class="n">delete_run</span><span class="p">(</span><span class="n">run_key</span><span class="p">)</span>
</span></code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.path", "navigation.indexes", "navigation.top", {"icon": {"repo": "fontawesome/brands/github"}}, "content.action.edit"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>