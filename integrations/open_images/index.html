
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../_static/images/icons/voxel51-166px.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Open Images Integration ¶ - Voxel51 Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../_static/css/voxel51-docs.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#open-images-integration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Voxel51 Documentation" class="md-header__button md-logo" aria-label="Voxel51 Documentation" data-md-component="logo">
      
  <img src="../../_static/images/voxel51-logo-white-300.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Voxel51 Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Open Images Integration ¶
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/thesteve0/vdoc-mkdocs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Voxel51 Documentation" class="md-nav__button md-logo" aria-label="Voxel51 Documentation" data-md-component="logo">
      
  <img src="../../_static/images/voxel51-logo-white-300.png" alt="logo">

    </a>
    Voxel51 Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/thesteve0/vdoc-mkdocs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../getting_started/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/basic/install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../getting_started/basic/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Basics
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Basics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/basic/install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/basic/virtualenv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtualenvs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/basic/datasets_samples_fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Datasets, Samples, and Fields
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/basic/application_tour/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tour of the Application
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/basic/viz_embeddings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visualizing Embeddings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/basic/subset_sample/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Subsetting and Sample Data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/basic/zero_shot_label/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zero Shot Classification for Labeling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/basic/edit_fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating and Editing Fields and Labels
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/basic/fine_tuning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Fine-Tuning
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/basic/model_eval/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Evaluation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/basic/next_steps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What's Next
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/basic/troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../getting_started/focused_getting_starteds/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Focused Getting Starteds
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Focused Getting Starteds
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/focused_getting_starteds/medical_imaging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Medical Imaging
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../fiftyone_concepts/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    FiftyOne Concepts
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            FiftyOne Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/running_environments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running Environments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../fiftyone_concepts/dataset_creation/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Loading Data into FiftyOne
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Loading Data into FiftyOne
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/dataset_creation/datasets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Datasets from Disk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/dataset_creation/samples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Sample Parsers
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/using_datasets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Datasets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/using_views/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dataset Views
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/groups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Grouped Datasets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using the App
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/annotation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotating Datasets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/evaluation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluating Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/using_aggregations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Aggregations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/plots/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interactive Plots
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/export_datasets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exporting Datasets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/draw_labels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Drawing Labels on Samples
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring FiftyOne
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/brain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Machine Learning (FiftyOne Brain)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../how_do_i/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    How Do I
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            How Do I
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_do_i/cheat_sheets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cheat Sheets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_do_i/recipes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Recipes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../data/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Data
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Data
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../data/dataset_zoo/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Zoo Datasets
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Zoo Datasets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/dataset_zoo/datasets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Built-In Zoo Datasets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/dataset_zoo/remote/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remotely-Sourced Zoo Datasets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/dataset_zoo/api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zoo Data API
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/hugging_face_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hugging Face Datasets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../models/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Models
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../models/model_zoo/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Zoo Models
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            Zoo Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/model_zoo/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Built-in Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/model_zoo/remote/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remote Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/model_zoo/design/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/model_zoo/api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/hugging_face_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hugging Face Datasets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../plugins/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Plugins
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Plugins
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/using_plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Plugins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/developing_plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developing Plugins
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Integrations
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Integrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
        
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../references/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    References
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_10" id="__nav_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            References
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ts-api/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TypeScript API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../community/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Community
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../teams/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FiftyOne Teams
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Releases
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../faq/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_14" id="__nav_14_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            FAQ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#loading-open-images" class="md-nav__link">
    <span class="md-ellipsis">
      Loading Open Images ¶
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#open-images-style-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Open Images-style evaluation ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Open Images-style evaluation ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Example evaluation ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map-and-pr-curves" class="md-nav__link">
    <span class="md-ellipsis">
      mAP and PR curves ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#confusion-matrices" class="md-nav__link">
    <span class="md-ellipsis">
      Confusion matrices ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#open-images-challenge" class="md-nav__link">
    <span class="md-ellipsis">
      Open Images Challenge ¶
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#map-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      mAP protocol ¶
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/thesteve0/vdoc-mkdocs/blob/main/docs/integrations/open_images.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="open-images-integration">Open Images Integration <a href="#open-images-integration" title="Permalink to this headline">¶</a><a class="headerlink" href="#open-images-integration" title="Permanent link">&para;</a></h1>
<p>We’ve collaborated with the team behind the
<a href="https://storage.googleapis.com/openimages/web/download.html">Open Images Dataset</a>
to make it easy to download, visualize, and evaluate on the Open Images dataset
natively in FiftyOne!</p>
<p>Note</p>
<p>Check out <a href="../tutorials/open_images.md">this tutorial</a> to see how you can
use FiftyOne to download and evaluate models on Open Images.</p>
<p><img alt="open-images-v6" src="../../_images/open-images-v6.png" /></p>
<h2 id="loading-open-images">Loading Open Images <a href="#loading-open-images" title="Permalink to this headline">¶</a><a class="headerlink" href="#loading-open-images" title="Permanent link">&para;</a></h2>
<p>The FiftyOne Dataset Zoo provides support for loading the
<a href="../../data/dataset_zoo/datasets/#dataset-zoo-open-images-v6">Open Images V6</a> and
<a href="../../data/dataset_zoo/datasets/#dataset-zoo-open-images-v7">Open Images V7</a> datasets.</p>
<p>Like all other zoo datasets, you can use
<a href="../../api/fiftyone.zoo.datasets.html#fiftyone.zoo.datasets.load_zoo_dataset" title="fiftyone.zoo.datasets.load_zoo_dataset"><code>load_zoo_dataset()</code></a> to download
and load an Open Images V7 split into FiftyOne:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">fo</span>
</span><span id="__span-0-2"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.zoo</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">foz</span>
</span><span id="__span-0-3">
</span><span id="__span-0-4"><span class="c1"># Download and load the validation split of Open Images V7</span>
</span><span id="__span-0-5"><span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;open-images-v7&quot;</span><span class="p">,</span> <span class="n">split</span><span class="o">=</span><span class="s2">&quot;validation&quot;</span><span class="p">)</span>
</span><span id="__span-0-6">
</span><span id="__span-0-7"><span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</span></code></pre></div>
<p>Note</p>
<p>FiftyOne supports loading annotations for classification, detection,
segmentation, and visual relationship tasks for the 600 boxable classes
( <a href="https://storage.googleapis.com/openimages/web/factsfigures.html">cf. dataset overview</a>).</p>
<p>By default, all label types are loaded, but you can customize this via the
optional <code>label_types</code> argument (see below for details).</p>
<p>In addition, FiftyOne provides parameters that can be used to efficiently
download specific subsets of the Open Images dataset, allowing you to quickly
explore different slices of the dataset without downloading the entire split.</p>
<p>When performing partial downloads, FiftyOne will use existing downloaded data
first if possible before resorting to downloading additional data from the web.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">fo</span>
</span><span id="__span-1-2"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.zoo</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">foz</span>
</span><span id="__span-1-3">
</span><span id="__span-1-4"><span class="c1">#</span>
</span><span id="__span-1-5"><span class="c1"># Load 50 random samples from the validation split of Open Images V7.</span>
</span><span id="__span-1-6"><span class="c1">#</span>
</span><span id="__span-1-7"><span class="c1"># Only the required images will be downloaded (if necessary).</span>
</span><span id="__span-1-8"><span class="c1"># By default, all label types are loaded</span>
</span><span id="__span-1-9"><span class="c1">#</span>
</span><span id="__span-1-10">
</span><span id="__span-1-11"><span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span>
</span><span id="__span-1-12">    <span class="s2">&quot;open-images-v7&quot;</span><span class="p">,</span>
</span><span id="__span-1-13">    <span class="n">split</span><span class="o">=</span><span class="s2">&quot;validation&quot;</span><span class="p">,</span>
</span><span id="__span-1-14">    <span class="n">max_samples</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
</span><span id="__span-1-15">    <span class="n">shuffle</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-1-16"><span class="p">)</span>
</span><span id="__span-1-17">
</span><span id="__span-1-18"><span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</span><span id="__span-1-19">
</span><span id="__span-1-20"><span class="c1">#</span>
</span><span id="__span-1-21"><span class="c1"># Load detections and classifications for 25 samples from the</span>
</span><span id="__span-1-22"><span class="c1"># validation split of Open Images V6 that contain fedoras and pianos</span>
</span><span id="__span-1-23"><span class="c1">#</span>
</span><span id="__span-1-24"><span class="c1"># Images that contain all `label_types` and `classes` will be</span>
</span><span id="__span-1-25"><span class="c1"># prioritized first, followed by images that contain at least one of</span>
</span><span id="__span-1-26"><span class="c1"># the required `classes`. If there are not enough images matching</span>
</span><span id="__span-1-27"><span class="c1"># `classes` in the split to meet `max_samples`, only the available</span>
</span><span id="__span-1-28"><span class="c1"># images will be loaded.</span>
</span><span id="__span-1-29"><span class="c1">#</span>
</span><span id="__span-1-30"><span class="c1"># Images will only be downloaded if necessary</span>
</span><span id="__span-1-31"><span class="c1">#</span>
</span><span id="__span-1-32">
</span><span id="__span-1-33"><span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span>
</span><span id="__span-1-34">    <span class="s2">&quot;open-images-v6&quot;</span><span class="p">,</span>
</span><span id="__span-1-35">    <span class="n">split</span><span class="o">=</span><span class="s2">&quot;validation&quot;</span><span class="p">,</span>
</span><span id="__span-1-36">    <span class="n">label_types</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;detections&quot;</span><span class="p">,</span> <span class="s2">&quot;classifications&quot;</span><span class="p">],</span>
</span><span id="__span-1-37">    <span class="n">classes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Fedora&quot;</span><span class="p">,</span> <span class="s2">&quot;Piano&quot;</span><span class="p">],</span>
</span><span id="__span-1-38">    <span class="n">max_samples</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
</span><span id="__span-1-39"><span class="p">)</span>
</span><span id="__span-1-40">
</span><span id="__span-1-41"><span class="n">session</span><span class="o">.</span><span class="n">dataset</span> <span class="o">=</span> <span class="n">dataset</span>
</span><span id="__span-1-42">
</span><span id="__span-1-43"><span class="c1">#</span>
</span><span id="__span-1-44"><span class="c1"># Load classifications and point labels for all samples from the</span>
</span><span id="__span-1-45"><span class="c1"># validation split of Open Images V7 with class &quot;Turtle&quot; or &quot;Tortoise&quot;.</span>
</span><span id="__span-1-46"><span class="c1">#</span>
</span><span id="__span-1-47"><span class="c1"># If there are not enough images matching classes` in the split to</span>
</span><span id="__span-1-48"><span class="c1"># meet `max_samples`, only the available images will be loaded.</span>
</span><span id="__span-1-49"><span class="c1">#</span>
</span><span id="__span-1-50"><span class="c1"># Images will only be downloaded if necessary</span>
</span><span id="__span-1-51"><span class="c1">#</span>
</span><span id="__span-1-52">
</span><span id="__span-1-53"><span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span>
</span><span id="__span-1-54">    <span class="s2">&quot;open-images-v7&quot;</span><span class="p">,</span>
</span><span id="__span-1-55">    <span class="n">split</span><span class="o">=</span><span class="s2">&quot;validation&quot;</span><span class="p">,</span>
</span><span id="__span-1-56">    <span class="n">label_types</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;points&quot;</span><span class="p">,</span> <span class="s2">&quot;classifications&quot;</span><span class="p">],</span>
</span><span id="__span-1-57">    <span class="n">classes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Turtle&quot;</span><span class="p">,</span> <span class="s2">&quot;Tortoise&quot;</span><span class="p">],</span>
</span><span id="__span-1-58"><span class="p">)</span>
</span><span id="__span-1-59">
</span><span id="__span-1-60"><span class="n">session</span><span class="o">.</span><span class="n">dataset</span> <span class="o">=</span> <span class="n">dataset</span>
</span></code></pre></div>
<p>The following parameters are available to configure a partial download of Open
Images V6 or Open Images V7 by passing them to
<a href="../../api/fiftyone.zoo.datasets.html#fiftyone.zoo.datasets.load_zoo_dataset" title="fiftyone.zoo.datasets.load_zoo_dataset"><code>load_zoo_dataset()</code></a>:</p>
<ul>
<li>
<p><strong>split</strong> ( <em>None</em>) and <strong>splits</strong> ( <em>None</em>): a string or list of strings,
respectively, specifying the splits to load. Supported values are
<code>("train", "test", "validation")</code>. If neither is provided, all available
splits are loaded</p>
</li>
<li>
<p><strong>label_types</strong> ( <em>None</em>): a label type or list of label types to load.
Supported values for Open Images V6 are
<code>("detections", "classifications", "relationships", "segmentations")</code>.
Open Images V7 also supports <code>"points"</code> labels. By default, all labels types are loaded</p>
</li>
<li>
<p><strong>classes</strong> ( <em>None</em>): a string or list of strings specifying required
classes to load. If provided, only samples containing at least one instance
of a specified class will be loaded. You can use
<a href="../../api/fiftyone.utils.openimages.html#fiftyone.utils.openimages.get_classes" title="fiftyone.utils.openimages.get_classes"><code>get_classes()</code></a> and
<a href="../../api/fiftyone.utils.openimages.html#fiftyone.utils.openimages.get_segmentation_classes" title="fiftyone.utils.openimages.get_segmentation_classes"><code>get_segmentation_classes()</code></a>
to see the available classes and segmentation classes, respectively</p>
</li>
<li>
<p><strong>attrs</strong> ( <em>None</em>): a string or list of strings specifying required
relationship attributes to load. This parameter is only applicable if
<code>label_types</code> contains <code>"relationships"</code>. If provided, only samples
containing at least one instance of a specified attribute will be loaded.
You can use
<a href="../../api/fiftyone.utils.openimages.html#fiftyone.utils.openimages.get_attributes" title="fiftyone.utils.openimages.get_attributes"><code>get_attributes()</code></a>
to see the available attributes</p>
</li>
<li>
<p><strong>image_ids</strong> ( <em>None</em>): a list of specific image IDs to load. The IDs can
be specified either as <code>&lt;split&gt;/&lt;image-id&gt;</code> or <code>&lt;image-id&gt;</code> strings.
Alternatively, you can provide the path to a TXT (newline-separated), JSON,
or CSV file containing the list of image IDs to load in either of the first
two formats</p>
</li>
<li>
<p><strong>include_id</strong> ( <em>True</em>): whether to include the Open Images ID of each
sample in the loaded labels</p>
</li>
<li>
<p><strong>only_matching</strong> ( <em>False</em>): whether to only load labels that match the
<code>classes</code> or <code>attrs</code> requirements that you provide (True), or to load
all labels for samples that match the requirements (False)</p>
</li>
<li>
<p><strong>num_workers</strong> ( <em>None</em>): the number of processes to use when downloading
individual images. By default, <code>multiprocessing.cpu_count()</code> is used</p>
</li>
<li>
<p><strong>shuffle</strong> ( <em>False</em>): whether to randomly shuffle the order in which
samples are chosen for partial downloads</p>
</li>
<li>
<p><strong>seed</strong> ( <em>None</em>): a random seed to use when shuffling</p>
</li>
<li>
<p><strong>max_samples</strong> ( <em>None</em>): a maximum number of samples to load per split. If
<code>label_types</code>, <code>classes</code>, and/or <code>attrs</code> are also specified, first
priority will be given to samples that contain all of the specified label
types, classes, and/or attributes, followed by samples that contain at
least one of the specified labels types or classes. The actual number of
samples loaded may be less than this maximum value if the dataset does not
contain sufficient samples matching your requirements</p>
</li>
</ul>
<p>Note</p>
<p>See
<a href="../../api/fiftyone.zoo.datasets.base.html#fiftyone.zoo.datasets.base.OpenImagesV6Dataset" title="fiftyone.zoo.datasets.base.OpenImagesV6Dataset"><code>OpenImagesV7Dataset</code></a>
,
<a href="../../api/fiftyone.zoo.datasets.base.html#fiftyone.zoo.datasets.base.OpenImagesV7Dataset" title="fiftyone.zoo.datasets.base.OpenImagesV7Dataset"><code>OpenImagesV7Dataset</code></a>
and <a href="../../api/fiftyone.utils.openimages.html#fiftyone.utils.openimages.OpenImagesDatasetImporter" title="fiftyone.utils.openimages.OpenImagesDatasetImporter"><code>OpenImagesDatasetImporter</code></a>
for complete descriptions of the optional keyword arguments that you can
pass to <a href="../../api/fiftyone.zoo.datasets.html#fiftyone.zoo.datasets.load_zoo_dataset" title="fiftyone.zoo.datasets.load_zoo_dataset"><code>load_zoo_dataset()</code></a>.</p>
<h2 id="open-images-style-evaluation">Open Images-style evaluation <a href="#open-images-style-evaluation" title="Permalink to this headline">¶</a><a class="headerlink" href="#open-images-style-evaluation" title="Permanent link">&para;</a></h2>
<p>The <a href="../../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.evaluate_detections" title="fiftyone.core.collections.SampleCollection.evaluate_detections"><code>evaluate_detections()</code></a>
method provides builtin support for running
<a href="https://storage.googleapis.com/openimages/web/evaluation.html">Open Images-style evaluation</a>.</p>
<p>In order to run Open Images-style evaluation, simply set the <code>method</code>
parameter to <code>"open-images"</code>.</p>
<p>Note</p>
<p>FiftyOne’s implementation of Open Images-style evaluation matches the
reference implementation available via the
<a href="https://github.com/tensorflow/models/tree/master/research/object_detection">TF Object Detection API</a>.</p>
<h3 id="overview">Overview <a href="#overview" title="Permalink to this headline">¶</a><a class="headerlink" href="#overview" title="Permanent link">&para;</a></h3>
<p>Open Images-style evaluation provides additional features not found in
<a href="../../fiftyone_concepts/evaluation/#evaluating-detections-coco">COCO-style evaluation</a> that you may find
useful when evaluating your custom datasets.</p>
<p>The two primary differences are:</p>
<ul>
<li>
<p><strong>Non-exhaustive image labeling:</strong> positive and negative sample-level
<a href="../../api/fiftyone.core.labels.html#fiftyone.core.labels.Classifications" title="fiftyone.core.labels.Classifications"><code>Classifications</code></a> fields can be provided to indicate which object classes
were considered when annotating the image. Predicted objects whose classes
are not included in the sample-level labels for a sample are ignored.
The names of these fields can be specified via the <code>pos_label_field</code> and
<code>neg_label_field</code> parameters</p>
</li>
<li>
<p><strong>Class hierarchies:</strong> If your dataset includes a
<a href="https://storage.googleapis.com/openimages/2018_04/bbox_labels_600_hierarchy_visualizer/circle.html">class hierarchy</a>,
you can configure this evaluation protocol to automatically expand ground
truth and/or predicted leaf classes so that all levels of the hierarchy can
be <a href="https://storage.googleapis.com/openimages/web/evaluation.html">correctly evaluated</a>.
You can provide a label hierarchy via the <code>hierarchy</code> parameter. By
default, if you provide a hierarchy, then image-level label fields and
ground truth detections will be expanded to incorporate parent classes
(child classes for negative image-level labels). You can disable this
feature by setting the <code>expand_gt_hierarchy</code> parameter to <code>False</code>.
Alternatively, you can expand predictions by setting the
<code>expand_pred_hierarchy</code> parameter to <code>True</code></p>
</li>
</ul>
<p>In addition, note that:</p>
<ul>
<li>
<p>Like <a href="http://host.robots.ox.ac.uk/pascal/VOC/voc2010/devkit_doc_08-May-2010.pdf">VOC-style evaluation</a>,
only one IoU (default = 0.5) is used to calculate mAP. You can customize
this value via the <code>iou</code> parameter</p>
</li>
<li>
<p>When dealing with crowd objects, Open Images-style evaluation dictates that
if a crowd is matched with multiple predictions, each counts as one true
positive when computing mAP</p>
</li>
</ul>
<p>When you specify an <code>eval_key</code> parameter, a number of helpful fields will be
populated on each sample and its predicted/ground truth objects:</p>
<ul>
<li>True positive (TP), false positive (FP), and false negative (FN) counts
for the each sample are saved in top-level fields of each sample:</li>
</ul>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><span class="n">TP</span><span class="p">:</span> <span class="n">sample</span><span class="o">.&lt;</span><span class="n">eval_key</span><span class="o">&gt;</span><span class="n">_tp</span>
</span><span id="__span-2-2"><span class="n">FP</span><span class="p">:</span> <span class="n">sample</span><span class="o">.&lt;</span><span class="n">eval_key</span><span class="o">&gt;</span><span class="n">_fp</span>
</span><span id="__span-2-3"><span class="n">FN</span><span class="p">:</span> <span class="n">sample</span><span class="o">.&lt;</span><span class="n">eval_key</span><span class="o">&gt;</span><span class="n">_fn</span>
</span></code></pre></div>
<ul>
<li>The fields listed below are populated on each individual object instance;
these fields tabulate the TP/FP/FN status of the object, the ID of the
matching object (if any), and the matching IoU:</li>
</ul>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><span class="n">TP</span><span class="o">/</span><span class="n">FP</span><span class="o">/</span><span class="n">FN</span><span class="p">:</span> <span class="nb">object</span><span class="o">.&lt;</span><span class="n">eval_key</span><span class="o">&gt;</span>
</span><span id="__span-3-2">        <span class="n">ID</span><span class="p">:</span> <span class="nb">object</span><span class="o">.&lt;</span><span class="n">eval_key</span><span class="o">&gt;</span><span class="n">_id</span>
</span><span id="__span-3-3">       <span class="n">IoU</span><span class="p">:</span> <span class="nb">object</span><span class="o">.&lt;</span><span class="n">eval_key</span><span class="o">&gt;</span><span class="n">_iou</span>
</span></code></pre></div>
<p>Note</p>
<p>See <a href="../../api/fiftyone.utils.eval.openimages.html#fiftyone.utils.eval.openimages.OpenImagesEvaluationConfig" title="fiftyone.utils.eval.openimages.OpenImagesEvaluationConfig"><code>OpenImagesEvaluationConfig</code></a> for complete descriptions of the optional
keyword arguments that you can pass to
<a href="../../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.evaluate_detections" title="fiftyone.core.collections.SampleCollection.evaluate_detections"><code>evaluate_detections()</code></a>
when running Open Images-style evaluation.</p>
<h3 id="example-evaluation">Example evaluation <a href="#example-evaluation" title="Permalink to this headline">¶</a><a class="headerlink" href="#example-evaluation" title="Permanent link">&para;</a></h3>
<p>The example below demonstrates Open Images-style detection evaluation on the
<a href="../../data/dataset_zoo/datasets/#dataset-zoo-quickstart">quickstart dataset</a> from the Dataset Zoo:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">fo</span>
</span><span id="__span-4-2"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.zoo</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">foz</span>
</span><span id="__span-4-3"><span class="kn">from</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>
</span><span id="__span-4-4">
</span><span id="__span-4-5"><span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
</span><span id="__span-4-6"><span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</span><span id="__span-4-7">
</span><span id="__span-4-8"><span class="c1"># Evaluate the objects in the `predictions` field with respect to the</span>
</span><span id="__span-4-9"><span class="c1"># objects in the `ground_truth` field</span>
</span><span id="__span-4-10"><span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">evaluate_detections</span><span class="p">(</span>
</span><span id="__span-4-11">    <span class="s2">&quot;predictions&quot;</span><span class="p">,</span>
</span><span id="__span-4-12">    <span class="n">gt_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span>
</span><span id="__span-4-13">    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;open-images&quot;</span><span class="p">,</span>
</span><span id="__span-4-14">    <span class="n">eval_key</span><span class="o">=</span><span class="s2">&quot;eval&quot;</span><span class="p">,</span>
</span><span id="__span-4-15"><span class="p">)</span>
</span><span id="__span-4-16">
</span><span id="__span-4-17"><span class="c1"># Get the 10 most common classes in the dataset</span>
</span><span id="__span-4-18"><span class="n">counts</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="s2">&quot;ground_truth.detections.label&quot;</span><span class="p">)</span>
</span><span id="__span-4-19"><span class="n">classes</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">counts</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">counts</span><span class="o">.</span><span class="n">get</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]</span>
</span><span id="__span-4-20">
</span><span id="__span-4-21"><span class="c1"># Print a classification report for the top-10 classes</span>
</span><span id="__span-4-22"><span class="n">results</span><span class="o">.</span><span class="n">print_report</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="n">classes</span><span class="p">)</span>
</span><span id="__span-4-23">
</span><span id="__span-4-24"><span class="c1"># Print some statistics about the total TP/FP/FN counts</span>
</span><span id="__span-4-25"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;TP: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">dataset</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s2">&quot;eval_tp&quot;</span><span class="p">))</span>
</span><span id="__span-4-26"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;FP: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">dataset</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s2">&quot;eval_fp&quot;</span><span class="p">))</span>
</span><span id="__span-4-27"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;FN: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">dataset</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s2">&quot;eval_fn&quot;</span><span class="p">))</span>
</span><span id="__span-4-28">
</span><span id="__span-4-29"><span class="c1"># Create a view that has samples with the most false positives first, and</span>
</span><span id="__span-4-30"><span class="c1"># only includes false positive boxes in the `predictions` field</span>
</span><span id="__span-4-31"><span class="n">view</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-4-32">    <span class="n">dataset</span>
</span><span id="__span-4-33">    <span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="s2">&quot;eval_fp&quot;</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-4-34">    <span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">,</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;eval&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;fp&quot;</span><span class="p">)</span>
</span><span id="__span-4-35"><span class="p">)</span>
</span><span id="__span-4-36">
</span><span id="__span-4-37"><span class="c1"># Visualize results in the App</span>
</span><span id="__span-4-38"><span class="n">session</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">launch_app</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1">               <span class="n">precision</span>    <span class="n">recall</span>  <span class="n">f1</span><span class="o">-</span><span class="n">score</span>   <span class="n">support</span>
</span><span id="__span-5-2">
</span><span id="__span-5-3">       <span class="n">person</span>       <span class="mf">0.25</span>      <span class="mf">0.86</span>      <span class="mf">0.39</span>       <span class="mi">378</span>
</span><span id="__span-5-4">         <span class="n">kite</span>       <span class="mf">0.27</span>      <span class="mf">0.75</span>      <span class="mf">0.40</span>        <span class="mi">75</span>
</span><span id="__span-5-5">          <span class="n">car</span>       <span class="mf">0.18</span>      <span class="mf">0.80</span>      <span class="mf">0.29</span>        <span class="mi">61</span>
</span><span id="__span-5-6">         <span class="n">bird</span>       <span class="mf">0.20</span>      <span class="mf">0.51</span>      <span class="mf">0.28</span>        <span class="mi">51</span>
</span><span id="__span-5-7">       <span class="n">carrot</span>       <span class="mf">0.09</span>      <span class="mf">0.74</span>      <span class="mf">0.16</span>        <span class="mi">47</span>
</span><span id="__span-5-8">         <span class="n">boat</span>       <span class="mf">0.09</span>      <span class="mf">0.46</span>      <span class="mf">0.16</span>        <span class="mi">37</span>
</span><span id="__span-5-9">    <span class="n">surfboard</span>       <span class="mf">0.17</span>      <span class="mf">0.73</span>      <span class="mf">0.28</span>        <span class="mi">30</span>
</span><span id="__span-5-10">     <span class="n">airplane</span>       <span class="mf">0.36</span>      <span class="mf">0.83</span>      <span class="mf">0.50</span>        <span class="mi">24</span>
</span><span id="__span-5-11"><span class="n">traffic</span> <span class="n">light</span>       <span class="mf">0.32</span>      <span class="mf">0.79</span>      <span class="mf">0.45</span>        <span class="mi">24</span>
</span><span id="__span-5-12">      <span class="n">giraffe</span>       <span class="mf">0.36</span>      <span class="mf">0.91</span>      <span class="mf">0.52</span>        <span class="mi">23</span>
</span><span id="__span-5-13">
</span><span id="__span-5-14">    <span class="n">micro</span> <span class="n">avg</span>       <span class="mf">0.21</span>      <span class="mf">0.79</span>      <span class="mf">0.34</span>       <span class="mi">750</span>
</span><span id="__span-5-15">    <span class="n">macro</span> <span class="n">avg</span>       <span class="mf">0.23</span>      <span class="mf">0.74</span>      <span class="mf">0.34</span>       <span class="mi">750</span>
</span><span id="__span-5-16"> <span class="n">weighted</span> <span class="n">avg</span>       <span class="mf">0.23</span>      <span class="mf">0.79</span>      <span class="mf">0.36</span>       <span class="mi">750</span>
</span></code></pre></div>
<p><img alt="quickstart-evaluate-detections-oi" src="../../_images/quickstart_evaluate_detections_oi.png" /></p>
<h3 id="map-and-pr-curves">mAP and PR curves <a href="#map-and-pr-curves" title="Permalink to this headline">¶</a><a class="headerlink" href="#map-and-pr-curves" title="Permanent link">&para;</a></h3>
<p>You can easily compute mean average precision (mAP) and precision-recall (PR)
curves using the results object returned by
<a href="../../api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.evaluate_detections" title="fiftyone.core.collections.SampleCollection.evaluate_detections"><code>evaluate_detections()</code></a>:</p>
<p>Note</p>
<p>FiftyOne’s implementation of Open Images-style evaluation matches the
reference implementation available via the
<a href="https://github.com/tensorflow/models/tree/master/research/object_detection">TF Object Detection API</a>.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">fo</span>
</span><span id="__span-6-2"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.zoo</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">foz</span>
</span><span id="__span-6-3">
</span><span id="__span-6-4"><span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
</span><span id="__span-6-5"><span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</span><span id="__span-6-6">
</span><span id="__span-6-7"><span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">evaluate_detections</span><span class="p">(</span>
</span><span id="__span-6-8">    <span class="s2">&quot;predictions&quot;</span><span class="p">,</span>
</span><span id="__span-6-9">    <span class="n">gt_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span>
</span><span id="__span-6-10">    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;open-images&quot;</span><span class="p">,</span>
</span><span id="__span-6-11"><span class="p">)</span>
</span><span id="__span-6-12">
</span><span id="__span-6-13"><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">mAP</span><span class="p">())</span>
</span><span id="__span-6-14"><span class="c1"># 0.599</span>
</span><span id="__span-6-15">
</span><span id="__span-6-16"><span class="n">plot</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">plot_pr_curves</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;person&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="s2">&quot;car&quot;</span><span class="p">])</span>
</span><span id="__span-6-17"><span class="n">plot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></div>
<p><img alt="oi-pr-curve" src="../../_images/oi_pr_curve.png" /></p>
<h3 id="confusion-matrices">Confusion matrices <a href="#confusion-matrices" title="Permalink to this headline">¶</a><a class="headerlink" href="#confusion-matrices" title="Permanent link">&para;</a></h3>
<p>You can also easily generate <a href="../../fiftyone_concepts/evaluation/#confusion-matrices">confusion matrices</a> for
the results of Open Images-style evaluations.</p>
<p>In order for the confusion matrix to capture anything other than false
positive/negative counts, you will likely want to set the
<a href="../../api/fiftyone.utils.eval.openimages.html#fiftyone.utils.eval.openimages.OpenImagesEvaluationConfig" title="fiftyone.utils.eval.openimages.OpenImagesEvaluationConfig"><code>classwise</code></a>
parameter to <code>False</code> during evaluation so that predicted objects can be
matched with ground truth objects of different classes.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">fo</span>
</span><span id="__span-7-2"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.zoo</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">foz</span>
</span><span id="__span-7-3">
</span><span id="__span-7-4"><span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
</span><span id="__span-7-5">
</span><span id="__span-7-6"><span class="c1"># Perform evaluation, allowing objects to be matched between classes</span>
</span><span id="__span-7-7"><span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">evaluate_detections</span><span class="p">(</span>
</span><span id="__span-7-8">    <span class="s2">&quot;predictions&quot;</span><span class="p">,</span>
</span><span id="__span-7-9">    <span class="n">gt_field</span><span class="o">=</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">,</span>
</span><span id="__span-7-10">    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;open-images&quot;</span><span class="p">,</span>
</span><span id="__span-7-11">    <span class="n">classwise</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="__span-7-12"><span class="p">)</span>
</span><span id="__span-7-13">
</span><span id="__span-7-14"><span class="c1"># Generate a confusion matrix for the specified classes</span>
</span><span id="__span-7-15"><span class="n">plot</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">plot_confusion_matrix</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;car&quot;</span><span class="p">,</span> <span class="s2">&quot;truck&quot;</span><span class="p">,</span> <span class="s2">&quot;motorcycle&quot;</span><span class="p">])</span>
</span><span id="__span-7-16"><span class="n">plot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></div>
<p><img alt="oi-confusion-matrix" src="../../_images/oi_confusion_matrix.png" /></p>
<p>Note</p>
<p>Did you know? <a href="../../fiftyone_concepts/evaluation/#confusion-matrices">Confusion matrices</a> can be
attached to your <a href="../../api/fiftyone.core.session.html#fiftyone.core.session.Session" title="fiftyone.core.session.Session"><code>Session</code></a> object and dynamically explored using FiftyOne’s
<a href="../../fiftyone_concepts/plots/#interactive-plots">interactive plotting features</a>!</p>
<h2 id="open-images-challenge">Open Images Challenge <a href="#open-images-challenge" title="Permalink to this headline">¶</a><a class="headerlink" href="#open-images-challenge" title="Permanent link">&para;</a></h2>
<p>Since FiftyOne’s implementation of Open Images-style evaluation matches the
reference implementation from the
<a href="https://github.com/tensorflow/models/tree/master/research/object_detection">TF Object Detection API</a>
used in the
<a href="https://storage.googleapis.com/openimages/web/evaluation.html">Open Images detection challenges</a>.
you can use it to compute the official mAP for your model while also enjoying
the benefits of working in the FiftyOne ecosystem, including
<a href="../../fiftyone_concepts/using_views/#using-views">using views</a> to manipulate your dataset and visually
exploring your model’s predictions in the <a href="../../fiftyone_concepts/app/#fiftyone-app">FiftyOne App</a>!</p>
<p>In order to compute the official Open Images mAP for a model, your dataset
<strong>must</strong> include the appropriate positive and negative sample-level labels, and
you must provide the class hierarchy. Fortunately, when you load the Open
Images dataset
<a href="../../data/dataset_zoo/datasets/#dataset-zoo-open-images-v6">from the FiftyOne Dataset Zoo</a>, all of the
necessary information is automatically loaded for you!</p>
<p>The example snippet below loads the
<a href="../../data/dataset_zoo/datasets/#dataset-zoo-open-images-v6">Open Images V6</a> dataset and runs the
official Open Images evaluation protocol on some mock model predictions:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
</span><span id="__span-8-2">
</span><span id="__span-8-3"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">fo</span>
</span><span id="__span-8-4"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.zoo</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">foz</span>
</span><span id="__span-8-5">
</span><span id="__span-8-6"><span class="c1"># Load some samples from the Open Images V6 dataset from the zoo</span>
</span><span id="__span-8-7"><span class="n">dataset</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span>
</span><span id="__span-8-8">    <span class="s2">&quot;open-images-v6&quot;</span><span class="p">,</span>
</span><span id="__span-8-9">    <span class="s2">&quot;validation&quot;</span><span class="p">,</span>
</span><span id="__span-8-10">    <span class="n">max_samples</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
</span><span id="__span-8-11">    <span class="n">label_types</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;detections&quot;</span><span class="p">,</span> <span class="s2">&quot;classifications&quot;</span><span class="p">],</span>
</span><span id="__span-8-12"><span class="p">)</span>
</span><span id="__span-8-13">
</span><span id="__span-8-14"><span class="c1"># Generate some fake predictions</span>
</span><span id="__span-8-15"><span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">dataset</span><span class="p">:</span>
</span><span id="__span-8-16">    <span class="n">predictions</span> <span class="o">=</span> <span class="n">sample</span><span class="p">[</span><span class="s2">&quot;detections&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="__span-8-17">    <span class="k">for</span> <span class="n">detection</span> <span class="ow">in</span> <span class="n">predictions</span><span class="o">.</span><span class="n">detections</span><span class="p">:</span>
</span><span id="__span-8-18">        <span class="n">detection</span><span class="o">.</span><span class="n">confidence</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
</span><span id="__span-8-19">
</span><span id="__span-8-20">    <span class="n">sample</span><span class="p">[</span><span class="s2">&quot;predictions&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">predictions</span>
</span><span id="__span-8-21">    <span class="n">sample</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="__span-8-22">
</span><span id="__span-8-23"><span class="c1"># Evaluate your predictions via the official Open Images protocol</span>
</span><span id="__span-8-24"><span class="n">results</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">evaluate_detections</span><span class="p">(</span>
</span><span id="__span-8-25">    <span class="s2">&quot;predictions&quot;</span><span class="p">,</span>
</span><span id="__span-8-26">    <span class="n">gt_field</span><span class="o">=</span><span class="s2">&quot;detections&quot;</span><span class="p">,</span>
</span><span id="__span-8-27">    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;open-images&quot;</span><span class="p">,</span>
</span><span id="__span-8-28">    <span class="n">pos_label_field</span><span class="o">=</span><span class="s2">&quot;positive_labels&quot;</span><span class="p">,</span>
</span><span id="__span-8-29">    <span class="n">neg_label_field</span><span class="o">=</span><span class="s2">&quot;negative_labels&quot;</span><span class="p">,</span>
</span><span id="__span-8-30">    <span class="n">hierarchy</span><span class="o">=</span><span class="n">dataset</span><span class="o">.</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;hierarchy&quot;</span><span class="p">],</span>
</span><span id="__span-8-31">
</span><span id="__span-8-32"><span class="p">)</span>
</span><span id="__span-8-33">
</span><span id="__span-8-34"><span class="c1"># The official mAP for the results</span>
</span><span id="__span-8-35"><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">mAP</span><span class="p">())</span>
</span></code></pre></div>
<p>Most models trained on Open Images return the predictions for every class in
the hierarchy. However, if your model does not, then you can set the
<a href="../../api/fiftyone.utils.eval.openimages.html#fiftyone.utils.eval.openimages.OpenImagesEvaluationConfig" title="fiftyone.utils.eval.openimages.OpenImagesEvaluationConfig"><code>expand_pred_hierarchy</code></a>
parameter to <code>False</code> to automatically generate predictions for parent classes
in the hierarchy for evaluation purposes.</p>
<p>Note</p>
<p>Check out <a href="../recipes/adding_detections.md">this recipe</a> to learn how to
add your model’s predictions to a FiftyOne Dataset.</p>
<h2 id="map-protocol">mAP protocol <a href="#map-protocol" title="Permalink to this headline">¶</a><a class="headerlink" href="#map-protocol" title="Permanent link">&para;</a></h2>
<p>The Open Images mAP protocol is similar to <a href="../coco/#coco-map">COCO-style mAP</a>,
with the primary differences being support for image-level labels, class
hierarchies, and differences in the way that objects are matched to crowds.</p>
<p>The steps to compute Open Images-style mAP are detailed below.</p>
<p><strong>Preprocessing</strong></p>
<ul>
<li>
<p>Filter ground truth and predicted objects by class
(unless <code>classwise=False</code>)</p>
</li>
<li>
<p>Expand the ground truth predictions by duplicating every object and
positive image-level label and modifying the class to include all parent
classes in the class hierarchy. Negative image-level labels are expanded to
include all child classes in the hierarchy for every label in the image</p>
</li>
<li>
<p>Sort predicted objects by confidence so that high confidence objects are
matched first</p>
</li>
<li>
<p>Sort ground truth objects so that objects with <code>IsGroupOf=True</code> (the name
of this attribute can be customized via the <code>iscrowd</code> parameter) are
matched last</p>
</li>
<li>
<p>Compute IoU between every ground truth and predicted object within the same
class (and between classes if <code>classwise=False</code>) in each image</p>
</li>
<li>
<p>Compute IoU between predictions and crowd objects as the intersection of
both boxes divided by the area of the prediction only. A prediction fully
inside the crowd box has an IoU of 1</p>
</li>
</ul>
<p><strong>Matching</strong></p>
<p>Once IoUs have been computed, predictions and ground truth objects are matched
to compute true positives, false positives, and false negatives:</p>
<ul>
<li>
<p>For each class, start with the highest confidence prediction, match it to
the ground truth object that it overlaps with the highest IoU. A prediction
only matches if the IoU is above the specified <code>iou</code> threshold
(default = 0.5)</p>
</li>
<li>
<p>If a prediction matched to a non-crowd gt object, it will not match to a
crowd even if the IoU is higher</p>
</li>
<li>
<p>Multiple predictions can match to the same crowd ground truth object, but
only one counts as a true positive, the others are ignored (unlike COCO).
If the crowd is not matched by any prediction, it is a false negative</p>
</li>
<li>
<p>(Unlike COCO) If a prediction maximally overlaps with a non-crowd ground
truth object that has already been matched with a higher confidence
prediction, the prediction is marked as a false positive</p>
</li>
<li>
<p>If <code>classwise=False</code>, predictions can only match to crowds if they are of
the same class</p>
</li>
</ul>
<p><strong>Computing mAP</strong></p>
<ul>
<li>
<p>(Unlike COCO) Only one IoU threshold (default = 0.5) is used to compute mAP</p>
</li>
<li>
<p>The next 6 steps are computed separately for each class:</p>
</li>
<li>
<p>Construct an array of true positives and false positives, sorted by
confidence</p>
</li>
<li>
<p>Compute the cumulative sum of this TP FP array</p>
</li>
<li>
<p>Compute precision array by elementwise dividing the TP-FP-sum array by
the total number of predictions up to that point</p>
</li>
<li>
<p>Compute recall array by elementwise dividing the TP-FP-sum array with the
total number of ground truth objects for the class</p>
</li>
<li>
<p>Ensure that precision is a non-increasing array</p>
</li>
<li>
<p>Add values <code>0</code> and <code>1</code> to precision and recall arrays</p>
</li>
<li>
<p>(Unlike COCO) Precision values are not interpolated and all recall values
are used to compute AP. This means that every class will produce a
different number of precision and recall values depending on the number of
true and false positives existing for that class</p>
</li>
<li>
<p>For every class that contains at least one ground truth object, compute the
AP by averaging the precision values. Then compute mAP by averaging the AP
values for each class</p>
</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.path", "navigation.indexes", "navigation.top", {"icon": {"repo": "fontawesome/brands/github"}}, "content.action.edit"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>