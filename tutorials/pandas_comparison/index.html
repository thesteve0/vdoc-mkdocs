
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>pandas-style queries in FiftyOne ¶ - Voxel51 Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pandas-style-queries-in-fiftyone" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Voxel51 Documentation" class="md-header__button md-logo" aria-label="Voxel51 Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Voxel51 Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              pandas-style queries in FiftyOne ¶
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/thesteve0/vdoc-mkdocs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Voxel51 Documentation" class="md-nav__button md-logo" aria-label="Voxel51 Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Voxel51 Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/thesteve0/vdoc-mkdocs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/virtualenv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtualenvs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/datasets_samples_fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Datasets, Samples, and Fields
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/application_tour/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tour of the Applications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../fiftyone_concepts/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    FiftyOne Concepts
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            FiftyOne Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fiftyone_concepts/basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Machine Learning
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How Do I
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../data_and_models/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Data and Models
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Data and Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../data_and_models/dataset_zoo/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Zoo Datasets
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Zoo Datasets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_and_models/dataset_zoo/datasets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Built-In Zoo Datasets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_and_models/dataset_zoo/remote/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remotely-Sourced Zoo Datasets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_and_models/dataset_zoo/api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zoo Data API
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_and_models/hugging_face_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hugging Face Datasets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrations
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    References
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            References
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../community/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Community
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../teams/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fifty One Teams
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Releases
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview ¶
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting started ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Getting started ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-empty" class="md-nav__link">
    <span class="md-ellipsis">
      Create empty ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create empty ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-empty-pddataframe" class="md-nav__link">
    <span class="md-ellipsis">
      Create empty pd.DataFrame ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-empty-fodataset" class="md-nav__link">
    <span class="md-ellipsis">
      Create empty fo.Dataset ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-data" class="md-nav__link">
    <span class="md-ellipsis">
      Example data ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example data ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iris-dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Iris Dataset ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fiftyone-quickstart-data" class="md-nav__link">
    <span class="md-ellipsis">
      FiftyOne Quickstart Data ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basics" class="md-nav__link">
    <span class="md-ellipsis">
      Basics ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basics ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#head-and-tail" class="md-nav__link">
    <span class="md-ellipsis">
      Head and tail ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Head and tail ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#head" class="md-nav__link">
    <span class="md-ellipsis">
      Head ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tail" class="md-nav__link">
    <span class="md-ellipsis">
      Tail ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#first-and-last" class="md-nav__link">
    <span class="md-ellipsis">
      First and last ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-single-element" class="md-nav__link">
    <span class="md-ellipsis">
      Get single element ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#number-of-rowssamples" class="md-nav__link">
    <span class="md-ellipsis">
      Number of rows/samples ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-columnsfield-schema" class="md-nav__link">
    <span class="md-ellipsis">
      Getting columns/field schema ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#all-values-in-a-columnfield" class="md-nav__link">
    <span class="md-ellipsis">
      All values in a column/field ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#view-stages" class="md-nav__link">
    <span class="md-ellipsis">
      View stages ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="View stages ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#making-a-copy" class="md-nav__link">
    <span class="md-ellipsis">
      Making a copy ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slicing" class="md-nav__link">
    <span class="md-ellipsis">
      Slicing ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-random-samples" class="md-nav__link">
    <span class="md-ellipsis">
      Get random samples ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Get random samples ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#select-kk-random-samples" class="md-nav__link">
    <span class="md-ellipsis">
      Select kk random samples ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#randomly-select-fraction-p1p1-of-samples" class="md-nav__link">
    <span class="md-ellipsis">
      Randomly select fraction p&lt;1p&lt;1 of samples ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shuffle-data" class="md-nav__link">
    <span class="md-ellipsis">
      Shuffle data ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filtering" class="md-nav__link">
    <span class="md-ellipsis">
      Filtering ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sorting" class="md-nav__link">
    <span class="md-ellipsis">
      Sorting ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting" class="md-nav__link">
    <span class="md-ellipsis">
      Deleting ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregations" class="md-nav__link">
    <span class="md-ellipsis">
      Aggregations ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Aggregations ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#count" class="md-nav__link">
    <span class="md-ellipsis">
      Count ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sum" class="md-nav__link">
    <span class="md-ellipsis">
      Sum ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unique" class="md-nav__link">
    <span class="md-ellipsis">
      Unique ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bounds" class="md-nav__link">
    <span class="md-ellipsis">
      Bounds ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mean" class="md-nav__link">
    <span class="md-ellipsis">
      Mean ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#standard-deviation" class="md-nav__link">
    <span class="md-ellipsis">
      Standard deviation ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quantiles" class="md-nav__link">
    <span class="md-ellipsis">
      Quantiles ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#median-and-other-aggregations" class="md-nav__link">
    <span class="md-ellipsis">
      Median and other aggregations ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural-change-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Structural change operations ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Structural change operations ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-new-columnfield" class="md-nav__link">
    <span class="md-ellipsis">
      Add new column/field ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Add new column/field ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-new-columnfield-with-default-value" class="md-nav__link">
    <span class="md-ellipsis">
      Add new column/field with default value ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-new-columnfield-from-external-data" class="md-nav__link">
    <span class="md-ellipsis">
      Add new column/field from external data ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-new-columnframe-from-existing-columnsfields" class="md-nav__link">
    <span class="md-ellipsis">
      Add a new column/frame from existing columns/fields ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-a-columnfield" class="md-nav__link">
    <span class="md-ellipsis">
      Remove a column/field ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keep-only-specified-columnsfields" class="md-nav__link">
    <span class="md-ellipsis">
      Keep only specified columns/fields ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#concatenation" class="md-nav__link">
    <span class="md-ellipsis">
      Concatenation ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-single-rowsample" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a single row/sample ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-rowssamples" class="md-nav__link">
    <span class="md-ellipsis">
      Remove rows/samples ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keep-only-specified-rowssamples" class="md-nav__link">
    <span class="md-ellipsis">
      Keep only specified rows/samples ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rename-columnfield" class="md-nav__link">
    <span class="md-ellipsis">
      Rename column/field ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expressions" class="md-nav__link">
    <span class="md-ellipsis">
      Expressions ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Expressions ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#element-comparison-expressions" class="md-nav__link">
    <span class="md-ellipsis">
      Element comparison expressions ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Element comparison expressions ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exact-equality" class="md-nav__link">
    <span class="md-ellipsis">
      Exact equality ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#less-than-or-equal-to" class="md-nav__link">
    <span class="md-ellipsis">
      Less than or equal to ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logical-expressions" class="md-nav__link">
    <span class="md-ellipsis">
      Logical expressions ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Logical expressions ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logical-complement" class="md-nav__link">
    <span class="md-ellipsis">
      Logical complement ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logical-and" class="md-nav__link">
    <span class="md-ellipsis">
      Logical AND ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logical-or" class="md-nav__link">
    <span class="md-ellipsis">
      Logical OR ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subset-superset" class="md-nav__link">
    <span class="md-ellipsis">
      Subset-superset ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Subset-superset ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#is-in" class="md-nav__link">
    <span class="md-ellipsis">
      Is in ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contains" class="md-nav__link">
    <span class="md-ellipsis">
      Contains ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checking-data-types" class="md-nav__link">
    <span class="md-ellipsis">
      Checking data types ¶
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Checking data types ¶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#numeric-and-string-types" class="md-nav__link">
    <span class="md-ellipsis">
      Numeric and string types ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#null" class="md-nav__link">
    <span class="md-ellipsis">
      Null ¶
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#array" class="md-nav__link">
    <span class="md-ellipsis">
      Array ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion ¶
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/thesteve0/vdoc-mkdocs/blob/main/docs/tutorials/pandas_comparison.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="pandas-style-queries-in-fiftyone">pandas-style queries in FiftyOne <a href="#pandas-style-queries-in-FiftyOne" title="Permalink to this headline">¶</a><a class="headerlink" href="#pandas-style-queries-in-fiftyone" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview <a href="#Overview" title="Permalink to this headline">¶</a><a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p><a href="https://pypi.org/project/pandas/">pandas</a> is a Python library for data analysis. The central object in pandas is a <code>DataFrame</code>, which is a two-dimensional labeled data structure that handles tabular data. pandas is optimized for storing, manipulating, and analyzing tabular data, making it useful for a wide variety of data science, data engineering, and machine learning tasks.</p>
<p><a href="https://voxel51.com/docs/fiftyone/">FiftyOne</a>, is an open-source Python library for building high-quality datasets and computer vision models. The central object in FiftyOne is the <code>Dataset</code>, which allows for efficient handling of datasets consisting of images, videos, geospatial, or 3D data, as well as the corresponding metadata and labels associated with the media (which are often more complex than what can be represented in a two-dimensional data structure).</p>
<p>While they apply to different types of data, the pandas <code>DataFrame</code> and FiftyOne <code>Dataset</code> classes share many similar functionalities. In this overview, we’ll present a side-by-side comparison of common operations in the two libraries.</p>
<p>If you’re already a pandas power user, then you’ll be a FiftyOne power user too after running through this tutorial!</p>
<h2 id="getting-started">Getting started <a href="#Getting-started" title="Permalink to this headline">¶</a><a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h2>
<p>The first thing to do is to install FiftyOne:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="n">fiftyone</span>
</span></code></pre></div>
<p>Then we will import pandas and FiftyOne:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">fo</span>
</span><span id="__span-3-2"><span class="kn">import</span><span class="w"> </span><span class="nn">fiftyone.zoo</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">foz</span>
</span><span id="__span-3-3"><span class="kn">from</span><span class="w"> </span><span class="nn">fiftyone</span><span class="w"> </span><span class="kn">import</span> <span class="n">ViewField</span> <span class="k">as</span> <span class="n">F</span>  <span class="c1"># For handling expressions in matching and filtering</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</span><span id="__span-5-2"><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</span></code></pre></div>
<p>In this tutorial, we will download example data for illustrative purposes. Before doing so, we demonstrate how to create empty <code>pd.DataFrame</code> and <code>fo.Dataset</code> objects</p>
<h3 id="create-empty">Create empty <a href="#Create-empty" title="Permalink to this headline">¶</a><a class="headerlink" href="#create-empty" title="Permanent link">&para;</a></h3>
<h4 id="create-empty-pddataframe">Create empty <code>pd.DataFrame</code> <a href="#Create-empty-pd.DataFrame" title="Permalink to this headline">¶</a><a class="headerlink" href="#create-empty-pddataframe" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><span class="n">empty_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
</span></code></pre></div>
<p>we can get basic information about the <code>DataFrame</code> using the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.info">info</a> property:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><span class="n">empty_df</span><span class="o">.</span><span class="n">info</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><span class="o">&lt;</span><span class="n">bound</span> <span class="n">method</span> <span class="n">DataFrame</span><span class="o">.</span><span class="n">info</span> <span class="n">of</span> <span class="n">Empty</span> <span class="n">DataFrame</span>
</span><span id="__span-11-2"><span class="n">Columns</span><span class="p">:</span> <span class="p">[]</span>
</span><span id="__span-11-3"><span class="n">Index</span><span class="p">:</span> <span class="p">[]</span><span class="o">&gt;</span>
</span></code></pre></div>
<p>We can also give the <code>DataFrame</code> object a name:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><span class="p">[</span><span class="mi">6</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><span class="n">empty_df</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;empty_df&#39;</span>
</span></code></pre></div>
<h4 id="create-empty-fodataset">Create empty <code>fo.Dataset</code> <a href="#Create-empty-fo.Dataset" title="Permalink to this headline">¶</a><a class="headerlink" href="#create-empty-fodataset" title="Permanent link">&para;</a></h4>
<p>We can similarly create a <code>Dataset</code> object by calling the FiftyOne core <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset">fo.Dataset()</a> method without any arguments:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><span class="p">[</span><span class="mi">7</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><span class="n">empty_dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>
</span></code></pre></div>
<p>We can get basic info about the <code>Dataset</code> object using <code>print</code>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><span class="p">[</span><span class="mi">8</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><span class="nb">print</span><span class="p">(</span><span class="n">empty_dataset</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-18-1"><span class="n">Name</span><span class="p">:</span>        <span class="mf">2022.11.18.18.14.41</span>
</span><span id="__span-18-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="kc">None</span>
</span><span id="__span-18-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">0</span>
</span><span id="__span-18-4"><span class="n">Persistent</span><span class="p">:</span>  <span class="kc">False</span>
</span><span id="__span-18-5"><span class="n">Tags</span><span class="p">:</span>        <span class="p">[]</span>
</span><span id="__span-18-6"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-18-7">    <span class="nb">id</span><span class="p">:</span>       <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-18-8">    <span class="n">filepath</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-18-9">    <span class="n">tags</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-18-10">    <span class="n">metadata</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">Metadata</span><span class="p">)</span>
</span></code></pre></div>
<p>We can see a few things: 1. Calling the <code>fo.DataFrame()</code> method without an input name resulted in a name being autogenerated based on the time of creation. 2. Whereas the empty Pandas <code>DataFrame</code> has a (trivial) <code>Index</code>, the initialized FiftyOne <code>Dataset</code> has empty <code>Tags</code> (accessible via <code>dataset.tags</code>), and each entry - called a <code>Sample</code>, has predefined fields, including <code>id</code> and <code>filepath</code>. These are necessary for properly accessing and addressing the samples, as the
<code>Dataset</code> stores pointers to the media files, not the media objects themselves.</p>
<p>If we wanted to name an existing <code>Dataset</code>, we could do so in analogous fashion to pandas:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><span class="p">[</span><span class="mi">9</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><span class="n">empty_dataset</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;empty-dataset&quot;</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-21-1"><span class="p">[</span><span class="mi">10</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-22-1"><span class="nb">print</span><span class="p">(</span><span class="n">empty_dataset</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-23-1"><span class="n">Name</span><span class="p">:</span>        <span class="n">empty</span><span class="o">-</span><span class="n">dataset</span>
</span><span id="__span-23-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="kc">None</span>
</span><span id="__span-23-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">0</span>
</span><span id="__span-23-4"><span class="n">Persistent</span><span class="p">:</span>  <span class="kc">False</span>
</span><span id="__span-23-5"><span class="n">Tags</span><span class="p">:</span>        <span class="p">[]</span>
</span><span id="__span-23-6"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-23-7">    <span class="nb">id</span><span class="p">:</span>       <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-23-8">    <span class="n">filepath</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-23-9">    <span class="n">tags</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-23-10">    <span class="n">metadata</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">Metadata</span><span class="p">)</span>
</span></code></pre></div>
<p>Alternatively, if we want to initialize the dataset with a name, we can pass a name in:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-24-1"><span class="p">[</span><span class="mi">11</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-25-1"><span class="n">empty_dataset</span> <span class="o">=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="s1">&#39;empty-ds&#39;</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="example-data">Example data <a href="#Example-data" title="Permalink to this headline">¶</a><a class="headerlink" href="#example-data" title="Permanent link">&para;</a></h3>
<p>For the rest of this tutorial, we will use the following example data:</p>
<h4 id="iris-dataset"><a href="https://archive.ics.uci.edu/ml/datasets/iris">Iris Dataset</a> <a href="#Iris-Dataset" title="Permalink to this headline">¶</a><a class="headerlink" href="#iris-dataset" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-26-1"><span class="p">[</span><span class="mi">12</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-27-1"><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/mwaskom/seaborn-data/master/iris.csv&#39;</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-28-1"><span class="p">[</span><span class="mi">13</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-29-1"><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-30-1"><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="err">&#39;</span><span class="nc">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span><span class="s1">&#39;&gt;</span>
</span><span id="__span-30-2"><span class="n">RangeIndex</span><span class="p">:</span> <span class="mi">150</span> <span class="n">entries</span><span class="p">,</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">149</span>
</span><span id="__span-30-3"><span class="n">Data</span> <span class="n">columns</span> <span class="p">(</span><span class="n">total</span> <span class="mi">5</span> <span class="n">columns</span><span class="p">):</span>
</span><span id="__span-30-4"> <span class="c1">#   Column        Non-Null Count  Dtype</span>
</span><span id="__span-30-5"><span class="o">---</span>  <span class="o">------</span>        <span class="o">--------------</span>  <span class="o">-----</span>
</span><span id="__span-30-6"> <span class="mi">0</span>   <span class="n">sepal_length</span>  <span class="mi">150</span> <span class="n">non</span><span class="o">-</span><span class="n">null</span>    <span class="n">float64</span>
</span><span id="__span-30-7"> <span class="mi">1</span>   <span class="n">sepal_width</span>   <span class="mi">150</span> <span class="n">non</span><span class="o">-</span><span class="n">null</span>    <span class="n">float64</span>
</span><span id="__span-30-8"> <span class="mi">2</span>   <span class="n">petal_length</span>  <span class="mi">150</span> <span class="n">non</span><span class="o">-</span><span class="n">null</span>    <span class="n">float64</span>
</span><span id="__span-30-9"> <span class="mi">3</span>   <span class="n">petal_width</span>   <span class="mi">150</span> <span class="n">non</span><span class="o">-</span><span class="n">null</span>    <span class="n">float64</span>
</span><span id="__span-30-10"> <span class="mi">4</span>   <span class="n">species</span>       <span class="mi">150</span> <span class="n">non</span><span class="o">-</span><span class="n">null</span>    <span class="nb">object</span>
</span><span id="__span-30-11"><span class="n">dtypes</span><span class="p">:</span> <span class="n">float64</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="nb">object</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-30-12"><span class="n">memory</span> <span class="n">usage</span><span class="p">:</span> <span class="mf">6.0</span><span class="o">+</span> <span class="n">KB</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-31-1"><span class="p">[</span><span class="mi">14</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-32-1"><span class="n">df</span><span class="o">.</span><span class="n">columns</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-33-1"><span class="p">[</span><span class="mi">14</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-34-1"><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;sepal_length&#39;</span><span class="p">,</span> <span class="s1">&#39;sepal_width&#39;</span><span class="p">,</span> <span class="s1">&#39;petal_length&#39;</span><span class="p">,</span> <span class="s1">&#39;petal_width&#39;</span><span class="p">,</span>\
</span><span id="__span-34-2">       <span class="s1">&#39;species&#39;</span><span class="p">],</span>
</span><span id="__span-34-3">      <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="fiftyone-quickstart-data"><a href="https://github.com/voxel51/fiftyone-examples/blob/master/examples/quickstart.ipynb">FiftyOne Quickstart Data</a> <a href="#FiftyOne-Quickstart-Data" title="Permalink to this headline">¶</a><a class="headerlink" href="#fiftyone-quickstart-data" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-35-1"><span class="p">[</span> <span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-36-1"><span class="n">ds</span> <span class="o">=</span> <span class="n">foz</span><span class="o">.</span><span class="n">load_zoo_dataset</span><span class="p">(</span><span class="s2">&quot;quickstart&quot;</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-37-1"><span class="p">[</span><span class="mi">16</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-38-1"><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-39-1"><span class="n">Name</span><span class="p">:</span>        <span class="n">quickstart</span>
</span><span id="__span-39-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="n">image</span>
</span><span id="__span-39-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">200</span>
</span><span id="__span-39-4"><span class="n">Persistent</span><span class="p">:</span>  <span class="kc">True</span>
</span><span id="__span-39-5"><span class="n">Tags</span><span class="p">:</span>        <span class="p">[]</span>
</span><span id="__span-39-6"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-39-7">    <span class="nb">id</span><span class="p">:</span>              <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-39-8">    <span class="n">filepath</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-39-9">    <span class="n">tags</span><span class="p">:</span>            <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-39-10">    <span class="n">metadata</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">ImageMetadata</span><span class="p">)</span>
</span><span id="__span-39-11">    <span class="n">ground_truth</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-39-12">    <span class="n">uniqueness</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-39-13">    <span class="n">predictions</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-39-14">    <span class="n">eval_tp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-39-15">    <span class="n">eval_fp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-39-16">    <span class="n">eval_fn</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-39-17">    <span class="n">abstractness</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-39-18">    <span class="n">new_const_field</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-39-19">    <span class="n">computed_field</span><span class="p">:</span>  <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span></code></pre></div>
<h2 id="basics">Basics <a href="#Basics" title="Permalink to this headline">¶</a><a class="headerlink" href="#basics" title="Permanent link">&para;</a></h2>
<h3 id="head-and-tail">Head and tail <a href="#Head-and-tail" title="Permalink to this headline">¶</a><a class="headerlink" href="#head-and-tail" title="Permanent link">&para;</a></h3>
<p>To start to get a feel for the data, we might want to inspect a few entries. For instance, we might want to look at the first few entries, or the last few entries. In both pandas and FiftyOne, these can be accomplished with the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.head">head()</a> and <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.tail">tail()</a> methods, which have identical syntax.</p>
<h4 id="head">Head <a href="#Head" title="Permalink to this headline">¶</a><a class="headerlink" href="#head" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-40-1"><span class="p">[</span><span class="mi">17</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-41-1"><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-42-1"><span class="p">[</span><span class="mi">17</span><span class="p">]:</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th>sepal_length</th>
<th>sepal_width</th>
<th>petal_length</th>
<th>petal_width</th>
<th>species</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr>
<td>1</td>
<td>4.9</td>
<td>3.0</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr>
<td>2</td>
<td>4.7</td>
<td>3.2</td>
<td>1.3</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr>
<td>3</td>
<td>4.6</td>
<td>3.1</td>
<td>1.5</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr>
<td>4</td>
<td>5.0</td>
<td>3.6</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
</tr>
</tbody>
</table>
<div class="language-python highlight"><pre><span></span><code><span id="__span-43-1"><span class="p">[</span><span class="mi">18</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-44-1"><span class="n">first_few_samples</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<p>Running <code>DataFrame.head(n)</code> for instance returns the first nn <em>rows</em> of the original <code>DataFrame</code>. Running <code>Dataset.head(5)</code> for instance returns the first five <em>samples</em> of the original <code>Dataset</code>.</p>
<p>In a pandas <code>DataFrame</code>, two-dimensional tabular data is represented in <em>rows</em> and <em>columns</em>.</p>
<p>Analogously, a FiftyOne <code>Dataset</code> consists of <em>samples</em> and <em>fields</em>. More explicitly:</p>
<table>
<thead>
<tr>
<th>Pandas DataFrame</th>
<th>FiftyOne Dataset</th>
</tr>
</thead>
<tbody>
<tr>
<td>Row</td>
<td>Sample</td>
</tr>
<tr>
<td>Column</td>
<td>Field</td>
</tr>
</tbody>
</table>
<p>In pandas, we expect that a fixed set of columns, each representing a different feature, suffices to represent the data. Some rows might not have values for each column, but each row has the same schema. This is ideal for dealing with a wide variety of data, from housing prices to time series predictions.</p>
<p>FiftyOne is built for dealing with the unstructured data often encountered in computer vision applications. As such, a FiftyOne <code>Dataset</code> does not assume such a uniform schema. In this example, <code>ds</code> let’s consider the field <code>predictions</code>. This field consists of a list of <code>Detection</code> objects, each of which has its own label, bounding box, and confidence score. These represent a model’s predictions for detected objects in the image corresponding to the sample. Not all images are guaranteed
to contain the same number of predicted objects, so it is preferable for samples to be more flexible than the rows in a <code>DataFrame</code>!</p>
<h4 id="tail">Tail <a href="#Tail" title="Permalink to this headline">¶</a><a class="headerlink" href="#tail" title="Permanent link">&para;</a></h4>
<p>To get the last nn entries (rows or samples), we can use the <code>tail(n)</code> method</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-45-1"><span class="p">[</span><span class="mi">19</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-46-1"><span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-47-1"><span class="p">[</span><span class="mi">19</span><span class="p">]:</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th>sepal_length</th>
<th>sepal_width</th>
<th>petal_length</th>
<th>petal_width</th>
<th>species</th>
</tr>
</thead>
<tbody>
<tr>
<td>145</td>
<td>6.7</td>
<td>3.0</td>
<td>5.2</td>
<td>2.3</td>
<td>virginica</td>
</tr>
<tr>
<td>146</td>
<td>6.3</td>
<td>2.5</td>
<td>5.0</td>
<td>1.9</td>
<td>virginica</td>
</tr>
<tr>
<td>147</td>
<td>6.5</td>
<td>3.0</td>
<td>5.2</td>
<td>2.0</td>
<td>virginica</td>
</tr>
<tr>
<td>148</td>
<td>6.2</td>
<td>3.4</td>
<td>5.4</td>
<td>2.3</td>
<td>virginica</td>
</tr>
<tr>
<td>149</td>
<td>5.9</td>
<td>3.0</td>
<td>5.1</td>
<td>1.8</td>
<td>virginica</td>
</tr>
</tbody>
</table>
<div class="language-python highlight"><pre><span></span><code><span id="__span-48-1"><span class="p">[</span><span class="mi">20</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-49-1"><span class="n">last_few_samples</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</span></code></pre></div>
<h3 id="first-and-last">First and last <a href="#First-and-last" title="Permalink to this headline">¶</a><a class="headerlink" href="#first-and-last" title="Permanent link">&para;</a></h3>
<p>If we only want the first sample in a <code>Dataset</code>, we can use the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.first">first()</a> method, which is equivalent to <code>ds.head()[0]</code></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-50-1"><span class="p">[</span><span class="mi">21</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-51-1"><span class="n">first_sample</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span></code></pre></div>
<p>Similarly, if we only want the last sample, we can use the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.last">last()</a> method, which is equivalent to <code>ds.tail()[0]</code></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-52-1"><span class="p">[</span><span class="mi">22</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-53-1"><span class="n">last_sample</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
</span></code></pre></div>
<h3 id="get-single-element">Get single element <a href="#Get-single-element" title="Permalink to this headline">¶</a><a class="headerlink" href="#get-single-element" title="Permanent link">&para;</a></h3>
<p>In pandas, if we want to get the element at index jj in a <code>DataFrame</code>, we can employ the <code>loc[j]</code> or <code>iloc[j]</code> functionality, depending on our usage. For instance,</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-54-1"><span class="p">[</span><span class="mi">23</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-55-1"><span class="n">j</span> <span class="o">=</span> <span class="mi">10</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-56-1"><span class="p">[</span><span class="mi">24</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-57-1"><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-58-1"><span class="p">[</span><span class="mi">24</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-59-1"><span class="n">sepal_length</span>       <span class="mf">5.4</span>
</span><span id="__span-59-2"><span class="n">sepal_width</span>        <span class="mf">3.7</span>
</span><span id="__span-59-3"><span class="n">petal_length</span>       <span class="mf">1.5</span>
</span><span id="__span-59-4"><span class="n">petal_width</span>        <span class="mf">0.2</span>
</span><span id="__span-59-5"><span class="n">species</span>         <span class="n">setosa</span>
</span><span id="__span-59-6"><span class="n">Name</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</span></code></pre></div>
<p>In FiftyOne, we can achieve the same functionality of picking out the jthjth sample by running:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-60-1"><span class="p">[</span><span class="mi">25</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-61-1"><span class="n">sample</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span></code></pre></div>
<p>However, in many cases, one is more interested in extracting samples based on their sample id or filepath. In these cases, the syntactical sugar mirrors pandas: both <code>sample = ds[id]</code> and <code>sample = ds[filepath]</code> achieve the desired result.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-62-1"><span class="p">[</span><span class="mi">26</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-63-1"><span class="n">filepath</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">filepath</span>
</span><span id="__span-63-2"><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="n">filepath</span><span class="p">]</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">sample</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-64-1"><span class="kc">True</span>
</span></code></pre></div>
<h3 id="number-of-rowssamples">Number of rows/samples <a href="#Number-of-rows/samples" title="Permalink to this headline">¶</a><a class="headerlink" href="#number-of-rowssamples" title="Permanent link">&para;</a></h3>
<p>We can get the number of samples in a <code>fo.Dataset</code> just the same as we would get the number of rows in a <code>pd.DataFrame</code> object - by passing it to Python’s <code>len()</code> function.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-65-1"><span class="p">[</span><span class="mi">27</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-66-1"><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-67-1"><span class="p">[</span><span class="mi">27</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-68-1"><span class="mi">150</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-69-1"><span class="p">[</span><span class="mi">28</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-70-1"><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-71-1"><span class="p">[</span><span class="mi">28</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-72-1"><span class="mi">200</span>
</span></code></pre></div>
<p>There are 150150 flowers in the Iris dataset, and 200200 images in our FiftyOne Quickstart dataset</p>
<h3 id="getting-columnsfield-schema">Getting columns/field schema <a href="#Getting-columns/field-schema" title="Permalink to this headline">¶</a><a class="headerlink" href="#getting-columnsfield-schema" title="Permanent link">&para;</a></h3>
<p>In pandas, where all rows in a <code>DataFrame</code> share the same columns, we can get the names of the columns with the <code>DataFrame.columns</code> property.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-73-1"><span class="p">[</span><span class="mi">29</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-74-1"><span class="n">df</span><span class="o">.</span><span class="n">columns</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-75-1"><span class="p">[</span><span class="mi">29</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-76-1"><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;sepal_length&#39;</span><span class="p">,</span> <span class="s1">&#39;sepal_width&#39;</span><span class="p">,</span> <span class="s1">&#39;petal_length&#39;</span><span class="p">,</span> <span class="s1">&#39;petal_width&#39;</span><span class="p">,</span>\
</span><span id="__span-76-2">       <span class="s1">&#39;species&#39;</span><span class="p">],</span>
</span><span id="__span-76-3">      <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>
</span></code></pre></div>
<p>In FiftyOne, the core field schema is shared among samples, but the structure within these first-level fields can vary. We can get the field schema by calling the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.get_field_schema">get_field_schema()</a> method.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-77-1"><span class="p">[</span><span class="mi">30</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-78-1"><span class="n">ds</span><span class="o">.</span><span class="n">get_field_schema</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-79-1"><span class="p">[</span><span class="mi">30</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-80-1"><span class="n">OrderedDict</span><span class="p">([(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span> <span class="n">at</span> <span class="mh">0x2a0a65a90</span><span class="o">&gt;</span><span class="p">),</span>\
</span><span id="__span-80-2">             <span class="p">(</span><span class="s1">&#39;filepath&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span> <span class="n">at</span> <span class="mh">0x2a0a5b2b0</span><span class="o">&gt;</span><span class="p">),</span>\
</span><span id="__span-80-3">             <span class="p">(</span><span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span> <span class="n">at</span> <span class="mh">0x2a0a8c460</span><span class="o">&gt;</span><span class="p">),</span>\
</span><span id="__span-80-4">             <span class="p">(</span><span class="s1">&#39;metadata&#39;</span><span class="p">,</span>\
</span><span id="__span-80-5">              <span class="o">&lt;</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span> <span class="n">at</span> <span class="mh">0x2a0a8c100</span><span class="o">&gt;</span><span class="p">),</span>\
</span><span id="__span-80-6">             <span class="p">(</span><span class="s1">&#39;ground_truth&#39;</span><span class="p">,</span>\
</span><span id="__span-80-7">              <span class="o">&lt;</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span> <span class="n">at</span> <span class="mh">0x2a0a651f0</span><span class="o">&gt;</span><span class="p">),</span>\
</span><span id="__span-80-8">             <span class="p">(</span><span class="s1">&#39;uniqueness&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span> <span class="n">at</span> <span class="mh">0x2a0a8cd90</span><span class="o">&gt;</span><span class="p">),</span>\
</span><span id="__span-80-9">             <span class="p">(</span><span class="s1">&#39;predictions&#39;</span><span class="p">,</span>\
</span><span id="__span-80-10">              <span class="o">&lt;</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span> <span class="n">at</span> <span class="mh">0x2a0a8c1f0</span><span class="o">&gt;</span><span class="p">),</span>\
</span><span id="__span-80-11">             <span class="p">(</span><span class="s1">&#39;eval_tp&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span> <span class="n">at</span> <span class="mh">0x2a0a8cf40</span><span class="o">&gt;</span><span class="p">),</span>\
</span><span id="__span-80-12">             <span class="p">(</span><span class="s1">&#39;eval_fp&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span> <span class="n">at</span> <span class="mh">0x2a0a8cf70</span><span class="o">&gt;</span><span class="p">),</span>\
</span><span id="__span-80-13">             <span class="p">(</span><span class="s1">&#39;eval_fn&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span> <span class="n">at</span> <span class="mh">0x2a0a78550</span><span class="o">&gt;</span><span class="p">),</span>\
</span><span id="__span-80-14">             <span class="p">(</span><span class="s1">&#39;abstractness&#39;</span><span class="p">,</span>\
</span><span id="__span-80-15">              <span class="o">&lt;</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span> <span class="n">at</span> <span class="mh">0x2a0a78580</span><span class="o">&gt;</span><span class="p">),</span>\
</span><span id="__span-80-16">             <span class="p">(</span><span class="s1">&#39;new_const_field&#39;</span><span class="p">,</span>\
</span><span id="__span-80-17">              <span class="o">&lt;</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span> <span class="n">at</span> <span class="mh">0x2a0a785b0</span><span class="o">&gt;</span><span class="p">),</span>\
</span><span id="__span-80-18">             <span class="p">(</span><span class="s1">&#39;computed_field&#39;</span><span class="p">,</span>\
</span><span id="__span-80-19">              <span class="o">&lt;</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span> <span class="n">at</span> <span class="mh">0x2a0a785e0</span><span class="o">&gt;</span><span class="p">)])</span>
</span></code></pre></div>
<p>In video tasks, <code>get_field_schema</code> is replaced by <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.get_frame_field_schema">get_frame_field_schema()</a>.</p>
<p>Some of the field types, such as <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.fields.html#fiftyone.core.fields.FloatField">FloatField</a> (float) and <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.fields.html#fiftyone.core.fields.StringField">StringField</a> (string) correspond in straightforward fashion to data types in pandas, or in Python more generally. As we will see below, the
<a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.fields.html#fiftyone.core.fields.EmbeddedDocumentField">EmbeddedDocumentField</a>, which does not have a perfect analog in pandas, is part of what gives the FiftyOne <code>Dataset</code> its powerful flexibility for tackling computer vision tasks.</p>
<p>If we just want the field names for all samples in the dataset, you can do the following:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-81-1"><span class="p">[</span><span class="mi">31</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-82-1"><span class="n">field_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">get_field_schema</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="__span-82-2"><span class="nb">print</span><span class="p">(</span><span class="n">field_names</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-83-1"><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;filepath&#39;</span><span class="p">,</span> <span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;ground_truth&#39;</span><span class="p">,</span> <span class="s1">&#39;uniqueness&#39;</span><span class="p">,</span> <span class="s1">&#39;predictions&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_tp&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_fp&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_fn&#39;</span><span class="p">,</span> <span class="s1">&#39;abstractness&#39;</span><span class="p">,</span> <span class="s1">&#39;new_const_field&#39;</span><span class="p">,</span> <span class="s1">&#39;computed_field&#39;</span><span class="p">]</span>
</span></code></pre></div>
<h3 id="all-values-in-a-columnfield">All values in a column/field <a href="#All-values-in-a-column/field" title="Permalink to this headline">¶</a><a class="headerlink" href="#all-values-in-a-columnfield" title="Permanent link">&para;</a></h3>
<p>In pandas, the entries in each column or <code>pd.Series</code> object must themselves be objects of the type of one of the numpy data types. Thus, when all of the values in a column are extracted, the resulting list will have depth one:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-84-1"><span class="p">[</span><span class="mi">33</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-85-1"><span class="n">col</span> <span class="o">=</span> <span class="s2">&quot;sepal_length&quot;</span>
</span><span id="__span-85-2"><span class="n">sepal_lengths</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</span><span id="__span-85-3"><span class="nb">print</span><span class="p">(</span><span class="n">sepal_lengths</span><span class="p">[:</span><span class="mi">10</span><span class="p">])</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-86-1"><span class="p">[</span><span class="mf">5.1</span><span class="p">,</span> <span class="mf">4.9</span><span class="p">,</span> <span class="mf">4.7</span><span class="p">,</span> <span class="mf">4.6</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">5.4</span><span class="p">,</span> <span class="mf">4.6</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">4.4</span><span class="p">,</span> <span class="mf">4.9</span><span class="p">]</span>
</span></code></pre></div>
<p>FiftyOne supports this functionality as well. For instance, each image in our dataset has a <a href="https://voxel51.com/docs/fiftyone/tutorials/uniqueness.html">uniqueness</a> score, which is a measure of how unique a given image is in the context of the complete dataset. We can extract these values for each image using the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.values">values()</a> method as follows:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-87-1"><span class="p">[</span><span class="mi">34</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-88-1"><span class="n">uniqueness</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&quot;uniqueness&quot;</span><span class="p">)</span>
</span><span id="__span-88-2"><span class="nb">print</span><span class="p">(</span><span class="n">uniqueness</span><span class="p">[:</span><span class="mi">10</span><span class="p">])</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-89-1"><span class="p">[</span><span class="mf">0.8175834390151201</span><span class="p">,</span> <span class="mf">0.6844698885072961</span><span class="p">,</span> <span class="mf">0.725267119762334</span><span class="p">,</span> <span class="mf">0.7164587220038886</span><span class="p">,</span> <span class="mf">0.6874799405473135</span><span class="p">,</span> <span class="mf">0.6773349111042449</span><span class="p">,</span> <span class="mf">0.6948791555330056</span><span class="p">,</span> <span class="mf">0.6157872732023304</span><span class="p">,</span> <span class="mf">0.6692531238595459</span><span class="p">,</span> <span class="mf">0.7257486965960712</span><span class="p">]</span>
</span></code></pre></div>
<p>Some of the relevant information for computer vision tasks, however, is less structured. In our example dataset, this is the case for both the <code>ground_truth</code> and <code>predictions</code> fields, each of which contains a number of object detections in the <em>embedded</em> <code>detections</code> field. The <code>values</code> method also gives us access to these embedded fields.</p>
<p>Let’s see this in action by using the <code>values</code> method to pull out the confidence score for each predicted detection:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-90-1"><span class="p">[</span><span class="mi">35</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-91-1"><span class="n">pred_confs</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&quot;predictions.detections.confidence&quot;</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-92-1"><span class="p">[</span><span class="mi">36</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-93-1"><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">pred_confs</span><span class="p">))</span>
</span><span id="__span-93-2"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pred_confs</span><span class="p">))</span>
</span><span id="__span-93-3"><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">pred_confs</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-94-1"><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="err">&#39;</span><span class="nc">list</span><span class="s1">&#39;&gt;</span>
</span><span id="__span-94-2"><span class="mi">200</span>
</span><span id="__span-94-3"><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="err">&#39;</span><span class="nc">list</span><span class="s1">&#39;&gt;</span>
</span></code></pre></div>
<p>As with <code>values("uniqueness")</code>, we get a list with one result per image. However, now we have a sublist for each image, rather than just a single value. We can peak inside one of these sublists at the confidence scores for each detection:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-95-1"><span class="p">[</span><span class="mi">37</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-96-1"><span class="nb">print</span><span class="p">(</span><span class="n">pred_confs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-97-1"><span class="p">[</span><span class="mf">0.9750854969024658</span><span class="p">,</span> <span class="mf">0.759726881980896</span><span class="p">,</span> <span class="mf">0.6569182276725769</span><span class="p">,</span> <span class="mf">0.2359301745891571</span><span class="p">,</span> <span class="mf">0.221974179148674</span><span class="p">,</span> <span class="mf">0.1965726613998413</span><span class="p">,</span> <span class="mf">0.18904592096805573</span><span class="p">,</span> <span class="mf">0.11480894684791565</span><span class="p">,</span> <span class="mf">0.11089690029621124</span><span class="p">,</span> <span class="mf">0.0971052274107933</span><span class="p">,</span> <span class="mf">0.08403241634368896</span><span class="p">,</span> <span class="mf">0.07699568569660187</span><span class="p">,</span> <span class="mf">0.058097004890441895</span><span class="p">,</span> <span class="mf">0.0519101656973362</span><span class="p">]</span>
</span></code></pre></div>
<p>Let’s get the lengths of these sublists and print the first few. In the section on <code>fo.Expression</code>, we will see a more natural (and efficient) way of performing this operation.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-98-1"><span class="p">[</span><span class="mi">38</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-99-1"><span class="n">pred_conf_lens</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pred_confs</span><span class="p">]</span>
</span><span id="__span-99-2"><span class="nb">print</span><span class="p">(</span><span class="n">pred_conf_lens</span><span class="p">[:</span><span class="mi">10</span><span class="p">])</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-100-1"><span class="p">[</span><span class="mi">14</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">]</span>
</span></code></pre></div>
<p>We can see that the number of confidence scores - and correspondingly the number of predictions - for each image is not fixed. This scenario is fairly typical in object detection tasks, where images can have varying numbers of objects!</p>
<h2 id="view-stages">View stages <a href="#View-stages" title="Permalink to this headline">¶</a><a class="headerlink" href="#view-stages" title="Permanent link">&para;</a></h2>
<h3 id="making-a-copy">Making a copy <a href="#Making-a-copy" title="Permalink to this headline">¶</a><a class="headerlink" href="#making-a-copy" title="Permanent link">&para;</a></h3>
<p>Suppose we want to make a copy of the original data and modify the copy without the changes propagating back to the original.</p>
<p>In pandas, we can do this with the <code>copy</code> method:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-101-1"><span class="p">[</span><span class="mi">39</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-102-1"><span class="n">copy_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="__span-102-2"><span class="n">copy_df</span><span class="p">[</span><span class="s1">&#39;species&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span>
</span><span id="__span-102-3"><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-103-1"><span class="p">[</span><span class="mi">39</span><span class="p">]:</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th>sepal_length</th>
<th>sepal_width</th>
<th>petal_length</th>
<th>petal_width</th>
<th>species</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr>
<td>1</td>
<td>4.9</td>
<td>3.0</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr>
<td>2</td>
<td>4.7</td>
<td>3.2</td>
<td>1.3</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr>
<td>3</td>
<td>4.6</td>
<td>3.1</td>
<td>1.5</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr>
<td>4</td>
<td>5.0</td>
<td>3.6</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
</tr>
</tbody>
</table>
<p>In FiftyOne, we can do this with the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.clone">clone()</a> method:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-104-1"><span class="p">[</span><span class="mi">40</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-105-1"><span class="n">copy_ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
</span><span id="__span-105-2"><span class="n">copy_ds</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;copy_ds&#39;</span>
</span><span id="__span-105-3"><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-106-1"><span class="n">quickstart</span>
</span></code></pre></div>
<h3 id="slicing">Slicing <a href="#Slicing" title="Permalink to this headline">¶</a><a class="headerlink" href="#slicing" title="Permanent link">&para;</a></h3>
<p>In pandas if we want to get a slice of a <code>DataFrame</code>, we can do so with the notation <code>df[start:end]</code>.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-107-1"><span class="p">[</span><span class="mi">41</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-108-1"><span class="n">start</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="__span-108-2"><span class="n">end</span> <span class="o">=</span> <span class="mi">14</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-109-1"><span class="p">[</span><span class="mi">42</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-110-1"><span class="n">df</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-111-1"><span class="p">[</span><span class="mi">42</span><span class="p">]:</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th>sepal_length</th>
<th>sepal_width</th>
<th>petal_length</th>
<th>petal_width</th>
<th>species</th>
</tr>
</thead>
<tbody>
<tr>
<td>10</td>
<td>5.4</td>
<td>3.7</td>
<td>1.5</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr>
<td>11</td>
<td>4.8</td>
<td>3.4</td>
<td>1.6</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr>
<td>12</td>
<td>4.8</td>
<td>3.0</td>
<td>1.4</td>
<td>0.1</td>
<td>setosa</td>
</tr>
<tr>
<td>13</td>
<td>4.3</td>
<td>3.0</td>
<td>1.1</td>
<td>0.1</td>
<td>setosa</td>
</tr>
</tbody>
</table>
<p>In FiftyOne, a <code>Dataset</code> can be sliced using the same notation:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-112-1"><span class="p">[</span><span class="mi">43</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-113-1"><span class="n">ds</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-114-1"><span class="p">[</span><span class="mi">43</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-115-1"><span class="n">Dataset</span><span class="p">:</span>     <span class="n">quickstart</span>
</span><span id="__span-115-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="n">image</span>
</span><span id="__span-115-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">4</span>
</span><span id="__span-115-4"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-115-5">    <span class="nb">id</span><span class="p">:</span>              <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-115-6">    <span class="n">filepath</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-115-7">    <span class="n">tags</span><span class="p">:</span>            <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-115-8">    <span class="n">metadata</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">ImageMetadata</span><span class="p">)</span>
</span><span id="__span-115-9">    <span class="n">ground_truth</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-115-10">    <span class="n">uniqueness</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-115-11">    <span class="n">predictions</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-115-12">    <span class="n">eval_tp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-115-13">    <span class="n">eval_fp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-115-14">    <span class="n">eval_fn</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-115-15">    <span class="n">abstractness</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-115-16">    <span class="n">new_const_field</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-115-17">    <span class="n">computed_field</span><span class="p">:</span>  <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-115-18"><span class="n">View</span> <span class="n">stages</span><span class="p">:</span>
</span><span id="__span-115-19">    <span class="mf">1.</span> <span class="n">Skip</span><span class="p">(</span><span class="n">skip</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="__span-115-20">    <span class="mf">2.</span> <span class="n">Limit</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</span></code></pre></div>
<p>However, as we can see from the output of the preceding command, this is merely syntactical sugar for the expression:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-116-1"><span class="p">[</span><span class="mi">44</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-117-1"><span class="n">ds</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="n">start</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-118-1"><span class="p">[</span><span class="mi">44</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-119-1"><span class="n">Dataset</span><span class="p">:</span>     <span class="n">quickstart</span>
</span><span id="__span-119-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="n">image</span>
</span><span id="__span-119-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">4</span>
</span><span id="__span-119-4"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-119-5">    <span class="nb">id</span><span class="p">:</span>              <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-119-6">    <span class="n">filepath</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-119-7">    <span class="n">tags</span><span class="p">:</span>            <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-119-8">    <span class="n">metadata</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">ImageMetadata</span><span class="p">)</span>
</span><span id="__span-119-9">    <span class="n">ground_truth</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-119-10">    <span class="n">uniqueness</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-119-11">    <span class="n">predictions</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-119-12">    <span class="n">eval_tp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-119-13">    <span class="n">eval_fp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-119-14">    <span class="n">eval_fn</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-119-15">    <span class="n">abstractness</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-119-16">    <span class="n">new_const_field</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-119-17">    <span class="n">computed_field</span><span class="p">:</span>  <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-119-18"><span class="n">View</span> <span class="n">stages</span><span class="p">:</span>
</span><span id="__span-119-19">    <span class="mf">1.</span> <span class="n">Skip</span><span class="p">(</span><span class="n">skip</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="__span-119-20">    <span class="mf">2.</span> <span class="n">Limit</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</span></code></pre></div>
<p>which utilizes the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.skip">skip()</a> and <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.limit">limit()</a> methods.</p>
<h3 id="get-random-samples">Get random samples <a href="#Get-random-samples" title="Permalink to this headline">¶</a><a class="headerlink" href="#get-random-samples" title="Permanent link">&para;</a></h3>
<p>When working with datasets, it is often the case that one might want to select a random set of samples. One typically wants either (a) a fixed number of random samples, or (b) to sample some fraction of the data randomly. We will show how to do both:</p>
<h4 id="select-kk-random-samples">Select kk random samples <a href="#Select-k-random-samples" title="Permalink to this headline">¶</a><a class="headerlink" href="#select-kk-random-samples" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-120-1"><span class="p">[</span><span class="mi">45</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-121-1"><span class="n">k</span> <span class="o">=</span> <span class="mi">20</span>
</span></code></pre></div>
<p>In pandas, you can use the <code>sample()</code> method, passing in either a number, as in <code>sample(n = k)</code>, or a fraction, as we show below</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-122-1"><span class="p">[</span><span class="mi">46</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-123-1"><span class="n">rand_samples_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="n">k</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-124-1"><span class="p">[</span><span class="mi">47</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-125-1"><span class="n">rand_samples_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-126-1"><span class="p">[</span><span class="mi">47</span><span class="p">]:</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th>sepal_length</th>
<th>sepal_width</th>
<th>petal_length</th>
<th>petal_width</th>
<th>species</th>
</tr>
</thead>
<tbody>
<tr>
<td>101</td>
<td>5.8</td>
<td>2.7</td>
<td>5.1</td>
<td>1.9</td>
<td>virginica</td>
</tr>
<tr>
<td>129</td>
<td>7.2</td>
<td>3.0</td>
<td>5.8</td>
<td>1.6</td>
<td>virginica</td>
</tr>
<tr>
<td>1</td>
<td>4.9</td>
<td>3.0</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr>
<td>79</td>
<td>5.7</td>
<td>2.6</td>
<td>3.5</td>
<td>1.0</td>
<td>versicolor</td>
</tr>
<tr>
<td>100</td>
<td>6.3</td>
<td>3.3</td>
<td>6.0</td>
<td>2.5</td>
<td>virginica</td>
</tr>
</tbody>
</table>
<p>In FiftyOne, we can use the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.take">take()</a> method, to which we can pass in a random seed, or let it seed the random number generator with the time.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-127-1"><span class="p">[</span><span class="mi">48</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-128-1"><span class="n">rand_samples_ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-129-1"><span class="p">[</span><span class="mi">49</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-130-1"><span class="n">rand_samples_ds</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-131-1"><span class="p">[</span><span class="mi">49</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-132-1"><span class="n">Dataset</span><span class="p">:</span>     <span class="n">quickstart</span>
</span><span id="__span-132-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="n">image</span>
</span><span id="__span-132-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">20</span>
</span><span id="__span-132-4"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-132-5">    <span class="nb">id</span><span class="p">:</span>              <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-132-6">    <span class="n">filepath</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-132-7">    <span class="n">tags</span><span class="p">:</span>            <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-132-8">    <span class="n">metadata</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">ImageMetadata</span><span class="p">)</span>
</span><span id="__span-132-9">    <span class="n">ground_truth</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-132-10">    <span class="n">uniqueness</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-132-11">    <span class="n">predictions</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-132-12">    <span class="n">eval_tp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-132-13">    <span class="n">eval_fp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-132-14">    <span class="n">eval_fn</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-132-15">    <span class="n">abstractness</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-132-16">    <span class="n">new_const_field</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-132-17">    <span class="n">computed_field</span><span class="p">:</span>  <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-132-18"><span class="n">View</span> <span class="n">stages</span><span class="p">:</span>
</span><span id="__span-132-19">    <span class="mf">1.</span> <span class="n">Take</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>
</span></code></pre></div>
<p>With the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.utils.random.html">random utils</a> in FiftyOne, you can also sample flexibly with user-input weighting schemes, but that is beyond the present scope.</p>
<h4 id="randomly-select-fraction-p1p1-of-samples">Randomly select fraction p&lt;1p&lt;1 of samples <a href="#Randomly-select-fraction-p&lt;1-of-samples" title="Permalink to this headline">¶</a><a class="headerlink" href="#randomly-select-fraction-p1p1-of-samples" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-133-1"><span class="p">[</span><span class="mi">50</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-134-1"><span class="n">p</span> <span class="o">=</span> <span class="mf">0.05</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-135-1"><span class="p">[</span><span class="mi">51</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-136-1"><span class="n">df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">frac</span><span class="o">=</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-137-1"><span class="p">[</span><span class="mi">51</span><span class="p">]:</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th>sepal_length</th>
<th>sepal_width</th>
<th>petal_length</th>
<th>petal_width</th>
<th>species</th>
</tr>
</thead>
<tbody>
<tr>
<td>140</td>
<td>6.7</td>
<td>3.1</td>
<td>5.6</td>
<td>2.4</td>
<td>virginica</td>
</tr>
<tr>
<td>14</td>
<td>5.8</td>
<td>4.0</td>
<td>1.2</td>
<td>0.2</td>
<td>setosa</td>
</tr>
<tr>
<td>40</td>
<td>5.0</td>
<td>3.5</td>
<td>1.3</td>
<td>0.3</td>
<td>setosa</td>
</tr>
<tr>
<td>58</td>
<td>6.6</td>
<td>2.9</td>
<td>4.6</td>
<td>1.3</td>
<td>versicolor</td>
</tr>
<tr>
<td>90</td>
<td>5.5</td>
<td>2.6</td>
<td>4.4</td>
<td>1.2</td>
<td>versicolor</td>
</tr>
</tbody>
</table>
<div class="language-python highlight"><pre><span></span><code><span id="__span-138-1"><span class="p">[</span><span class="mi">52</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-139-1"><span class="c1"># We need to convert from fraction p to an integer k</span>
</span><span id="__span-139-2"><span class="n">k</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span> <span class="o">*</span> <span class="n">p</span><span class="p">)</span>
</span><span id="__span-139-3"><span class="n">ds</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-140-1"><span class="p">[</span><span class="mi">52</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-141-1"><span class="n">Dataset</span><span class="p">:</span>     <span class="n">quickstart</span>
</span><span id="__span-141-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="n">image</span>
</span><span id="__span-141-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">10</span>
</span><span id="__span-141-4"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-141-5">    <span class="nb">id</span><span class="p">:</span>              <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-141-6">    <span class="n">filepath</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-141-7">    <span class="n">tags</span><span class="p">:</span>            <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-141-8">    <span class="n">metadata</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">ImageMetadata</span><span class="p">)</span>
</span><span id="__span-141-9">    <span class="n">ground_truth</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-141-10">    <span class="n">uniqueness</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-141-11">    <span class="n">predictions</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-141-12">    <span class="n">eval_tp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-141-13">    <span class="n">eval_fp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-141-14">    <span class="n">eval_fn</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-141-15">    <span class="n">abstractness</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-141-16">    <span class="n">new_const_field</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-141-17">    <span class="n">computed_field</span><span class="p">:</span>  <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-141-18"><span class="n">View</span> <span class="n">stages</span><span class="p">:</span>
</span><span id="__span-141-19">    <span class="mf">1.</span> <span class="n">Take</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="shuffle-data">Shuffle data <a href="#Shuffle-data" title="Permalink to this headline">¶</a><a class="headerlink" href="#shuffle-data" title="Permanent link">&para;</a></h3>
<p>In a similar vein to randomly selecting samples, one might want to create a new view in which the entire dataset is shuffled.</p>
<p>In pandas, we can accomplish this by randomly sampling all the rows (frac=1frac=1) without replacement:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-142-1"><span class="p">[</span><span class="mi">53</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-143-1"><span class="n">shuffled_df_view</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">frac</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></code></pre></div>
<p>In FiftyOne, we can just call the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.shuffle">shuffle()</a> method:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-144-1"><span class="p">[</span><span class="mi">54</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-145-1"><span class="n">shuffled_ds_view</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="filtering">Filtering <a href="#Filtering" title="Permalink to this headline">¶</a><a class="headerlink" href="#filtering" title="Permanent link">&para;</a></h3>
<p>It is also quite natural to want to filter out the data based on some condition. For the Iris data, for instance, let’s get all of the flowers that have a sepal length greater than seven:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-146-1"><span class="p">[</span><span class="mi">55</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-147-1"><span class="n">sepal_length_thresh</span> <span class="o">=</span> <span class="mi">7</span>
</span><span id="__span-147-2"><span class="n">large_sepal_len_view</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">sepal_length</span> <span class="o">&gt;</span> <span class="n">sepal_length_thresh</span><span class="p">]</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-148-1"><span class="p">[</span><span class="mi">56</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-149-1"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">large_sepal_len_view</span><span class="p">))</span>
</span><span id="__span-149-2"><span class="nb">print</span><span class="p">(</span><span class="n">large_sepal_len_view</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-150-1"><span class="mi">12</span>
</span><span id="__span-150-2">     <span class="n">sepal_length</span>  <span class="n">sepal_width</span>  <span class="n">petal_length</span>  <span class="n">petal_width</span>    <span class="n">species</span>
</span><span id="__span-150-3"><span class="mi">102</span>           <span class="mf">7.1</span>          <span class="mf">3.0</span>           <span class="mf">5.9</span>          <span class="mf">2.1</span>  <span class="n">virginica</span>
</span><span id="__span-150-4"><span class="mi">105</span>           <span class="mf">7.6</span>          <span class="mf">3.0</span>           <span class="mf">6.6</span>          <span class="mf">2.1</span>  <span class="n">virginica</span>
</span><span id="__span-150-5"><span class="mi">107</span>           <span class="mf">7.3</span>          <span class="mf">2.9</span>           <span class="mf">6.3</span>          <span class="mf">1.8</span>  <span class="n">virginica</span>
</span><span id="__span-150-6"><span class="mi">109</span>           <span class="mf">7.2</span>          <span class="mf">3.6</span>           <span class="mf">6.1</span>          <span class="mf">2.5</span>  <span class="n">virginica</span>
</span><span id="__span-150-7"><span class="mi">117</span>           <span class="mf">7.7</span>          <span class="mf">3.8</span>           <span class="mf">6.7</span>          <span class="mf">2.2</span>  <span class="n">virginica</span>
</span></code></pre></div>
<p>In FiftyOne, we can perform an analogous filtering operation on the quickstart images, using the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.match">match()</a> method and the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html#fiftyone.core.expressions.ViewField">ViewField</a> to select all images that have a “uniqueness” score above some threshold:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-151-1"><span class="p">[</span><span class="mi">57</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-152-1"><span class="n">unique_thresh</span> <span class="o">=</span> <span class="mf">0.75</span>
</span><span id="__span-152-2"><span class="n">unique_view</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;uniqueness&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">unique_thresh</span><span class="p">)</span>
</span><span id="__span-152-3"><span class="nb">print</span><span class="p">(</span><span class="n">unique_view</span><span class="p">)</span>
</span><span id="__span-152-4"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;values: &quot;</span><span class="p">,</span> <span class="n">unique_view</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&quot;uniqueness&quot;</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-153-1"><span class="n">Dataset</span><span class="p">:</span>     <span class="n">quickstart</span>
</span><span id="__span-153-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="n">image</span>
</span><span id="__span-153-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">8</span>
</span><span id="__span-153-4"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-153-5">    <span class="nb">id</span><span class="p">:</span>              <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-153-6">    <span class="n">filepath</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-153-7">    <span class="n">tags</span><span class="p">:</span>            <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-153-8">    <span class="n">metadata</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">ImageMetadata</span><span class="p">)</span>
</span><span id="__span-153-9">    <span class="n">ground_truth</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-153-10">    <span class="n">uniqueness</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-153-11">    <span class="n">predictions</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-153-12">    <span class="n">eval_tp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-153-13">    <span class="n">eval_fp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-153-14">    <span class="n">eval_fn</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-153-15">    <span class="n">abstractness</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-153-16">    <span class="n">new_const_field</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-153-17">    <span class="n">computed_field</span><span class="p">:</span>  <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-153-18"><span class="n">View</span> <span class="n">stages</span><span class="p">:</span>
</span><span id="__span-153-19">    <span class="mf">1.</span> <span class="n">Match</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;$expr&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;$gt&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">]}})</span>
</span><span id="__span-153-20"><span class="n">values</span><span class="p">:</span>  <span class="p">[</span><span class="mf">0.8175834390151201</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.922046961894074</span><span class="p">,</span> <span class="mf">0.799848556973409</span><span class="p">,</span> <span class="mf">0.7806850524560267</span><span class="p">,</span> <span class="mf">0.7950646615140298</span><span class="p">,</span> <span class="mf">0.7505336395700778</span><span class="p">,</span> <span class="mf">0.7530639609974709</span><span class="p">]</span>
</span></code></pre></div>
<p>However, in FiftyOne, given the potentially nested structure of the data in a <code>Dataset</code>, we can perform far more complex filtering operations using the same machinery, combined with the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html#fiftyone.core.expressions.ViewExpression.filter">filter()</a> method. Crucially, these matching and filtering operations apply equally well to embedded fields.</p>
<p>As an example, let’s say we want to filter for all images in our dataset that had at least one object prediction with very high confidence. In this case, the confidence score is an embedded field within the predicted detections for each image. Thus, we can create a filter on confidence scores, and then apply this filter to the embedded <code>detections</code> field within <code>predictions</code>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-154-1"><span class="p">[</span><span class="mi">58</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-155-1"><span class="n">high_conf_filter</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;confidence&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.995</span>
</span><span id="__span-155-2">
</span><span id="__span-155-3"><span class="n">high_conf_view</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
</span><span id="__span-155-4">    <span class="n">F</span><span class="p">(</span><span class="s2">&quot;predictions.detections&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">high_conf_filter</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="__span-155-5"><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-156-1"><span class="p">[</span><span class="mi">59</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-157-1"><span class="n">high_conf_view</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-158-1"><span class="p">[</span><span class="mi">59</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-159-1"><span class="n">Dataset</span><span class="p">:</span>     <span class="n">quickstart</span>
</span><span id="__span-159-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="n">image</span>
</span><span id="__span-159-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">116</span>
</span><span id="__span-159-4"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-159-5">    <span class="nb">id</span><span class="p">:</span>              <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-159-6">    <span class="n">filepath</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-159-7">    <span class="n">tags</span><span class="p">:</span>            <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-159-8">    <span class="n">metadata</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">ImageMetadata</span><span class="p">)</span>
</span><span id="__span-159-9">    <span class="n">ground_truth</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-159-10">    <span class="n">uniqueness</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-159-11">    <span class="n">predictions</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-159-12">    <span class="n">eval_tp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-159-13">    <span class="n">eval_fp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-159-14">    <span class="n">eval_fn</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-159-15">    <span class="n">abstractness</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-159-16">    <span class="n">new_const_field</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-159-17">    <span class="n">computed_field</span><span class="p">:</span>  <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-159-18"><span class="n">View</span> <span class="n">stages</span><span class="p">:</span>
</span><span id="__span-159-19">    <span class="mf">1.</span> <span class="n">Match</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;$expr&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;$gt&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">]}})</span>
</span></code></pre></div>
<p>For video tasks, the method <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.match_frames">match_frames()</a> allows one to perform filtering on the frames of a video collection.</p>
<p>We explore this filtering and matching machinery a little more in the section on expressions, but a comprehensive discussion will be the subject of an upcoming tutorial.</p>
<h3 id="sorting">Sorting <a href="#Sorting" title="Permalink to this headline">¶</a><a class="headerlink" href="#sorting" title="Permanent link">&para;</a></h3>
<p>We might also want to sort by certain properties. Let’s see how that is done in pandas and FiftyOne.</p>
<p>In pandas, we use the <code>sort_values</code> method.</p>
<p>Suppose that we want to sort by petal length. We can do this as follows:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-160-1"><span class="p">[</span><span class="mi">60</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-161-1"><span class="n">petal_length_view</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;petal_length&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-162-1"><span class="p">[</span><span class="mi">61</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-163-1"><span class="n">petal_length_view</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-164-1"><span class="p">[</span><span class="mi">61</span><span class="p">]:</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th>sepal_length</th>
<th>sepal_width</th>
<th>petal_length</th>
<th>petal_width</th>
<th>species</th>
</tr>
</thead>
<tbody>
<tr>
<td>118</td>
<td>7.7</td>
<td>2.6</td>
<td>6.9</td>
<td>2.3</td>
<td>virginica</td>
</tr>
<tr>
<td>122</td>
<td>7.7</td>
<td>2.8</td>
<td>6.7</td>
<td>2.0</td>
<td>virginica</td>
</tr>
<tr>
<td>117</td>
<td>7.7</td>
<td>3.8</td>
<td>6.7</td>
<td>2.2</td>
<td>virginica</td>
</tr>
<tr>
<td>105</td>
<td>7.6</td>
<td>3.0</td>
<td>6.6</td>
<td>2.1</td>
<td>virginica</td>
</tr>
<tr>
<td>131</td>
<td>7.9</td>
<td>3.8</td>
<td>6.4</td>
<td>2.0</td>
<td>virginica</td>
</tr>
</tbody>
</table>
<p>In FiftyOne, we use the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.sort_by">sort_by()</a> method. Let’s sort the samples by the number of “ground truth” objects in the sample images:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-165-1"><span class="p">[</span><span class="mi">62</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-166-1"><span class="n">field</span> <span class="o">=</span> <span class="s2">&quot;ground_truth.detections&quot;</span>
</span><span id="__span-166-2"><span class="n">view</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="n">field</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">(),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-167-1"><span class="p">[</span><span class="mi">63</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-168-1"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">ground_truth</span><span class="o">.</span><span class="n">detections</span><span class="p">))</span>  <span class="c1"># 39</span>
</span><span id="__span-168-2"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">last</span><span class="p">()</span><span class="o">.</span><span class="n">ground_truth</span><span class="o">.</span><span class="n">detections</span><span class="p">))</span>  <span class="c1"># 0</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-169-1"><span class="mi">39</span>
</span><span id="__span-169-2"><span class="mi">0</span>
</span></code></pre></div>
<p>Now we can see that the most crowded image has 3939 objects, while the least crowded image is actually empty!</p>
<h3 id="deleting">Deleting <a href="#Deleting" title="Permalink to this headline">¶</a><a class="headerlink" href="#deleting" title="Permanent link">&para;</a></h3>
<p>If we are resource-constrained, we can delete old <code>DataFrame</code> or <code>Dataset</code> objects so that they no longer occupy memory.</p>
<p>In pandas we do this using the <code>del</code> command and the garbage collector utility. To delete the <code>petal_length_view</code> view, we can do the following:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-170-1"><span class="p">[</span><span class="mi">64</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-171-1"><span class="kn">import</span><span class="w"> </span><span class="nn">gc</span>
</span><span id="__span-171-2"><span class="k">del</span> <span class="n">petal_length_view</span>
</span><span id="__span-171-3"><span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-172-1"><span class="p">[</span><span class="mi">64</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-173-1"><span class="mi">16</span>
</span></code></pre></div>
<p>In FiftyOne, we can use the built-in <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.delete_dataset">delete()</a> method:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-174-1"><span class="p">[</span><span class="mi">65</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-175-1"><span class="n">copy_ds</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</span></code></pre></div>
<p>It is also worth mentioning that in FiftyOne, the <code>Dataset</code> is best thought of as an in-memory object. This means that a <code>Dataset</code> is deleted after closing Python (this is true in both Python interpreters and notebooks). If you want to use the dataset in the future, you can avoid this end-of-session deletion by setting the <code>persistent</code> property to <code>True</code>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-176-1"><span class="p">[</span><span class="mi">66</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-177-1"><span class="n">ds</span><span class="o">.</span><span class="n">persistent</span> <span class="o">=</span> <span class="kc">True</span>
</span></code></pre></div>
<h2 id="aggregations">Aggregations <a href="#Aggregations" title="Permalink to this headline">¶</a><a class="headerlink" href="#aggregations" title="Permanent link">&para;</a></h2>
<p>Given a set of values for a column or field, it is often desired to compute aggregate quantities over all of these values. pandas <code>DataFrame</code> objects and FiftyOne <code>Dataset</code> objects both come with this functionality built in.</p>
<p>The general syntax is that in pandas, aggregations are methods of <code>pd.Series</code> objects, which represent the columns in a <code>DataFrame</code>. In FiftyOne, the aggregations are methods of the <code>Dataset</code> or <code>DatasetView</code> object, which take as <em>input</em> the field to be aggregated over.</p>
<h3 id="count">Count <a href="#Count" title="Permalink to this headline">¶</a><a class="headerlink" href="#count" title="Permanent link">&para;</a></h3>
<p>In both pandas and FiftyOne, the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.count">count()</a> method returns the total number of occurrences.</p>
<p>In pandas, this counts the number of values in the column, which is by construction equal to the number of rows in the <code>DataFrame</code>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-178-1"><span class="p">[</span><span class="mi">67</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-179-1"><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;species&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
</span><span id="__span-179-2"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-180-1"><span class="mi">150</span>
</span><span id="__span-180-2"><span class="mi">150</span>
</span></code></pre></div>
<p>In FiftyOne, the <code>count</code> method returns the total number of occurrences of a certain field, which is <em>not</em> necessarily the same as the number of samples.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-181-1"><span class="p">[</span><span class="mi">68</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-182-1"><span class="n">num_predictions</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;predictions.detections.label&quot;</span><span class="p">)</span>
</span><span id="__span-182-2"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="p">))</span>
</span><span id="__span-182-3"><span class="nb">print</span><span class="p">(</span><span class="n">num_predictions</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-183-1"><span class="mi">200</span>
</span><span id="__span-183-2"><span class="mi">5620</span>
</span></code></pre></div>
<h3 id="sum">Sum <a href="#Sum" title="Permalink to this headline">¶</a><a class="headerlink" href="#sum" title="Permanent link">&para;</a></h3>
<p>Both pandas and FiftyOne have the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.sum">sum()</a> method</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-184-1"><span class="p">[</span><span class="mi">69</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-185-1"><span class="n">sum_sepal_lengths</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sepal_length</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</span><span id="__span-185-2"><span class="nb">print</span><span class="p">(</span><span class="n">sum_sepal_lengths</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-186-1"><span class="mf">876.5</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-187-1"><span class="p">[</span><span class="mi">70</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-188-1"><span class="n">sum_pred_confs</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s2">&quot;predictions.detections.confidence&quot;</span><span class="p">)</span>
</span><span id="__span-188-2"><span class="nb">print</span><span class="p">(</span><span class="n">sum_pred_confs</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-189-1"><span class="mf">1966.6705134399235</span>
</span></code></pre></div>
<h3 id="unique">Unique <a href="#Unique" title="Permalink to this headline">¶</a><a class="headerlink" href="#unique" title="Permanent link">&para;</a></h3>
<p>In pandas, the <code>unique</code> method returns a list of all unique values in the input <code>pd.Series</code>.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-190-1"><span class="p">[</span><span class="mi">71</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-191-1"><span class="n">df</span><span class="o">.</span><span class="n">species</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-192-1"><span class="p">[</span><span class="mi">71</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-193-1"><span class="n">array</span><span class="p">([</span><span class="s1">&#39;setosa&#39;</span><span class="p">,</span> <span class="s1">&#39;versicolor&#39;</span><span class="p">,</span> <span class="s1">&#39;virginica&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span></code></pre></div>
<p>In FiftyOne, the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.distinct">distinct()</a> method reproduces this functionality.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-194-1"><span class="p">[</span><span class="mi">72</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-195-1"><span class="n">rand_samples_ds</span><span class="o">.</span><span class="n">distinct</span><span class="p">(</span><span class="s2">&quot;predictions.detections.label&quot;</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-196-1"><span class="p">[</span><span class="mi">72</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-197-1"><span class="p">[</span><span class="s1">&#39;banana&#39;</span><span class="p">,</span>\
</span><span id="__span-197-2"> <span class="s1">&#39;bed&#39;</span><span class="p">,</span>\
</span><span id="__span-197-3"> <span class="s1">&#39;bench&#39;</span><span class="p">,</span>\
</span><span id="__span-197-4"> <span class="s1">&#39;bicycle&#39;</span><span class="p">,</span>\
</span><span id="__span-197-5"> <span class="s1">&#39;bird&#39;</span><span class="p">,</span>\
</span><span id="__span-197-6"> <span class="s1">&#39;boat&#39;</span><span class="p">,</span>\
</span><span id="__span-197-7"> <span class="s1">&#39;book&#39;</span><span class="p">,</span>\
</span><span id="__span-197-8"> <span class="s1">&#39;bowl&#39;</span><span class="p">,</span>\
</span><span id="__span-197-9"> <span class="s1">&#39;broccoli&#39;</span><span class="p">,</span>\
</span><span id="__span-197-10"> <span class="s1">&#39;bus&#39;</span><span class="p">,</span>\
</span><span id="__span-197-11"> <span class="s1">&#39;cake&#39;</span><span class="p">,</span>\
</span><span id="__span-197-12"> <span class="s1">&#39;car&#39;</span><span class="p">,</span>\
</span><span id="__span-197-13"> <span class="s1">&#39;carrot&#39;</span><span class="p">,</span>\
</span><span id="__span-197-14"> <span class="s1">&#39;cat&#39;</span><span class="p">,</span>\
</span><span id="__span-197-15"> <span class="s1">&#39;cell phone&#39;</span><span class="p">,</span>\
</span><span id="__span-197-16"> <span class="s1">&#39;chair&#39;</span><span class="p">,</span>\
</span><span id="__span-197-17"> <span class="s1">&#39;clock&#39;</span><span class="p">,</span>\
</span><span id="__span-197-18"> <span class="s1">&#39;couch&#39;</span><span class="p">,</span>\
</span><span id="__span-197-19"> <span class="s1">&#39;cow&#39;</span><span class="p">,</span>\
</span><span id="__span-197-20"> <span class="s1">&#39;cup&#39;</span><span class="p">,</span>\
</span><span id="__span-197-21"> <span class="s1">&#39;dining table&#39;</span><span class="p">,</span>\
</span><span id="__span-197-22"> <span class="s1">&#39;dog&#39;</span><span class="p">,</span>\
</span><span id="__span-197-23"> <span class="s1">&#39;elephant&#39;</span><span class="p">,</span>\
</span><span id="__span-197-24"> <span class="s1">&#39;fire hydrant&#39;</span><span class="p">,</span>\
</span><span id="__span-197-25"> <span class="s1">&#39;fork&#39;</span><span class="p">,</span>\
</span><span id="__span-197-26"> <span class="s1">&#39;frisbee&#39;</span><span class="p">,</span>\
</span><span id="__span-197-27"> <span class="s1">&#39;giraffe&#39;</span><span class="p">,</span>\
</span><span id="__span-197-28"> <span class="s1">&#39;handbag&#39;</span><span class="p">,</span>\
</span><span id="__span-197-29"> <span class="s1">&#39;horse&#39;</span><span class="p">,</span>\
</span><span id="__span-197-30"> <span class="s1">&#39;keyboard&#39;</span><span class="p">,</span>\
</span><span id="__span-197-31"> <span class="s1">&#39;kite&#39;</span><span class="p">,</span>\
</span><span id="__span-197-32"> <span class="s1">&#39;knife&#39;</span><span class="p">,</span>\
</span><span id="__span-197-33"> <span class="s1">&#39;laptop&#39;</span><span class="p">,</span>\
</span><span id="__span-197-34"> <span class="s1">&#39;person&#39;</span><span class="p">,</span>\
</span><span id="__span-197-35"> <span class="s1">&#39;pizza&#39;</span><span class="p">,</span>\
</span><span id="__span-197-36"> <span class="s1">&#39;sandwich&#39;</span><span class="p">,</span>\
</span><span id="__span-197-37"> <span class="s1">&#39;scissors&#39;</span><span class="p">,</span>\
</span><span id="__span-197-38"> <span class="s1">&#39;sheep&#39;</span><span class="p">,</span>\
</span><span id="__span-197-39"> <span class="s1">&#39;skateboard&#39;</span><span class="p">,</span>\
</span><span id="__span-197-40"> <span class="s1">&#39;skis&#39;</span><span class="p">,</span>\
</span><span id="__span-197-41"> <span class="s1">&#39;snowboard&#39;</span><span class="p">,</span>\
</span><span id="__span-197-42"> <span class="s1">&#39;spoon&#39;</span><span class="p">,</span>\
</span><span id="__span-197-43"> <span class="s1">&#39;sports ball&#39;</span><span class="p">,</span>\
</span><span id="__span-197-44"> <span class="s1">&#39;stop sign&#39;</span><span class="p">,</span>\
</span><span id="__span-197-45"> <span class="s1">&#39;surfboard&#39;</span><span class="p">,</span>\
</span><span id="__span-197-46"> <span class="s1">&#39;tie&#39;</span><span class="p">,</span>\
</span><span id="__span-197-47"> <span class="s1">&#39;traffic light&#39;</span><span class="p">,</span>\
</span><span id="__span-197-48"> <span class="s1">&#39;train&#39;</span><span class="p">,</span>\
</span><span id="__span-197-49"> <span class="s1">&#39;truck&#39;</span><span class="p">,</span>\
</span><span id="__span-197-50"> <span class="s1">&#39;tv&#39;</span><span class="p">,</span>\
</span><span id="__span-197-51"> <span class="s1">&#39;umbrella&#39;</span><span class="p">]</span>
</span></code></pre></div>
<h3 id="bounds">Bounds <a href="#Bounds" title="Permalink to this headline">¶</a><a class="headerlink" href="#bounds" title="Permanent link">&para;</a></h3>
<p>In pandas, you compute the minimum and maximum value of a <code>pd.Series</code> separately:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-198-1"><span class="p">[</span><span class="mi">73</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-199-1"><span class="n">min_sepal_len</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sepal_length</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
</span><span id="__span-199-2"><span class="n">max_sepal_len</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sepal_length</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</span><span id="__span-199-3"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;min_sepal_len: </span><span class="si">{}</span><span class="s2">, max_sepal_len: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">min_sepal_len</span><span class="p">,</span> <span class="n">max_sepal_len</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-200-1"><span class="n">min_sepal_len</span><span class="p">:</span> <span class="mf">4.3</span><span class="p">,</span> <span class="n">max_sepal_len</span><span class="p">:</span> <span class="mf">7.9</span>
</span></code></pre></div>
<p>When working with a FiftyOne Dataset or DataView, the min and max are returned together in a tuple when the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.bounds">bounds()</a> method is called on a field:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-201-1"><span class="p">[</span><span class="mi">74</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-202-1"><span class="p">(</span><span class="n">min_pred_conf</span><span class="p">,</span> <span class="n">max_pred_conf</span><span class="p">)</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">bounds</span><span class="p">(</span><span class="s2">&quot;predictions.detections.confidence&quot;</span><span class="p">)</span>
</span><span id="__span-202-2"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;min_pred_conf: </span><span class="si">{}</span><span class="s2">, max_pred_conf: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">min_pred_conf</span><span class="p">,</span> <span class="n">max_pred_conf</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-203-1"><span class="n">min_pred_conf</span><span class="p">:</span> <span class="mf">0.05003104358911514</span><span class="p">,</span> <span class="n">max_pred_conf</span><span class="p">:</span> <span class="mf">0.9999035596847534</span>
</span></code></pre></div>
<h3 id="mean">Mean <a href="#Mean" title="Permalink to this headline">¶</a><a class="headerlink" href="#mean" title="Permanent link">&para;</a></h3>
<p>Both pandas <code>DataFrame</code> objects and FiftyOne <code>Dataset</code> objects employ the method <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.mean">mean()</a></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-204-1"><span class="p">[</span><span class="mi">75</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-205-1"><span class="n">mean_sepal_len</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sepal_length</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</span><span id="__span-205-2"><span class="nb">print</span><span class="p">(</span><span class="n">mean_sepal_len</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-206-1"><span class="mf">5.843333333333334</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-207-1"><span class="p">[</span><span class="mi">76</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-208-1"><span class="n">mean_pred_conf</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="s2">&quot;predictions.detections.confidence&quot;</span><span class="p">)</span>
</span><span id="__span-208-2"><span class="nb">print</span><span class="p">(</span><span class="n">mean_pred_conf</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-209-1"><span class="mf">0.34994137249820706</span>
</span></code></pre></div>
<h3 id="standard-deviation">Standard deviation <a href="#Standard-deviation" title="Permalink to this headline">¶</a><a class="headerlink" href="#standard-deviation" title="Permanent link">&para;</a></h3>
<p>Both pandas <code>DataFrame</code> objects and FiftyOne <code>Dataset</code> objects employ the method <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.std">std()</a>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-210-1"><span class="p">[</span><span class="mi">77</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-211-1"><span class="n">std_sepal_len</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sepal_length</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
</span><span id="__span-211-2"><span class="nb">print</span><span class="p">(</span><span class="n">std_sepal_len</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-212-1"><span class="mf">0.828066127977863</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-213-1"><span class="p">[</span><span class="mi">78</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-214-1"><span class="n">std_pred_conf</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="s2">&quot;predictions.detections.confidence&quot;</span><span class="p">)</span>
</span><span id="__span-214-2"><span class="nb">print</span><span class="p">(</span><span class="n">std_pred_conf</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-215-1"><span class="mf">0.3184061813934825</span>
</span></code></pre></div>
<h3 id="quantiles">Quantiles <a href="#Quantiles" title="Permalink to this headline">¶</a><a class="headerlink" href="#quantiles" title="Permanent link">&para;</a></h3>
<p>If you don’t want just the mean, but instead want the value for a given column or field at arbitrary percentiles in the dataset, you can use the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.quantiles">quantiles()</a> method, which takes in a list of percentiles.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-216-1"><span class="p">[</span><span class="mi">79</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-217-1"><span class="n">percentiles</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-218-1"><span class="p">[</span><span class="mi">80</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-219-1"><span class="n">sepal_len_quanties</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sepal_length</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="n">percentiles</span><span class="p">)</span>
</span><span id="__span-219-2"><span class="nb">print</span><span class="p">(</span><span class="n">sepal_len_quanties</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-220-1"><span class="mf">0.0</span>    <span class="mf">4.30</span>
</span><span id="__span-220-2"><span class="mf">0.2</span>    <span class="mf">5.00</span>
</span><span id="__span-220-3"><span class="mf">0.4</span>    <span class="mf">5.60</span>
</span><span id="__span-220-4"><span class="mf">0.6</span>    <span class="mf">6.10</span>
</span><span id="__span-220-5"><span class="mf">0.8</span>    <span class="mf">6.52</span>
</span><span id="__span-220-6"><span class="mf">1.0</span>    <span class="mf">7.90</span>
</span><span id="__span-220-7"><span class="n">Name</span><span class="p">:</span> <span class="n">sepal_length</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-221-1"><span class="p">[</span><span class="mi">81</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-222-1"><span class="n">pred_conf_quantiles</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">quantiles</span><span class="p">(</span><span class="s2">&quot;predictions.detections.confidence&quot;</span><span class="p">,</span> <span class="n">percentiles</span><span class="p">)</span>
</span><span id="__span-222-2"><span class="nb">print</span><span class="p">(</span><span class="n">pred_conf_quantiles</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-223-1"><span class="p">[</span><span class="mf">0.05003104358911514</span><span class="p">,</span> <span class="mf">0.08101843297481537</span><span class="p">,</span> <span class="mf">0.14457139372825623</span><span class="p">,</span> <span class="mf">0.2922309935092926</span><span class="p">,</span> <span class="mf">0.6890143156051636</span><span class="p">,</span> <span class="mf">0.9999035596847534</span><span class="p">]</span>
</span></code></pre></div>
<h3 id="median-and-other-aggregations">Median and other aggregations <a href="#Median-and-other-aggregations" title="Permalink to this headline">¶</a><a class="headerlink" href="#median-and-other-aggregations" title="Permanent link">&para;</a></h3>
<p>Some aggregations which are native to pandas, such as computing the median, are not native to FiftyOne. In these cases, the canonical way to compute the aggregation is by first extracting the values from the <code>Dataset</code> field, and then using native numpy or scipy functionality.</p>
<p>Here we illustrate this procedure for computing the median. If you use the <code>values</code> method on the <code>predictions.detections.confidence</code> field with default arguments, we get a jagged array.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-224-1"><span class="p">[</span><span class="mi">82</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-225-1"><span class="n">pred_confs_jagged</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&quot;predictions.detections.confidence&quot;</span><span class="p">)</span>
</span><span id="__span-225-2"><span class="nb">print</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">pc</span><span class="p">)</span> <span class="k">for</span> <span class="n">pc</span> <span class="ow">in</span> <span class="n">pred_confs_jagged</span><span class="p">][:</span><span class="mi">10</span><span class="p">])</span>
</span><span id="__span-225-3"><span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">pc</span><span class="p">)</span> <span class="k">for</span> <span class="n">pc</span> <span class="ow">in</span> <span class="n">pred_confs_jagged</span><span class="p">]))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-226-1"><span class="p">[</span><span class="mi">14</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">]</span>
</span><span id="__span-226-2"><span class="mi">5620</span>
</span></code></pre></div>
<p>However, we can simplify our lives by flattening the result passing in the argument <code>unwind = True</code>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-227-1"><span class="p">[</span><span class="mi">83</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-228-1"><span class="n">pred_confs_flat</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&quot;predictions.detections.confidence&quot;</span><span class="p">,</span> <span class="n">unwind</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="__span-228-2"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pred_confs_flat</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-229-1"><span class="mi">5620</span>
</span></code></pre></div>
<p>And from this we can easily compute the median:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-230-1"><span class="p">[</span><span class="mi">84</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-231-1"><span class="n">pred_confs_median</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">pred_confs_flat</span><span class="p">)</span>
</span><span id="__span-231-2"><span class="nb">print</span><span class="p">(</span><span class="n">pred_confs_median</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-232-1"><span class="mf">0.20251326262950897</span>
</span></code></pre></div>
<h2 id="structural-change-operations">Structural change operations <a href="#Structural-change-operations" title="Permalink to this headline">¶</a><a class="headerlink" href="#structural-change-operations" title="Permanent link">&para;</a></h2>
<h3 id="add-new-columnfield">Add new column/field <a href="#Add-new-column/field" title="Permalink to this headline">¶</a><a class="headerlink" href="#add-new-columnfield" title="Permanent link">&para;</a></h3>
<p>There are many scenarios in which one might want to add another column/field to a dataset. From a practical standpoint, these come in three distinct flavors. 1. Add a new column/field with a default (constant) value for each row/sample. 2. Add new column/field defined with external or already computed data. 3. Create new column/field programmatically from other columns/fields.</p>
<p>In this section we show how to efficiently handle each of these cases in pandas and FiftyOne.</p>
<h4 id="add-new-columnfield-with-default-value">Add new column/field with default value <a href="#Add-new-column/field-with-default-value" title="Permalink to this headline">¶</a><a class="headerlink" href="#add-new-columnfield-with-default-value" title="Permanent link">&para;</a></h4>
<p>In pandas, the easiest way to create a new column <code>const_col</code> with constant value <code>const_val</code> is:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-233-1"><span class="p">[</span><span class="mi">85</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-234-1"><span class="n">df</span><span class="p">[</span><span class="s1">&#39;const_col&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;const_val&#39;</span>
</span><span id="__span-234-2"><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-235-1"><span class="p">[</span><span class="mi">85</span><span class="p">]:</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th>sepal_length</th>
<th>sepal_width</th>
<th>petal_length</th>
<th>petal_width</th>
<th>species</th>
<th>const_col</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
</tr>
<tr>
<td>1</td>
<td>4.9</td>
<td>3.0</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
</tr>
<tr>
<td>2</td>
<td>4.7</td>
<td>3.2</td>
<td>1.3</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
</tr>
<tr>
<td>3</td>
<td>4.6</td>
<td>3.1</td>
<td>1.5</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
</tr>
<tr>
<td>4</td>
<td>5.0</td>
<td>3.6</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
</tr>
</tbody>
</table>
<p>which implicitly broadcasts the single value <code>const_val</code> to all rows in the <code>DataFrame</code>.</p>
<p>In FiftyOne, the canonical process for efficiently creating and populating a new field involves three steps. (1) a new field is added to the <code>Dataset</code> using the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.add_sample_field">add_sample_field()</a> method with <code>add_sample_field(field_name, ftype)</code>. (2) The field is populated, using either
<a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.set_field">set_field()</a> or <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.set_values">set_values()</a>, as we will illustrate below. (3) the <code>Dataset</code> or <code>DatasetView</code> is saved using <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.save">save()</a>, saving the changes.</p>
<p>There is one key distinction in usage between <code>set_field</code> and <code>set_values</code>. Whereas <code>set_values</code> sets the values on the <code>Dataset</code> directly, using <code>set_field</code> creates a new <code>DatasetView</code>, and this <code>DatasetView</code> is what must be saved!</p>
<p>Before illustrating these more efficient approaches, it is also worth mentioning that you can also loop through the samples in a <code>Dataset</code> or <code>DatasetView</code> and add or set fields one at a time.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-236-1"><span class="p">[</span><span class="mi">86</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-237-1"><span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">iter_samples</span><span class="p">(</span><span class="n">autosave</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="__span-237-2">    <span class="n">sample</span><span class="p">[</span><span class="s2">&quot;new_const_field&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">51</span>
</span><span id="__span-237-3">    <span class="n">sample</span><span class="p">[</span><span class="s2">&quot;computed_field&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">ground_truth</span><span class="o">.</span><span class="n">detections</span><span class="p">)</span>
</span></code></pre></div>
<p>However, this is <em>not</em> an efficient approach. It is recommended to use <code>set_field</code> or <code>set_values</code> instead.</p>
<p>In the simplest scenario - analogous to the Pandas example above, we can pass a single value into <code>set_field</code> along with the name of the field:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-238-1"><span class="p">[</span><span class="mi">87</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-239-1"><span class="n">ds</span><span class="o">.</span><span class="n">add_sample_field</span><span class="p">(</span><span class="s2">&quot;const_field&quot;</span><span class="p">,</span> <span class="n">fo</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-239-2"><span class="n">view</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">set_field</span><span class="p">(</span><span class="s2">&quot;const_field&quot;</span><span class="p">,</span> <span class="s2">&quot;const_val&quot;</span><span class="p">)</span>
</span><span id="__span-239-3"><span class="n">view</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="__span-239-4">
</span><span id="__span-239-5"><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">field_names</span><span class="p">)</span>
</span><span id="__span-239-6"><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&quot;const_field&quot;</span><span class="p">)[:</span><span class="mi">10</span><span class="p">])</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-240-1"><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;filepath&#39;</span><span class="p">,</span> <span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;ground_truth&#39;</span><span class="p">,</span> <span class="s1">&#39;uniqueness&#39;</span><span class="p">,</span> <span class="s1">&#39;predictions&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_tp&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_fp&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_fn&#39;</span><span class="p">,</span> <span class="s1">&#39;abstractness&#39;</span><span class="p">,</span> <span class="s1">&#39;new_const_field&#39;</span><span class="p">,</span> <span class="s1">&#39;computed_field&#39;</span><span class="p">,</span> <span class="s1">&#39;const_field&#39;</span><span class="p">)</span>
</span><span id="__span-240-2"><span class="p">[</span><span class="s1">&#39;const_val&#39;</span><span class="p">,</span> <span class="s1">&#39;const_val&#39;</span><span class="p">,</span> <span class="s1">&#39;const_val&#39;</span><span class="p">,</span> <span class="s1">&#39;const_val&#39;</span><span class="p">,</span> <span class="s1">&#39;const_val&#39;</span><span class="p">,</span> <span class="s1">&#39;const_val&#39;</span><span class="p">,</span> <span class="s1">&#39;const_val&#39;</span><span class="p">,</span> <span class="s1">&#39;const_val&#39;</span><span class="p">,</span> <span class="s1">&#39;const_val&#39;</span><span class="p">,</span> <span class="s1">&#39;const_val&#39;</span><span class="p">]</span>
</span></code></pre></div>
<p>As we will see shortly, however, <code>set_field</code> is far more flexible and powerful than this, as a result of FiftyOne’s robust matching and filtering capabilities.</p>
<h4 id="add-new-columnfield-from-external-data">Add new column/field from external data <a href="#Add-new-column/field-from-external-data" title="Permalink to this headline">¶</a><a class="headerlink" href="#add-new-columnfield-from-external-data" title="Permanent link">&para;</a></h4>
<p>Starting with pandas, suppose that our data team comes to us and tells us that now they also have the stem length for each flower, and they want us to incorporate that data into our models.</p>
<p>For instance, let’s say the stem lengths are:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-241-1"><span class="p">[</span><span class="mi">88</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-242-1"><span class="n">stem_lengths</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>
</span></code></pre></div>
<p>We can add this into our dataset using a similar syntax as above. The only difference is that this time, the assignment is taking in an array (here a numpy array) instead of a single value.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-243-1"><span class="p">[</span><span class="mi">89</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-244-1"><span class="n">df</span><span class="p">[</span><span class="s1">&#39;stem_length&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stem_lengths</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-245-1"><span class="p">[</span><span class="mi">90</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-246-1"><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-247-1"><span class="p">[</span><span class="mi">90</span><span class="p">]:</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th>sepal_length</th>
<th>sepal_width</th>
<th>petal_length</th>
<th>petal_width</th>
<th>species</th>
<th>const_col</th>
<th>stem_length</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
<td>9.519895</td>
</tr>
<tr>
<td>1</td>
<td>4.9</td>
<td>3.0</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
<td>9.230470</td>
</tr>
<tr>
<td>2</td>
<td>4.7</td>
<td>3.2</td>
<td>1.3</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
<td>8.312255</td>
</tr>
<tr>
<td>3</td>
<td>4.6</td>
<td>3.1</td>
<td>1.5</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
<td>6.762648</td>
</tr>
<tr>
<td>4</td>
<td>5.0</td>
<td>3.6</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
<td>8.624046</td>
</tr>
</tbody>
</table>
<p>In FiftyOne, we can do something similar by passing an array of values into <code>set_values</code>.</p>
<p>As an example, let’s say we have an <code>abstractness</code> score between zero and one for each image.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-248-1"><span class="p">[</span><span class="mi">91</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-249-1"><span class="n">abstractness</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-250-1"><span class="p">[</span><span class="mi">92</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-251-1"><span class="n">ds</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="s2">&quot;abstractness&quot;</span><span class="p">,</span> <span class="n">abstractness</span><span class="p">)</span>
</span><span id="__span-251-2"><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">field_names</span><span class="p">)</span>
</span><span id="__span-251-3"><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&quot;abstractness&quot;</span><span class="p">)[:</span><span class="mi">10</span><span class="p">])</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-252-1"><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;filepath&#39;</span><span class="p">,</span> <span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;ground_truth&#39;</span><span class="p">,</span> <span class="s1">&#39;uniqueness&#39;</span><span class="p">,</span> <span class="s1">&#39;predictions&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_tp&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_fp&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_fn&#39;</span><span class="p">,</span> <span class="s1">&#39;abstractness&#39;</span><span class="p">,</span> <span class="s1">&#39;new_const_field&#39;</span><span class="p">,</span> <span class="s1">&#39;computed_field&#39;</span><span class="p">,</span> <span class="s1">&#39;const_field&#39;</span><span class="p">)</span>
</span><span id="__span-252-2"><span class="p">[</span><span class="mf">0.18992196548662132</span><span class="p">,</span> <span class="mf">0.4195423356383746</span><span class="p">,</span> <span class="mf">0.9782249923275138</span><span class="p">,</span> <span class="mf">0.3555547463728417</span><span class="p">,</span> <span class="mf">0.9019379850096877</span><span class="p">,</span> <span class="mf">0.3647814428112852</span><span class="p">,</span> <span class="mf">0.3030278060870243</span><span class="p">,</span> <span class="mf">0.241988161650587</span><span class="p">,</span> <span class="mf">0.7872455674533378</span><span class="p">,</span> <span class="mf">0.44774858997738953</span><span class="p">]</span>
</span></code></pre></div>
<p>Note that when using <code>set_values</code> we are modifying the <code>Dataset</code> directly. Thus, as opposed to <code>set_field</code>, we do not need to preface the method call with <code>add_sample_field</code>, and we do not need to explicitly save the <code>Dataset</code> with <code>save</code> afterwards.</p>
<h4 id="add-a-new-columnframe-from-existing-columnsfields">Add a new column/frame from existing columns/fields <a href="#Add-a-new-column/frame-from-existing-columns/fields" title="Permalink to this headline">¶</a><a class="headerlink" href="#add-a-new-columnframe-from-existing-columnsfields" title="Permanent link">&para;</a></h4>
<p>Finally, often either in the process of feature engineering or data analysis, you want to generate new columns or fields from existing ones.</p>
<p>In pandas, the canonical way of doing this is with the <code>apply</code> method. Suppose we want to create a new feature called “sepal volume” derived by taking the product of sepal length and sepal width. With <code>apply</code> we can map row-wise onto the columns:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-253-1"><span class="p">[</span><span class="mi">93</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-254-1"><span class="n">df</span><span class="p">[</span><span class="s2">&quot;sepal_volume&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">]</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;sepal_width&quot;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-255-1"><span class="p">[</span><span class="mi">94</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-256-1"><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-257-1"><span class="p">[</span><span class="mi">94</span><span class="p">]:</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th>sepal_length</th>
<th>sepal_width</th>
<th>petal_length</th>
<th>petal_width</th>
<th>species</th>
<th>const_col</th>
<th>stem_length</th>
<th>sepal_volume</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
<td>9.519895</td>
<td>17.85</td>
</tr>
<tr>
<td>1</td>
<td>4.9</td>
<td>3.0</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
<td>9.230470</td>
<td>14.70</td>
</tr>
<tr>
<td>2</td>
<td>4.7</td>
<td>3.2</td>
<td>1.3</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
<td>8.312255</td>
<td>15.04</td>
</tr>
<tr>
<td>3</td>
<td>4.6</td>
<td>3.1</td>
<td>1.5</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
<td>6.762648</td>
<td>14.26</td>
</tr>
<tr>
<td>4</td>
<td>5.0</td>
<td>3.6</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
<td>8.624046</td>
<td>18.00</td>
</tr>
</tbody>
</table>
<p>In FiftyOne, we can perform operations like this by combining <code>set_field</code> with the <code>Viewfield</code>, here loaded as <code>F</code>.</p>
<p>To compute the number of predicted object detections for each sample in the <code>Dataset</code> we can write:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-258-1"><span class="p">[</span><span class="mi">95</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-259-1"><span class="n">view</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">set_field</span><span class="p">(</span>
</span><span id="__span-259-2">    <span class="s2">&quot;predictions.num_predictions&quot;</span><span class="p">,</span>
</span><span id="__span-259-3">    <span class="n">F</span><span class="p">(</span><span class="s2">&quot;$predictions.detections&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">(),</span>
</span><span id="__span-259-4"><span class="p">)</span>
</span><span id="__span-259-5"><span class="n">view</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="__span-259-6"><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">predictions</span><span class="o">.</span><span class="n">field_names</span><span class="p">)</span>
</span><span id="__span-259-7"><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&quot;predictions.num_predictions&quot;</span><span class="p">)[:</span><span class="mi">10</span><span class="p">])</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-260-1"><span class="p">(</span><span class="s1">&#39;detections&#39;</span><span class="p">,</span> <span class="s1">&#39;num_predictions&#39;</span><span class="p">)</span>
</span><span id="__span-260-2"><span class="p">[</span><span class="mi">14</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">]</span>
</span></code></pre></div>
<p>The above also highlights that all of the aforementioned operations also work on embedded fields. Note however that as we are not changing the base field_schema, we do not need to call <code>add_sample_field</code>!</p>
<h3 id="remove-a-columnfield">Remove a column/field <a href="#Remove-a-column/field" title="Permalink to this headline">¶</a><a class="headerlink" href="#remove-a-columnfield" title="Permanent link">&para;</a></h3>
<p>Sometimes you want to look at a dataset <em>without</em> a certain column/field. More precisely, there are two related things one might want to do. 1. Create a new view of the dataset without specific column/field, or 2. Delete specific column/field from the original dataset.</p>
<p>Here, we show how to do both of these in Pandas and FiftyOne.</p>
<p>In pandas, you can create a view without specific columns using the <code>drop</code> method:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-261-1"><span class="p">[</span><span class="mi">96</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-262-1"><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-263-1"><span class="p">[</span><span class="mi">96</span><span class="p">]:</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th>sepal_length</th>
<th>sepal_width</th>
<th>petal_length</th>
<th>petal_width</th>
<th>species</th>
<th>const_col</th>
<th>stem_length</th>
<th>sepal_volume</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
<td>9.519895</td>
<td>17.85</td>
</tr>
<tr>
<td>1</td>
<td>4.9</td>
<td>3.0</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
<td>9.230470</td>
<td>14.70</td>
</tr>
<tr>
<td>2</td>
<td>4.7</td>
<td>3.2</td>
<td>1.3</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
<td>8.312255</td>
<td>15.04</td>
</tr>
<tr>
<td>3</td>
<td>4.6</td>
<td>3.1</td>
<td>1.5</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
<td>6.762648</td>
<td>14.26</td>
</tr>
<tr>
<td>4</td>
<td>5.0</td>
<td>3.6</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>const_val</td>
<td>8.624046</td>
<td>18.00</td>
</tr>
</tbody>
</table>
<div class="language-python highlight"><pre><span></span><code><span id="__span-264-1"><span class="p">[</span><span class="mi">97</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-265-1"><span class="n">no_const_view</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s2">&quot;const_col&quot;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-265-2"><span class="c1"># equvalent to df.drop(columns=[&quot;const&quot;])</span>
</span><span id="__span-265-3">
</span><span id="__span-265-4"><span class="n">no_const_view</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-266-1"><span class="p">[</span><span class="mi">97</span><span class="p">]:</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th>sepal_length</th>
<th>sepal_width</th>
<th>petal_length</th>
<th>petal_width</th>
<th>species</th>
<th>stem_length</th>
<th>sepal_volume</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>9.519895</td>
<td>17.85</td>
</tr>
<tr>
<td>1</td>
<td>4.9</td>
<td>3.0</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>9.230470</td>
<td>14.70</td>
</tr>
<tr>
<td>2</td>
<td>4.7</td>
<td>3.2</td>
<td>1.3</td>
<td>0.2</td>
<td>setosa</td>
<td>8.312255</td>
<td>15.04</td>
</tr>
<tr>
<td>3</td>
<td>4.6</td>
<td>3.1</td>
<td>1.5</td>
<td>0.2</td>
<td>setosa</td>
<td>6.762648</td>
<td>14.26</td>
</tr>
<tr>
<td>4</td>
<td>5.0</td>
<td>3.6</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>8.624046</td>
<td>18.00</td>
</tr>
</tbody>
</table>
<p>If one wants to delete the column from the original <code>DataFrame</code>, one does so by assigning the variable for the original <code>DataFrame</code> to the dropped view:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-267-1"><span class="p">[</span><span class="mi">98</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-268-1"><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s2">&quot;const_col&quot;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-268-2"><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-269-1"><span class="p">[</span><span class="mi">98</span><span class="p">]:</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th>sepal_length</th>
<th>sepal_width</th>
<th>petal_length</th>
<th>petal_width</th>
<th>species</th>
<th>stem_length</th>
<th>sepal_volume</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>9.519895</td>
<td>17.85</td>
</tr>
<tr>
<td>1</td>
<td>4.9</td>
<td>3.0</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>9.230470</td>
<td>14.70</td>
</tr>
<tr>
<td>2</td>
<td>4.7</td>
<td>3.2</td>
<td>1.3</td>
<td>0.2</td>
<td>setosa</td>
<td>8.312255</td>
<td>15.04</td>
</tr>
<tr>
<td>3</td>
<td>4.6</td>
<td>3.1</td>
<td>1.5</td>
<td>0.2</td>
<td>setosa</td>
<td>6.762648</td>
<td>14.26</td>
</tr>
<tr>
<td>4</td>
<td>5.0</td>
<td>3.6</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>8.624046</td>
<td>18.00</td>
</tr>
</tbody>
</table>
<p>In FiftyOne, you can create a <code>ViewStage</code> without a particular field using the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.exclude_fields">exclude_fields()</a> method:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-270-1"><span class="p">[</span><span class="mi">99</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-271-1"><span class="n">no_predictions_view</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">exclude_fields</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">)</span>
</span><span id="__span-271-2"><span class="nb">print</span><span class="p">(</span><span class="n">no_predictions_view</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">field_names</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-272-1"><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;filepath&#39;</span><span class="p">,</span> <span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;ground_truth&#39;</span><span class="p">,</span> <span class="s1">&#39;uniqueness&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_tp&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_fp&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_fn&#39;</span><span class="p">,</span> <span class="s1">&#39;abstractness&#39;</span><span class="p">,</span> <span class="s1">&#39;new_const_field&#39;</span><span class="p">,</span> <span class="s1">&#39;computed_field&#39;</span><span class="p">,</span> <span class="s1">&#39;const_field&#39;</span><span class="p">)</span>
</span></code></pre></div>
<p>Alternatively, you can delete a field from the <code>Dataset</code> using <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.delete_sample_field">delete_sample_field()</a>.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-273-1"><span class="p">[</span><span class="mi">100</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-274-1"><span class="n">ds</span><span class="o">.</span><span class="n">delete_sample_field</span><span class="p">(</span><span class="s2">&quot;const_field&quot;</span><span class="p">)</span>
</span><span id="__span-274-2"><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">field_names</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-275-1"><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;filepath&#39;</span><span class="p">,</span> <span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;ground_truth&#39;</span><span class="p">,</span> <span class="s1">&#39;uniqueness&#39;</span><span class="p">,</span> <span class="s1">&#39;predictions&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_tp&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_fp&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_fn&#39;</span><span class="p">,</span> <span class="s1">&#39;abstractness&#39;</span><span class="p">,</span> <span class="s1">&#39;new_const_field&#39;</span><span class="p">,</span> <span class="s1">&#39;computed_field&#39;</span><span class="p">)</span>
</span></code></pre></div>
<p>Both the <code>exclude_field</code> and <code>delete_sample_field</code> methods also work with embedded fields:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-276-1"><span class="p">[</span><span class="mi">101</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-277-1"><span class="n">ds</span><span class="o">.</span><span class="n">delete_sample_field</span><span class="p">(</span><span class="s2">&quot;predictions.num_predictions&quot;</span><span class="p">)</span>
</span><span id="__span-277-2"><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">predictions</span><span class="o">.</span><span class="n">field_names</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-278-1"><span class="p">(</span><span class="s1">&#39;detections&#39;</span><span class="p">,)</span>
</span></code></pre></div>
<p>To delete multiple fields at once, you can use the related <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.delete_sample_fields">delete_sample_fields()</a> method.</p>
<h3 id="keep-only-specified-columnsfields">Keep only specified columns/fields <a href="#Keep-only-specified-columns/fields" title="Permalink to this headline">¶</a><a class="headerlink" href="#keep-only-specified-columnsfields" title="Permanent link">&para;</a></h3>
<p>Alternatively, if you only want to create a view with a small subset of columns/fields, it might be easier to specify those directly. As with removing columns, this can be done in a way that creates a new view while preserving the original, or in a way that deletes the columns/fields from the original dataset. We show both approaches below.</p>
<p>In pandas, to create a new view with only the “sepal_length” and “sepal_width” columns, one could write:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-279-1"><span class="p">[</span><span class="mi">102</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-280-1"><span class="n">sepal_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_width&quot;</span><span class="p">]]</span>
</span><span id="__span-280-2"><span class="n">sepal_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-281-1"><span class="p">[</span><span class="mi">102</span><span class="p">]:</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th>sepal_length</th>
<th>sepal_width</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>5.1</td>
<td>3.5</td>
</tr>
<tr>
<td>1</td>
<td>4.9</td>
<td>3.0</td>
</tr>
<tr>
<td>2</td>
<td>4.7</td>
<td>3.2</td>
</tr>
<tr>
<td>3</td>
<td>4.6</td>
<td>3.1</td>
</tr>
<tr>
<td>4</td>
<td>5.0</td>
<td>3.6</td>
</tr>
</tbody>
</table>
<p>In contrast, the following propagates the changes back to the original <code>DataFrame</code>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-282-1"><span class="p">[</span><span class="mi">103</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-283-1"><span class="n">sepal_df</span> <span class="o">=</span> <span class="n">sepal_df</span><span class="p">[[</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">]]</span>
</span><span id="__span-283-2"><span class="n">sepal_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-284-1"><span class="p">[</span><span class="mi">103</span><span class="p">]:</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th>sepal_length</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>5.1</td>
</tr>
<tr>
<td>1</td>
<td>4.9</td>
</tr>
<tr>
<td>2</td>
<td>4.7</td>
</tr>
<tr>
<td>3</td>
<td>4.6</td>
</tr>
<tr>
<td>4</td>
<td>5.0</td>
</tr>
</tbody>
</table>
<p>In FiftyOne, if we want to create a separate view with only specified fields kept, we should first clone the original dataset and then apply the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.select_fields">select_fields()</a> method. when we apply the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.patches.html#fiftyone.core.patches.EvaluationPatchesView.keep_fields">keep_fields()</a> method following application of <code>select_fields</code>, the
changes propagate from the <code>DatasetView</code> back to the underlying <code>Dataset</code>.</p>
<p>Let’s create two clones of our base <code>Dataset</code> to showcase this distinction.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-285-1"><span class="p">[</span><span class="mi">104</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-286-1"><span class="n">ds_clone1</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
</span><span id="__span-286-2"><span class="n">ds_clone2</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
</span></code></pre></div>
<p>For both of these clones, let’s create views which select only the <code>ground_truth</code> field:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-287-1"><span class="p">[</span><span class="mi">105</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-288-1"><span class="n">clone1_view</span> <span class="o">=</span> <span class="n">ds_clone1</span><span class="o">.</span><span class="n">select_fields</span><span class="p">(</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">)</span>
</span><span id="__span-288-2"><span class="n">clone2_view</span> <span class="o">=</span> <span class="n">ds_clone2</span><span class="o">.</span><span class="n">select_fields</span><span class="p">(</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">)</span>
</span><span id="__span-288-3"><span class="nb">print</span><span class="p">(</span><span class="n">clone1_view</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">field_names</span><span class="p">)</span>
</span><span id="__span-288-4"><span class="nb">print</span><span class="p">(</span><span class="n">clone2_view</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">field_names</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-289-1"><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;filepath&#39;</span><span class="p">,</span> <span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;ground_truth&#39;</span><span class="p">)</span>
</span><span id="__span-289-2"><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;filepath&#39;</span><span class="p">,</span> <span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;ground_truth&#39;</span><span class="p">)</span>
</span></code></pre></div>
<p>The <code>id</code>, <code>filepath</code>, <code>tags</code>, and <code>metadata</code> are by default preserved, even when not passed in to <code>select_fields</code>. Aside from these and <code>ground_truth</code>, all other fields have been omitted from view. Now let’s only apply <code>keep_fields</code> on the first clone, and see what changes propagate back.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-290-1"><span class="p">[</span><span class="mi">106</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-291-1"><span class="n">clone1_view</span><span class="o">.</span><span class="n">keep_fields</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-292-1"><span class="p">[</span><span class="mi">107</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-293-1"><span class="nb">print</span><span class="p">(</span><span class="n">ds_clone1</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">field_names</span><span class="p">)</span>
</span><span id="__span-293-2"><span class="nb">print</span><span class="p">(</span><span class="n">ds_clone2</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">field_names</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-294-1"><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;filepath&#39;</span><span class="p">,</span> <span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;ground_truth&#39;</span><span class="p">)</span>
</span><span id="__span-294-2"><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;filepath&#39;</span><span class="p">,</span> <span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;ground_truth&#39;</span><span class="p">,</span> <span class="s1">&#39;uniqueness&#39;</span><span class="p">,</span> <span class="s1">&#39;predictions&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_tp&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_fp&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_fn&#39;</span><span class="p">,</span> <span class="s1">&#39;abstractness&#39;</span><span class="p">,</span> <span class="s1">&#39;new_const_field&#39;</span><span class="p">,</span> <span class="s1">&#39;computed_field&#39;</span><span class="p">)</span>
</span></code></pre></div>
<p>As we can see, the changes only propagated back to the dataset (in this case <code>ds_clone1</code>) when we applied <code>keep_fields</code>.</p>
<p>Finally, we note that when dealing with video datasets, the methods <code>exclude_fields</code> and <code>select_fields</code> have analogous methods for frames - <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.exclude_frames">exclude_frames()</a> and <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.select_frames">select_frames()</a>.</p>
<h3 id="concatenation">Concatenation <a href="#Concatenation" title="Permalink to this headline">¶</a><a class="headerlink" href="#concatenation" title="Permanent link">&para;</a></h3>
<p>Suppose we have two datasets we want to combine or concatenate.</p>
<p>In both pandas and FiftyOne, we can concatenate them using the <code>concat</code> method.</p>
<p>In pandas, we can combine two <code>DataFrame</code> objects:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-295-1"><span class="p">[</span><span class="mi">108</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-296-1"><span class="n">df1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">species</span> <span class="o">==</span> <span class="s1">&#39;setosa&#39;</span><span class="p">]</span>
</span><span id="__span-296-2"><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">species</span> <span class="o">==</span> <span class="s1">&#39;virginica&#39;</span><span class="p">]</span>
</span><span id="__span-296-3"><span class="n">concat_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">])</span>
</span><span id="__span-296-4"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">concat_df</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-297-1"><span class="mi">100</span>
</span></code></pre></div>
<p>In FiftyOne, we can use the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.concat">concat()</a> method to combine views from the same dataset:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-298-1"><span class="p">[</span><span class="mi">109</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-299-1"><span class="n">view1</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;uniqueness&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.2</span><span class="p">)</span>
</span><span id="__span-299-2"><span class="n">view2</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;uniqueness&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.7</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-300-1"><span class="p">[</span><span class="mi">110</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-301-1"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">view1</span><span class="p">))</span>
</span><span id="__span-301-2"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">view2</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-302-1"><span class="mi">19</span>
</span><span id="__span-302-2"><span class="mi">17</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-303-1"><span class="p">[</span><span class="mi">111</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-304-1"><span class="n">concat_view</span> <span class="o">=</span> <span class="n">view1</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">view2</span><span class="p">)</span>
</span><span id="__span-304-2"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">view1</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">view2</span><span class="p">))</span>
</span><span id="__span-304-3"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">concat_view</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-305-1"><span class="mi">36</span>
</span><span id="__span-305-2"><span class="mi">36</span>
</span></code></pre></div>
<p>The slightly more complicated operation of concatenating <code>Dataset</code> objects <code>ds1</code> and <code>ds2</code> (as opposed to <code>DatasetView</code> objects) can be achieved using <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html?highlight=merge_samples#fiftyone.core.dataset.Dataset.merge_samples">merge_samples()</a>, i.e., <code>ds1.merge_samples(ds2)</code>.</p>
<h3 id="adding-a-single-rowsample">Adding a single row/sample <a href="#Adding-a-single-row/sample" title="Permalink to this headline">¶</a><a class="headerlink" href="#adding-a-single-rowsample" title="Permanent link">&para;</a></h3>
<p>Often times, we just want to enhance a dataset by adding in one sample at a time.</p>
<p>In pandas, the fastest way to do this is to use the same <code>concat</code> method as above. If the row data is in a dictionary format, we convert it to its own <code>DataFrame</code> first.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-306-1"><span class="p">[</span><span class="mi">112</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-307-1"><span class="nb">len</span><span class="p">(</span><span class="n">df1</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-308-1"><span class="p">[</span><span class="mi">112</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-309-1"><span class="mi">50</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-310-1"><span class="p">[</span><span class="mi">113</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-311-1"><span class="n">single_row</span> <span class="o">=</span> <span class="n">df2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-311-2"><span class="n">df1_plus</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df1</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">single_row</span><span class="p">])],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-311-3"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df1_plus</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-312-1"><span class="mi">51</span>
</span></code></pre></div>
<p>In FiftyOne, we can use the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.add_sample">add_sample()</a> method. Notice that this is an <em>in-place</em> operation, and no assignment is needed. Also note that this does not work for views - a sample can only be added to a <code>Dataset</code>, not to a <code>Dataview</code>. As such, we first clone the view to turn it into its own <code>Dataset</code>.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-313-1"><span class="p">[</span><span class="mi">114</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-314-1"><span class="n">single_sample</span> <span class="o">=</span> <span class="n">view2</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span><span id="__span-314-2"><span class="n">view1_plus</span> <span class="o">=</span> <span class="n">view1</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
</span><span id="__span-314-3"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">view1_plus</span><span class="p">))</span>
</span><span id="__span-314-4"><span class="n">view1_plus</span><span class="o">.</span><span class="n">add_sample</span><span class="p">(</span><span class="n">single_sample</span><span class="p">)</span>
</span><span id="__span-314-5"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">view1_plus</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-315-1"><span class="mi">19</span>
</span><span id="__span-315-2"><span class="mi">20</span>
</span></code></pre></div>
<p>We can also add a collection of samples to a dataset using the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.add_samples">add_samples()</a> method, which takes as input a list of <code>fo.Sample</code> objects.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-316-1"><span class="p">[</span><span class="mi">115</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-317-1"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">view1_plus</span><span class="p">))</span>
</span><span id="__span-317-2"><span class="n">view1_plus</span><span class="o">.</span><span class="n">add_samples</span><span class="p">(</span><span class="n">view2</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</span><span id="__span-317-3"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">view1_plus</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-318-1"><span class="mi">20</span>
</span><span id="__span-318-2"> <span class="mi">100</span><span class="o">%</span> <span class="o">|</span><span class="err">█████████████████████</span><span class="o">|</span> <span class="mi">3</span><span class="o">/</span><span class="mi">3</span> <span class="p">[</span><span class="mf">35.6</span><span class="n">ms</span> <span class="n">elapsed</span><span class="p">,</span> <span class="mi">0</span><span class="n">s</span> <span class="n">remaining</span><span class="p">,</span> <span class="mf">84.2</span> <span class="n">samples</span><span class="o">/</span><span class="n">s</span><span class="p">]</span>
</span><span id="__span-318-3"><span class="mi">23</span>
</span></code></pre></div>
<h3 id="remove-rowssamples">Remove rows/samples <a href="#Remove-rows/samples" title="Permalink to this headline">¶</a><a class="headerlink" href="#remove-rowssamples" title="Permanent link">&para;</a></h3>
<p>The same in-place vs out-of-place considerations for pandas, and <code>Dataset</code> vs <code>DatasetView</code> considerations for FiftyOne apply to rows/samples as applied to columns/fields.</p>
<p>In pandas, rows are removed by index using the <code>drop</code> method.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-319-1"><span class="p">[</span><span class="mi">116</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-320-1"><span class="c1">### Randomly select a set of rows to remove</span>
</span><span id="__span-320-2"><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
</span><span id="__span-320-3"><span class="n">rows_to_remove</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)),</span> <span class="mi">10</span><span class="p">)</span>
</span></code></pre></div>
<p>To create a new view:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-321-1"><span class="p">[</span><span class="mi">117</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-322-1"><span class="n">sub_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">rows_to_remove</span><span class="p">)</span>
</span><span id="__span-322-2"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sub_df</span><span class="p">))</span>
</span><span id="__span-322-3"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-323-1"><span class="mi">140</span>
</span><span id="__span-323-2"><span class="mi">150</span>
</span></code></pre></div>
<p>To remove the rows from the original <code>DataFrame</code>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-324-1"><span class="p">[</span><span class="mi">118</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-325-1"><span class="n">copy_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="__span-325-2"><span class="n">copy_df</span> <span class="o">=</span> <span class="n">copy_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">rows_to_remove</span><span class="p">)</span>
</span><span id="__span-325-3"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">copy_df</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-326-1"><span class="mi">140</span>
</span></code></pre></div>
<p>In FiftyOne, <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.exclude">exclude()</a> creates a view without the specified samples:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-327-1"><span class="p">[</span><span class="mi">119</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-328-1"><span class="n">samples_to_remove</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-329-1"><span class="p">[</span><span class="mi">120</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-330-1"><span class="n">sub_view</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="n">samples_to_remove</span><span class="p">)</span>
</span><span id="__span-330-2"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="p">))</span>
</span><span id="__span-330-3"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sub_view</span><span class="p">))</span>
</span><span id="__span-330-4"><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">sub_view</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-331-1"><span class="mi">200</span>
</span><span id="__span-331-2"><span class="mi">190</span>
</span><span id="__span-331-3"><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="err">&#39;</span><span class="nc">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">DatasetView</span><span class="s1">&#39;&gt;</span>
</span></code></pre></div>
<p>On the other hand, <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.delete_samples">delete_samples()</a> is an in-place operation which deletes the samples from the underlying <code>Dataset</code>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-332-1"><span class="p">[</span><span class="mi">121</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-333-1"><span class="n">sub_ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
</span><span id="__span-333-2"><span class="n">sub_ds</span><span class="o">.</span><span class="n">delete_samples</span><span class="p">(</span><span class="n">samples_to_remove</span><span class="p">)</span>
</span><span id="__span-333-3"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sub_ds</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-334-1"><span class="mi">190</span>
</span></code></pre></div>
<h3 id="keep-only-specified-rowssamples">Keep only specified rows/samples <a href="#Keep-only-specified-rows/samples" title="Permalink to this headline">¶</a><a class="headerlink" href="#keep-only-specified-rowssamples" title="Permanent link">&para;</a></h3>
<p>As with columns/fields, one might want to pick out specific rows/samples. In the section on filtering and expressions, we’ll cover more advanced operations. Here we show how to select the data corresponding to a given list of rows/samples.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-335-1"><span class="p">[</span><span class="mi">122</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-336-1"><span class="n">rows_to_keep</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)),</span> <span class="mi">80</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-337-1"><span class="p">[</span><span class="mi">123</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-338-1"><span class="n">sub_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">rows_to_keep</span><span class="p">]</span>
</span><span id="__span-338-2"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sub_df</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-339-1"><span class="mi">80</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-340-1"><span class="p">[</span><span class="mi">124</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-341-1"><span class="n">sample_ids</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
</span><span id="__span-341-2"><span class="n">ids_to_keep</span> <span class="o">=</span> <span class="p">[</span><span class="n">sample_ids</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span> <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="n">rows_to_keep</span><span class="p">]</span>
</span><span id="__span-341-3"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ids_to_keep</span><span class="p">))</span>
</span><span id="__span-341-4"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">ids_to_keep</span><span class="p">)))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-342-1"><span class="mi">80</span>
</span><span id="__span-342-2"><span class="mi">80</span>
</span></code></pre></div>
<h3 id="rename-columnfield">Rename column/field <a href="#Rename-column/field" title="Permalink to this headline">¶</a><a class="headerlink" href="#rename-columnfield" title="Permanent link">&para;</a></h3>
<p>In pandas, you can rename columns by passing a dictionary or mapping into the <code>rename()</code> method with the <code>columns</code> argument. This is <em>not</em> an in-place operation:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-343-1"><span class="p">[</span><span class="mi">125</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-344-1"><span class="n">renamed_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">:</span> <span class="s2">&quot;sl&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_width&quot;</span><span class="p">:</span> <span class="s2">&quot;sw&quot;</span><span class="p">})</span>
</span><span id="__span-344-2"><span class="n">renamed_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-345-1"><span class="p">[</span><span class="mi">125</span><span class="p">]:</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th>sl</th>
<th>sw</th>
<th>petal_length</th>
<th>petal_width</th>
<th>species</th>
<th>stem_length</th>
<th>sepal_volume</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>9.519895</td>
<td>17.85</td>
</tr>
<tr>
<td>1</td>
<td>4.9</td>
<td>3.0</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>9.230470</td>
<td>14.70</td>
</tr>
<tr>
<td>2</td>
<td>4.7</td>
<td>3.2</td>
<td>1.3</td>
<td>0.2</td>
<td>setosa</td>
<td>8.312255</td>
<td>15.04</td>
</tr>
<tr>
<td>3</td>
<td>4.6</td>
<td>3.1</td>
<td>1.5</td>
<td>0.2</td>
<td>setosa</td>
<td>6.762648</td>
<td>14.26</td>
</tr>
<tr>
<td>4</td>
<td>5.0</td>
<td>3.6</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>8.624046</td>
<td>18.00</td>
</tr>
</tbody>
</table>
<p>In FiftyOne, you can rename fields using an analogous (but in-place) name mapping, passed in to the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.rename_sample_fields">rename_sample_fields()</a> method.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-346-1"><span class="p">[</span><span class="mi">126</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-347-1"><span class="n">renamed_ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
</span><span id="__span-347-2"><span class="n">renamed_ds</span><span class="o">.</span><span class="n">rename_sample_fields</span><span class="p">({</span><span class="s2">&quot;ground_truth&quot;</span><span class="p">:</span> <span class="s2">&quot;gt&quot;</span><span class="p">,</span> <span class="s2">&quot;predictions&quot;</span><span class="p">:</span><span class="s2">&quot;pred&quot;</span><span class="p">})</span>
</span><span id="__span-347-3"><span class="nb">print</span><span class="p">(</span><span class="n">renamed_ds</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">field_names</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-348-1"><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;filepath&#39;</span><span class="p">,</span> <span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;gt&#39;</span><span class="p">,</span> <span class="s1">&#39;uniqueness&#39;</span><span class="p">,</span> <span class="s1">&#39;pred&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_tp&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_fp&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_fn&#39;</span><span class="p">,</span> <span class="s1">&#39;abstractness&#39;</span><span class="p">,</span> <span class="s1">&#39;new_const_field&#39;</span><span class="p">,</span> <span class="s1">&#39;computed_field&#39;</span><span class="p">)</span>
</span></code></pre></div>
<p>Alternatively, if you just want to rename a single field, you can also do so with the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.dataset.html#fiftyone.core.dataset.Dataset.rename_sample_field">rename_sample_field()</a> method as <code>rename_sample_field(old_field_name, new_field_name)</code>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-349-1"><span class="p">[</span><span class="mi">127</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-350-1"><span class="n">renamed_ds</span><span class="o">.</span><span class="n">rename_sample_field</span><span class="p">(</span><span class="s2">&quot;gt&quot;</span><span class="p">,</span> <span class="s2">&quot;gt_new&quot;</span><span class="p">)</span>
</span><span id="__span-350-2"><span class="nb">print</span><span class="p">(</span><span class="n">renamed_ds</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">field_names</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-351-1"><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;filepath&#39;</span><span class="p">,</span> <span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;gt_new&#39;</span><span class="p">,</span> <span class="s1">&#39;uniqueness&#39;</span><span class="p">,</span> <span class="s1">&#39;pred&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_tp&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_fp&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_fn&#39;</span><span class="p">,</span> <span class="s1">&#39;abstractness&#39;</span><span class="p">,</span> <span class="s1">&#39;new_const_field&#39;</span><span class="p">,</span> <span class="s1">&#39;computed_field&#39;</span><span class="p">)</span>
</span></code></pre></div>
<p>Both of these methods extend naturally to embedded fields:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-352-1"><span class="p">[</span><span class="mi">128</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-353-1"><span class="n">renamed_ds</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">pred</span><span class="o">.</span><span class="n">detections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">eval_iou</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-354-1"><span class="p">[</span><span class="mi">128</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-355-1"><span class="mf">0.8575063187115628</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-356-1"><span class="p">[</span><span class="mi">129</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-357-1"><span class="n">renamed_ds</span><span class="o">.</span><span class="n">rename_sample_field</span><span class="p">(</span><span class="s2">&quot;pred.detections.eval_iou&quot;</span><span class="p">,</span> <span class="s2">&quot;pred.detections.iou&quot;</span><span class="p">)</span>
</span><span id="__span-357-2"><span class="nb">print</span><span class="p">(</span><span class="n">renamed_ds</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">pred</span><span class="o">.</span><span class="n">detections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">field_names</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-358-1"><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;attributes&#39;</span><span class="p">,</span> <span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;bounding_box&#39;</span><span class="p">,</span> <span class="s1">&#39;mask&#39;</span><span class="p">,</span> <span class="s1">&#39;confidence&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;eval&#39;</span><span class="p">,</span> <span class="s1">&#39;eval_id&#39;</span><span class="p">,</span> <span class="s1">&#39;iou&#39;</span><span class="p">)</span>
</span></code></pre></div>
<h2 id="expressions">Expressions <a href="#Expressions" title="Permalink to this headline">¶</a><a class="headerlink" href="#expressions" title="Permanent link">&para;</a></h2>
<p>As introduced above, the <code>filter</code>, and <code>match</code> methods, along with the <code>ViewField</code>, can be remarkably useful in selecting subsets of datasets that satisfy user-defined conditions. In this section, we demonstrate how to combine these components to perform Pandas-style queries.</p>
<p>A common theme throughout this section is that while in pandas, expressions (over a given set of rows) can only be applied to the values in the columns, in FiftyOne, expressions can be applied to fields, including embedded fields, or directly to labels or tags! As such, FiftyOne provides <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.match_labels">match_labels()</a> and
<a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.collections.html#fiftyone.core.collections.SampleCollection.match_tags">match_tags()</a> methods.</p>
<h3 id="element-comparison-expressions">Element comparison expressions <a href="#Element-comparison-expressions" title="Permalink to this headline">¶</a><a class="headerlink" href="#element-comparison-expressions" title="Permanent link">&para;</a></h3>
<p>In both pandas and FiftyOne, the element comparison operators <code>==</code>, <code>&gt;</code>, <code>&lt;</code>, <code>!=</code>, <code>&gt;=</code>, and <code>&lt;=</code> all conform to the same syntax. The following examples show this functionality.</p>
<h4 id="exact-equality">Exact equality <a href="#Exact-equality" title="Permalink to this headline">¶</a><a class="headerlink" href="#exact-equality" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-359-1"><span class="p">[</span><span class="mi">130</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-360-1"><span class="n">setosa_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">species</span> <span class="o">==</span> <span class="s2">&quot;setosa&quot;</span><span class="p">]</span>
</span><span id="__span-360-2"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">setosa_df</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-361-1"><span class="mi">50</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-362-1"><span class="p">[</span><span class="mi">131</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-363-1"><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;filepath&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;/root/fiftyone/quickstart/data/000880.jpg&#39;</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-364-1"><span class="p">[</span><span class="mi">131</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-365-1"><span class="n">Dataset</span><span class="p">:</span>     <span class="n">quickstart</span>
</span><span id="__span-365-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="n">image</span>
</span><span id="__span-365-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">0</span>
</span><span id="__span-365-4"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-365-5">    <span class="nb">id</span><span class="p">:</span>              <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-365-6">    <span class="n">filepath</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-365-7">    <span class="n">tags</span><span class="p">:</span>            <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-365-8">    <span class="n">metadata</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">ImageMetadata</span><span class="p">)</span>
</span><span id="__span-365-9">    <span class="n">ground_truth</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-365-10">    <span class="n">uniqueness</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-365-11">    <span class="n">predictions</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-365-12">    <span class="n">eval_tp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-365-13">    <span class="n">eval_fp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-365-14">    <span class="n">eval_fn</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-365-15">    <span class="n">abstractness</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-365-16">    <span class="n">new_const_field</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-365-17">    <span class="n">computed_field</span><span class="p">:</span>  <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-365-18"><span class="n">View</span> <span class="n">stages</span><span class="p">:</span>
</span><span id="__span-365-19">    <span class="mf">1.</span> <span class="n">Match</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;$expr&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;$eq&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">]}})</span>
</span></code></pre></div>
<h4 id="less-than-or-equal-to">Less than or equal to <a href="#Less-than-or-equal-to" title="Permalink to this headline">¶</a><a class="headerlink" href="#less-than-or-equal-to" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-366-1"><span class="p">[</span><span class="mi">132</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-367-1"><span class="n">short_sepal_cond</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sepal_length</span> <span class="o">&lt;=</span> <span class="mi">5</span>
</span><span id="__span-367-2"><span class="n">short_sepal_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">short_sepal_cond</span><span class="p">]</span>
</span><span id="__span-367-3"><span class="n">short_sepal_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-368-1"><span class="p">[</span><span class="mi">132</span><span class="p">]:</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th>sepal_length</th>
<th>sepal_width</th>
<th>petal_length</th>
<th>petal_width</th>
<th>species</th>
<th>stem_length</th>
<th>sepal_volume</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>4.9</td>
<td>3.0</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>9.230470</td>
<td>14.70</td>
</tr>
<tr>
<td>2</td>
<td>4.7</td>
<td>3.2</td>
<td>1.3</td>
<td>0.2</td>
<td>setosa</td>
<td>8.312255</td>
<td>15.04</td>
</tr>
<tr>
<td>3</td>
<td>4.6</td>
<td>3.1</td>
<td>1.5</td>
<td>0.2</td>
<td>setosa</td>
<td>6.762648</td>
<td>14.26</td>
</tr>
<tr>
<td>4</td>
<td>5.0</td>
<td>3.6</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>8.624046</td>
<td>18.00</td>
</tr>
<tr>
<td>6</td>
<td>4.6</td>
<td>3.4</td>
<td>1.4</td>
<td>0.3</td>
<td>setosa</td>
<td>5.066091</td>
<td>15.64</td>
</tr>
</tbody>
</table>
<div class="language-python highlight"><pre><span></span><code><span id="__span-369-1"><span class="p">[</span><span class="mi">133</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-370-1"><span class="n">non_unique_filter</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;uniqueness&quot;</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">0.2</span>
</span><span id="__span-370-2"><span class="n">non_unique_view</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">non_unique_filter</span><span class="p">)</span>
</span><span id="__span-370-3"><span class="n">non_unique_view</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-371-1"><span class="p">[</span><span class="mi">133</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-372-1"><span class="n">Dataset</span><span class="p">:</span>     <span class="n">quickstart</span>
</span><span id="__span-372-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="n">image</span>
</span><span id="__span-372-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">19</span>
</span><span id="__span-372-4"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-372-5">    <span class="nb">id</span><span class="p">:</span>              <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-372-6">    <span class="n">filepath</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-372-7">    <span class="n">tags</span><span class="p">:</span>            <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-372-8">    <span class="n">metadata</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">ImageMetadata</span><span class="p">)</span>
</span><span id="__span-372-9">    <span class="n">ground_truth</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-372-10">    <span class="n">uniqueness</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-372-11">    <span class="n">predictions</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-372-12">    <span class="n">eval_tp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-372-13">    <span class="n">eval_fp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-372-14">    <span class="n">eval_fn</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-372-15">    <span class="n">abstractness</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-372-16">    <span class="n">new_const_field</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-372-17">    <span class="n">computed_field</span><span class="p">:</span>  <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-372-18"><span class="n">View</span> <span class="n">stages</span><span class="p">:</span>
</span><span id="__span-372-19">    <span class="mf">1.</span> <span class="n">Match</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;$expr&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;$lte&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">]}})</span>
</span></code></pre></div>
<h3 id="logical-expressions">Logical expressions <a href="#Logical-expressions" title="Permalink to this headline">¶</a><a class="headerlink" href="#logical-expressions" title="Permanent link">&para;</a></h3>
<h4 id="logical-complement">Logical complement <a href="#Logical-complement" title="Permalink to this headline">¶</a><a class="headerlink" href="#logical-complement" title="Permanent link">&para;</a></h4>
<p>If we have an expression and we want to find all rows/samples that do not satisfy this expression, we can use the complement operator <code>~</code>. Let’s use this to get the complementary rows/samples to those picked out by the expression above:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-373-1"><span class="p">[</span><span class="mi">134</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-374-1"><span class="n">non_short_sepal_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="o">~</span><span class="n">short_sepal_cond</span><span class="p">]</span>
</span><span id="__span-374-2"><span class="n">non_short_sepal_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-375-1"><span class="p">[</span><span class="mi">134</span><span class="p">]:</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th>sepal_length</th>
<th>sepal_width</th>
<th>petal_length</th>
<th>petal_width</th>
<th>species</th>
<th>stem_length</th>
<th>sepal_volume</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa</td>
<td>9.519895</td>
<td>17.85</td>
</tr>
<tr>
<td>5</td>
<td>5.4</td>
<td>3.9</td>
<td>1.7</td>
<td>0.4</td>
<td>setosa</td>
<td>9.171235</td>
<td>21.06</td>
</tr>
<tr>
<td>10</td>
<td>5.4</td>
<td>3.7</td>
<td>1.5</td>
<td>0.2</td>
<td>setosa</td>
<td>8.236024</td>
<td>19.98</td>
</tr>
<tr>
<td>14</td>
<td>5.8</td>
<td>4.0</td>
<td>1.2</td>
<td>0.2</td>
<td>setosa</td>
<td>5.914960</td>
<td>23.20</td>
</tr>
<tr>
<td>15</td>
<td>5.7</td>
<td>4.4</td>
<td>1.5</td>
<td>0.4</td>
<td>setosa</td>
<td>6.215238</td>
<td>25.08</td>
</tr>
</tbody>
</table>
<div class="language-python highlight"><pre><span></span><code><span id="__span-376-1"><span class="p">[</span><span class="mi">135</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-377-1"><span class="n">unique_view</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="o">~</span><span class="n">non_unique_filter</span><span class="p">)</span>
</span><span id="__span-377-2"><span class="n">unique_view</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-378-1"><span class="p">[</span><span class="mi">135</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-379-1"><span class="n">Dataset</span><span class="p">:</span>     <span class="n">quickstart</span>
</span><span id="__span-379-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="n">image</span>
</span><span id="__span-379-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">181</span>
</span><span id="__span-379-4"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-379-5">    <span class="nb">id</span><span class="p">:</span>              <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-379-6">    <span class="n">filepath</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-379-7">    <span class="n">tags</span><span class="p">:</span>            <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-379-8">    <span class="n">metadata</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">ImageMetadata</span><span class="p">)</span>
</span><span id="__span-379-9">    <span class="n">ground_truth</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-379-10">    <span class="n">uniqueness</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-379-11">    <span class="n">predictions</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-379-12">    <span class="n">eval_tp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-379-13">    <span class="n">eval_fp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-379-14">    <span class="n">eval_fn</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-379-15">    <span class="n">abstractness</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-379-16">    <span class="n">new_const_field</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-379-17">    <span class="n">computed_field</span><span class="p">:</span>  <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-379-18"><span class="n">View</span> <span class="n">stages</span><span class="p">:</span>
</span><span id="__span-379-19">    <span class="mf">1.</span> <span class="n">Match</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;$expr&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;$not&#39;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">}}})</span>
</span></code></pre></div>
<h4 id="logical-and">Logical AND <a href="#Logical-AND" title="Permalink to this headline">¶</a><a class="headerlink" href="#logical-and" title="Permanent link">&para;</a></h4>
<p>In pandas and FiftyOne, the logical <code>AND</code> of two conditions can be evaluated with the <code>&amp;</code> operator:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-380-1"><span class="p">[</span><span class="mi">136</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-381-1"><span class="n">pd_cond1</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">sepal_volume</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">)</span>
</span><span id="__span-381-2"><span class="n">pd_cond2</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">species</span> <span class="o">==</span> <span class="s2">&quot;setosa&quot;</span><span class="p">)</span>
</span><span id="__span-381-3"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> rows satisfy condition1&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">pd_cond1</span><span class="p">])))</span>
</span><span id="__span-381-4"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> rows satisfy condition2&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">pd_cond2</span><span class="p">])))</span>
</span><span id="__span-381-5"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> rows satisfy condition1 AND condition2&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">pd_cond1</span> <span class="o">&amp;</span> <span class="n">pd_cond2</span><span class="p">])))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-382-1"><span class="mi">109</span> <span class="n">rows</span> <span class="n">satisfy</span> <span class="n">condition1</span>
</span><span id="__span-382-2"><span class="mi">50</span> <span class="n">rows</span> <span class="n">satisfy</span> <span class="n">condition2</span>
</span><span id="__span-382-3"><span class="mi">43</span> <span class="n">rows</span> <span class="n">satisfy</span> <span class="n">condition1</span> <span class="n">AND</span> <span class="n">condition2</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-383-1"><span class="p">[</span><span class="mi">137</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-384-1"><span class="n">fo_cond1</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;uniqueness&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.4</span>
</span><span id="__span-384-2"><span class="n">fo_cond2</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;uniqueness&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.55</span>
</span><span id="__span-384-3"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> samples satisfy condition1&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">fo_cond1</span><span class="p">))))</span>
</span><span id="__span-384-4"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> samples satisfy condition2&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">fo_cond2</span><span class="p">))))</span>
</span><span id="__span-384-5"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> samples satisfy condition1 AND condition2&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">fo_cond1</span> <span class="o">&amp;</span> <span class="n">fo_cond2</span><span class="p">))))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-385-1"><span class="mi">100</span> <span class="n">samples</span> <span class="n">satisfy</span> <span class="n">condition1</span>
</span><span id="__span-385-2"><span class="mi">109</span> <span class="n">samples</span> <span class="n">satisfy</span> <span class="n">condition2</span>
</span><span id="__span-385-3"><span class="mi">9</span> <span class="n">samples</span> <span class="n">satisfy</span> <span class="n">condition1</span> <span class="n">AND</span> <span class="n">condition2</span>
</span></code></pre></div>
<p>Additionally, if we want to evaluate the logical <code>AND</code> of a list of conditions, in FiftyOne we can do so using <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html?highlight=viewexpression#fiftyone.core.expressions.ViewExpression.all">all()</a>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-386-1"><span class="p">[</span><span class="mi">138</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-387-1"><span class="n">fo_cond3</span> <span class="o">=</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;predictions.detections&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mi">10</span>
</span><span id="__span-387-2"><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="o">.</span><span class="n">all</span><span class="p">([</span><span class="n">fo_cond1</span><span class="p">,</span> <span class="n">fo_cond2</span><span class="p">,</span> <span class="n">fo_cond3</span><span class="p">])))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-388-1"><span class="n">Dataset</span><span class="p">:</span>     <span class="n">quickstart</span>
</span><span id="__span-388-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="n">image</span>
</span><span id="__span-388-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">5</span>
</span><span id="__span-388-4"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-388-5">    <span class="nb">id</span><span class="p">:</span>              <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-388-6">    <span class="n">filepath</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-388-7">    <span class="n">tags</span><span class="p">:</span>            <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-388-8">    <span class="n">metadata</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">ImageMetadata</span><span class="p">)</span>
</span><span id="__span-388-9">    <span class="n">ground_truth</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-388-10">    <span class="n">uniqueness</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-388-11">    <span class="n">predictions</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-388-12">    <span class="n">eval_tp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-388-13">    <span class="n">eval_fp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-388-14">    <span class="n">eval_fn</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-388-15">    <span class="n">abstractness</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-388-16">    <span class="n">new_const_field</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-388-17">    <span class="n">computed_field</span><span class="p">:</span>  <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-388-18"><span class="n">View</span> <span class="n">stages</span><span class="p">:</span>
</span><span id="__span-388-19">    <span class="mf">1.</span> <span class="n">Match</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;$expr&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;$and&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">]}})</span>
</span></code></pre></div>
<h4 id="logical-or">Logical OR <a href="#Logical-OR" title="Permalink to this headline">¶</a><a class="headerlink" href="#logical-or" title="Permanent link">&para;</a></h4>
<p>In pandas and FiftyOne, the logical <code>OR</code> of two conditions can be evaluated with the <code>|</code> operator:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-389-1"><span class="p">[</span><span class="mi">139</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-390-1"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> rows satisfy condition1&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">pd_cond1</span><span class="p">])))</span>
</span><span id="__span-390-2"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> rows satisfy condition2&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">pd_cond2</span><span class="p">])))</span>
</span><span id="__span-390-3"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> rows satisfy condition1 OR condition2&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">pd_cond1</span> <span class="o">|</span> <span class="n">pd_cond2</span><span class="p">])))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-391-1"><span class="mi">109</span> <span class="n">rows</span> <span class="n">satisfy</span> <span class="n">condition1</span>
</span><span id="__span-391-2"><span class="mi">50</span> <span class="n">rows</span> <span class="n">satisfy</span> <span class="n">condition2</span>
</span><span id="__span-391-3"><span class="mi">116</span> <span class="n">rows</span> <span class="n">satisfy</span> <span class="n">condition1</span> <span class="n">OR</span> <span class="n">condition2</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-392-1"><span class="p">[</span><span class="mi">140</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-393-1"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> samples satisfy condition1&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">fo_cond1</span><span class="p">))))</span>
</span><span id="__span-393-2"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> samples satisfy condition3&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">fo_cond3</span><span class="p">))))</span>
</span><span id="__span-393-3"><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> samples satisfy condition1 OR condition3&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">fo_cond1</span> <span class="o">|</span> <span class="n">fo_cond3</span><span class="p">))))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-394-1"><span class="mi">100</span> <span class="n">samples</span> <span class="n">satisfy</span> <span class="n">condition1</span>
</span><span id="__span-394-2"><span class="mi">134</span> <span class="n">samples</span> <span class="n">satisfy</span> <span class="n">condition3</span>
</span><span id="__span-394-3"><span class="mi">166</span> <span class="n">samples</span> <span class="n">satisfy</span> <span class="n">condition1</span> <span class="n">OR</span> <span class="n">condition3</span>
</span></code></pre></div>
<p>Mirroring our usage of <code>all</code>, in FiftyOne we can use <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html?highlight=viewexpression#fiftyone.core.expressions.ViewExpression.any">any()</a> to evaluate the logical <code>OR</code> of a list of conditions:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-395-1"><span class="p">[</span><span class="mi">141</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-396-1"><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="o">.</span><span class="n">any</span><span class="p">([</span><span class="n">fo_cond1</span><span class="p">,</span> <span class="n">fo_cond3</span><span class="p">])))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-397-1"><span class="n">Dataset</span><span class="p">:</span>     <span class="n">quickstart</span>
</span><span id="__span-397-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="n">image</span>
</span><span id="__span-397-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">166</span>
</span><span id="__span-397-4"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-397-5">    <span class="nb">id</span><span class="p">:</span>              <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-397-6">    <span class="n">filepath</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-397-7">    <span class="n">tags</span><span class="p">:</span>            <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-397-8">    <span class="n">metadata</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">ImageMetadata</span><span class="p">)</span>
</span><span id="__span-397-9">    <span class="n">ground_truth</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-397-10">    <span class="n">uniqueness</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-397-11">    <span class="n">predictions</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-397-12">    <span class="n">eval_tp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-397-13">    <span class="n">eval_fp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-397-14">    <span class="n">eval_fn</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-397-15">    <span class="n">abstractness</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-397-16">    <span class="n">new_const_field</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-397-17">    <span class="n">computed_field</span><span class="p">:</span>  <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-397-18"><span class="n">View</span> <span class="n">stages</span><span class="p">:</span>
</span><span id="__span-397-19">    <span class="mf">1.</span> <span class="n">Match</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;$expr&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;$or&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">]}})</span>
</span></code></pre></div>
<p>We note that these <code>all</code> and <code>any</code> methods in FiftyOne are distinctly different from the methods with the same names in pandas.</p>
<h3 id="subset-superset">Subset-superset <a href="#Subset-superset" title="Permalink to this headline">¶</a><a class="headerlink" href="#subset-superset" title="Permanent link">&para;</a></h3>
<h4 id="is-in">Is in <a href="#Is-in" title="Permalink to this headline">¶</a><a class="headerlink" href="#is-in" title="Permanent link">&para;</a></h4>
<p>In pandas, we can check whether the entries in a column are in a given list of values using the <code>isin</code> method:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-398-1"><span class="p">[</span><span class="mi">142</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-399-1"><span class="n">df</span><span class="o">.</span><span class="n">species</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;setosa&#39;</span><span class="p">,</span> <span class="s1">&#39;versicolor&#39;</span><span class="p">])</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-400-1"><span class="p">[</span><span class="mi">142</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-401-1"><span class="mi">0</span>       <span class="kc">True</span>
</span><span id="__span-401-2"><span class="mi">1</span>       <span class="kc">True</span>
</span><span id="__span-401-3"><span class="mi">2</span>       <span class="kc">True</span>
</span><span id="__span-401-4"><span class="mi">3</span>       <span class="kc">True</span>
</span><span id="__span-401-5"><span class="mi">4</span>       <span class="kc">True</span>
</span><span id="__span-401-6">       <span class="o">...</span>
</span><span id="__span-401-7"><span class="mi">145</span>    <span class="kc">False</span>
</span><span id="__span-401-8"><span class="mi">146</span>    <span class="kc">False</span>
</span><span id="__span-401-9"><span class="mi">147</span>    <span class="kc">False</span>
</span><span id="__span-401-10"><span class="mi">148</span>    <span class="kc">False</span>
</span><span id="__span-401-11"><span class="mi">149</span>    <span class="kc">False</span>
</span><span id="__span-401-12"><span class="n">Name</span><span class="p">:</span> <span class="n">species</span><span class="p">,</span> <span class="n">Length</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">bool</span>
</span></code></pre></div>
<p>In FiftyOne, the analogous method is <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html?highlight=viewexpression#fiftyone.core.expressions.ViewExpression.is_in">is_in()</a>. We can filter our dataset for only detected animals, for instance, with the following:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-402-1"><span class="p">[</span><span class="mi">143</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-403-1"><span class="n">ANIMALS</span> <span class="o">=</span> <span class="p">[</span>\
</span><span id="__span-403-2">    <span class="s2">&quot;bear&quot;</span><span class="p">,</span> <span class="s2">&quot;bird&quot;</span><span class="p">,</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;cow&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="s2">&quot;elephant&quot;</span><span class="p">,</span> <span class="s2">&quot;giraffe&quot;</span><span class="p">,</span>\
</span><span id="__span-403-3">    <span class="s2">&quot;horse&quot;</span><span class="p">,</span> <span class="s2">&quot;sheep&quot;</span><span class="p">,</span> <span class="s2">&quot;zebra&quot;</span>\
</span><span id="__span-403-4"><span class="p">]</span>
</span><span id="__span-403-5">
</span><span id="__span-403-6"><span class="n">animal_view</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">,</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_in</span><span class="p">(</span><span class="n">ANIMALS</span><span class="p">))</span>
</span><span id="__span-403-7"><span class="nb">print</span><span class="p">(</span><span class="n">animal_view</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-404-1"><span class="n">Dataset</span><span class="p">:</span>     <span class="n">quickstart</span>
</span><span id="__span-404-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="n">image</span>
</span><span id="__span-404-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">87</span>
</span><span id="__span-404-4"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-404-5">    <span class="nb">id</span><span class="p">:</span>              <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-404-6">    <span class="n">filepath</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-404-7">    <span class="n">tags</span><span class="p">:</span>            <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-404-8">    <span class="n">metadata</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">ImageMetadata</span><span class="p">)</span>
</span><span id="__span-404-9">    <span class="n">ground_truth</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-404-10">    <span class="n">uniqueness</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-404-11">    <span class="n">predictions</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-404-12">    <span class="n">eval_tp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-404-13">    <span class="n">eval_fp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-404-14">    <span class="n">eval_fn</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-404-15">    <span class="n">abstractness</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-404-16">    <span class="n">new_const_field</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-404-17">    <span class="n">computed_field</span><span class="p">:</span>  <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-404-18"><span class="n">View</span> <span class="n">stages</span><span class="p">:</span>
</span><span id="__span-404-19">    <span class="mf">1.</span> <span class="n">FilterLabels</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s1">&#39;predictions&#39;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;$in&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;$$this.label&#39;</span><span class="p">,</span> <span class="p">[</span><span class="o">...</span><span class="p">]]},</span> <span class="n">only_matches</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">trajectories</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></code></pre></div>
<p>Additionally, when the FiftyOne fields contain lists, we might want to check if these lists are subsets of other lists. We can do this with the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html?highlight=viewexpression#fiftyone.core.expressions.ViewExpression.is_subset">is_subset()</a> method:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-405-1"><span class="p">[</span><span class="mi">144</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-406-1"><span class="n">empty_dataset</span><span class="o">.</span><span class="n">add_samples</span><span class="p">(</span>
</span><span id="__span-406-2">    <span class="p">[</span>\
</span><span id="__span-406-3">        <span class="n">fo</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span>\
</span><span id="__span-406-4">            <span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;image1.jpg&quot;</span><span class="p">,</span>\
</span><span id="__span-406-5">            <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]</span>\
</span><span id="__span-406-6">        <span class="p">)</span>\
</span><span id="__span-406-7">    <span class="p">]</span>
</span><span id="__span-406-8"><span class="p">)</span>
</span><span id="__span-406-9">
</span><span id="__span-406-10"><span class="nb">print</span><span class="p">(</span><span class="n">empty_dataset</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_subset</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-407-1"> <span class="mi">100</span><span class="o">%</span> <span class="o">|</span><span class="err">█████████████████████</span><span class="o">|</span> <span class="mi">1</span><span class="o">/</span><span class="mi">1</span> <span class="p">[</span><span class="mf">6.3</span><span class="n">ms</span> <span class="n">elapsed</span><span class="p">,</span> <span class="mi">0</span><span class="n">s</span> <span class="n">remaining</span><span class="p">,</span> <span class="mf">177.5</span> <span class="n">samples</span><span class="o">/</span><span class="n">s</span><span class="p">]</span>
</span><span id="__span-407-2"><span class="p">[</span><span class="kc">True</span><span class="p">]</span>
</span></code></pre></div>
<h4 id="contains">Contains <a href="#Contains" title="Permalink to this headline">¶</a><a class="headerlink" href="#contains" title="Permanent link">&para;</a></h4>
<p>We can also flip this operation on its head and ask whether the column/field entries contain something else. In pandas, the entries in a <code>DataFrame</code> cannot be lists, so the only sensible type of containment is string containment, i.e., checking whether the strings in a column contain a substring:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-408-1"><span class="p">[</span><span class="mi">145</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-409-1"><span class="n">df</span><span class="o">.</span><span class="n">species</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;set&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-410-1"><span class="p">[</span><span class="mi">145</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-411-1"><span class="mi">50</span>
</span></code></pre></div>
<p>This has a parallel in FiftyOne: <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html?highlight=viewexpression#fiftyone.core.expressions.ViewExpression.contains_str">contains_str()</a>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-412-1"><span class="p">[</span><span class="mi">146</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-413-1"><span class="n">ze_view</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">filter_labels</span><span class="p">(</span><span class="s2">&quot;predictions&quot;</span><span class="p">,</span> <span class="n">F</span><span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">contains_str</span><span class="p">(</span><span class="s2">&quot;ze&quot;</span><span class="p">))</span>
</span><span id="__span-413-2"><span class="nb">print</span><span class="p">(</span><span class="n">ze_view</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-414-1"><span class="n">Dataset</span><span class="p">:</span>     <span class="n">quickstart</span>
</span><span id="__span-414-2"><span class="n">Media</span> <span class="nb">type</span><span class="p">:</span>  <span class="n">image</span>
</span><span id="__span-414-3"><span class="n">Num</span> <span class="n">samples</span><span class="p">:</span> <span class="mi">5</span>
</span><span id="__span-414-4"><span class="n">Sample</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="__span-414-5">    <span class="nb">id</span><span class="p">:</span>              <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ObjectIdField</span>
</span><span id="__span-414-6">    <span class="n">filepath</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span>
</span><span id="__span-414-7">    <span class="n">tags</span><span class="p">:</span>            <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">StringField</span><span class="p">)</span>
</span><span id="__span-414-8">    <span class="n">metadata</span><span class="p">:</span>        <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">ImageMetadata</span><span class="p">)</span>
</span><span id="__span-414-9">    <span class="n">ground_truth</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-414-10">    <span class="n">uniqueness</span><span class="p">:</span>      <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-414-11">    <span class="n">predictions</span><span class="p">:</span>     <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">EmbeddedDocumentField</span><span class="p">(</span><span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Detections</span><span class="p">)</span>
</span><span id="__span-414-12">    <span class="n">eval_tp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-414-13">    <span class="n">eval_fp</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-414-14">    <span class="n">eval_fn</span><span class="p">:</span>         <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-414-15">    <span class="n">abstractness</span><span class="p">:</span>    <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
</span><span id="__span-414-16">    <span class="n">new_const_field</span><span class="p">:</span> <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-414-17">    <span class="n">computed_field</span><span class="p">:</span>  <span class="n">fiftyone</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">IntField</span>
</span><span id="__span-414-18"><span class="n">View</span> <span class="n">stages</span><span class="p">:</span>
</span><span id="__span-414-19">    <span class="mf">1.</span> <span class="n">FilterLabels</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s1">&#39;predictions&#39;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;$regexMatch&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;input&#39;</span><span class="p">:</span> <span class="s1">&#39;$$this.label&#39;</span><span class="p">,</span> <span class="s1">&#39;options&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;regex&#39;</span><span class="p">:</span> <span class="s1">&#39;ze&#39;</span><span class="p">}},</span> <span class="n">only_matches</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">trajectories</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></code></pre></div>
<p>On a related note, FiftyOne has other useful string operations, including <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html?highlight=viewexpression#fiftyone.core.expressions.ViewExpression.ends_with">starts_with()</a> and <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html?highlight=viewexpression#fiftyone.core.expressions.ViewExpression.ends_with">ends_with()</a>.</p>
<p>What’s more, in FiftyOne, where fields themselves <em>can</em> be lists, we can check containment in those lists using the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html?highlight=viewexpression#fiftyone.core.expressions.ViewExpression.contains">contains()</a> method.</p>
<p>If we want to create a view which contains either cats <em>or</em> dogs, we can do so with:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-415-1"><span class="p">[</span><span class="mi">147</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-416-1"><span class="c1"># Only contains samples with &quot;cat&quot; or &quot;dog&quot; predictions</span>
</span><span id="__span-416-2"><span class="n">cats_or_dogs_view</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
</span><span id="__span-416-3">    <span class="n">F</span><span class="p">(</span><span class="s2">&quot;predictions.detections.label&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">contains</span><span class="p">([</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">])</span>
</span><span id="__span-416-4"><span class="p">)</span>
</span><span id="__span-416-5"><span class="nb">print</span><span class="p">(</span><span class="n">cats_or_dogs_view</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-417-1"><span class="mi">39</span>
</span></code></pre></div>
<p>If instead we want a view of all samples that contain both cats <em>and</em> dogs, we can pass in the <code>all=True</code> argument:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-418-1"><span class="p">[</span><span class="mi">148</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-419-1"><span class="c1"># Only contains samples with &quot;cat&quot; and &quot;dog&quot; predictions</span>
</span><span id="__span-419-2"><span class="n">cats_and_dogs_view</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
</span><span id="__span-419-3">    <span class="n">F</span><span class="p">(</span><span class="s2">&quot;predictions.detections.label&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">contains</span><span class="p">([</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">],</span> <span class="nb">all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-419-4"><span class="p">)</span>
</span><span id="__span-419-5"><span class="nb">print</span><span class="p">(</span><span class="n">cats_and_dogs_view</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-420-1"><span class="mi">10</span>
</span></code></pre></div>
<h3 id="checking-data-types">Checking data types <a href="#Checking-data-types" title="Permalink to this headline">¶</a><a class="headerlink" href="#checking-data-types" title="Permanent link">&para;</a></h3>
<h4 id="numeric-and-string-types">Numeric and string types <a href="#Numeric-and-string-types" title="Permalink to this headline">¶</a><a class="headerlink" href="#numeric-and-string-types" title="Permanent link">&para;</a></h4>
<p>In recent versions of pandas, one can check if the data type of a <code>DataFrame</code> column is numeric or is a string by importing the corresponding functions:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-421-1"><span class="p">[</span><span class="mi">149</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-422-1"><span class="kn">from</span><span class="w"> </span><span class="nn">pandas.api.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">is_string_dtype</span>
</span><span id="__span-422-2"><span class="kn">from</span><span class="w"> </span><span class="nn">pandas.api.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">is_numeric_dtype</span>
</span><span id="__span-422-3"><span class="nb">print</span><span class="p">(</span><span class="n">is_numeric_dtype</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">sepal_length</span><span class="p">))</span>
</span><span id="__span-422-4"><span class="nb">print</span><span class="p">(</span><span class="n">is_string_dtype</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">sepal_length</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-423-1"><span class="kc">True</span>
</span><span id="__span-423-2"><span class="kc">False</span>
</span></code></pre></div>
<p>In FiftyOne, these are taken care of by the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html?highlight=viewexpression#fiftyone.core.expressions.ViewExpression.is_number">is_number()</a> and <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html?highlight=viewexpression#fiftyone.core.expressions.ViewExpression.is_string">is_strin()</a> methods:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-424-1"><span class="p">[</span><span class="mi">150</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-425-1"><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;uniqueness&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_number</span><span class="p">())</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
</span><span id="__span-425-2"><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;uniqueness&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_string</span><span class="p">())</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-426-1"><span class="mi">200</span>
</span><span id="__span-426-2"><span class="mi">0</span>
</span></code></pre></div>
<h4 id="null">Null <a href="#Null" title="Permalink to this headline">¶</a><a class="headerlink" href="#null" title="Permanent link">&para;</a></h4>
<p>In pandas, one checks whether data is null using the <code>isna</code> method:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-427-1"><span class="p">[</span><span class="mi">151</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-428-1"><span class="n">df</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-429-1"><span class="p">[</span><span class="mi">151</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-430-1"><span class="n">sepal_length</span>    <span class="kc">False</span>
</span><span id="__span-430-2"><span class="n">sepal_width</span>     <span class="kc">False</span>
</span><span id="__span-430-3"><span class="n">petal_length</span>    <span class="kc">False</span>
</span><span id="__span-430-4"><span class="n">petal_width</span>     <span class="kc">False</span>
</span><span id="__span-430-5"><span class="n">species</span>         <span class="kc">False</span>
</span><span id="__span-430-6"><span class="n">stem_length</span>     <span class="kc">False</span>
</span><span id="__span-430-7"><span class="n">sepal_volume</span>    <span class="kc">False</span>
</span><span id="__span-430-8"><span class="n">dtype</span><span class="p">:</span> <span class="nb">bool</span>
</span></code></pre></div>
<p>In FiftyOne, the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html?highlight=viewexpression#fiftyone.core.expressions.ViewExpression.is_null">is_null()</a> method does this:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-431-1"><span class="p">[</span><span class="mi">152</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-432-1"><span class="n">null_view</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">set_field</span><span class="p">(</span>
</span><span id="__span-432-2">    <span class="s2">&quot;uniqueness&quot;</span><span class="p">,</span>
</span><span id="__span-432-3">    <span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;uniqueness&quot;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mf">0.25</span><span class="p">)</span><span class="o">.</span><span class="n">if_else</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;uniqueness&quot;</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="__span-432-4"><span class="p">)</span>
</span><span id="__span-432-5">
</span><span id="__span-432-6"><span class="c1"># Create view that only contains samples with uniqueness = None</span>
</span><span id="__span-432-7"><span class="n">not_unique_view</span> <span class="o">=</span> <span class="n">null_view</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;uniqueness&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_null</span><span class="p">())</span>
</span><span id="__span-432-8">
</span><span id="__span-432-9"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">not_unique_view</span><span class="p">))</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-433-1"><span class="mi">92</span>
</span></code></pre></div>
<p>Because a FiftyOne <code>Dataset</code> can consist of samples of inhomogenous field schema, FiftyOne also provides the related methods, <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html?highlight=viewexpression#fiftyone.core.expressions.ViewExpression.exists">exists()</a>, and its converse, <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html?highlight=viewexpression#fiftyone.core.expressions.ViewExpression.is_missing">is_missing()</a>, which checks sample-wise if a
field has a value.</p>
<h4 id="array">Array <a href="#Array" title="Permalink to this headline">¶</a><a class="headerlink" href="#array" title="Permanent link">&para;</a></h4>
<p>In FiftyOne, fields can also contain arrays. We can check for this with the <a href="https://voxel51.com/docs/fiftyone/api/fiftyone.core.expressions.html?highlight=viewexpression#fiftyone.core.expressions.ViewExpression.is_array">is_array()</a> method:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-434-1"><span class="p">[</span><span class="mi">153</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-435-1"><span class="n">ds</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_array</span><span class="p">())</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-436-1"><span class="p">[</span><span class="mi">153</span><span class="p">]:</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-437-1"><span class="mi">200</span>
</span></code></pre></div>
<h2 id="conclusion">Conclusion <a href="#Conclusion" title="Permalink to this headline">¶</a><a class="headerlink" href="#conclusion" title="Permanent link">&para;</a></h2>
<p>FiftyOne and pandas are both open source Python libraries that make dealing with your data easy. While they serve different purposes - pandas is built for tabular data, while FiftyOne helps users tackle the unstructured data prevalent in computer vision tasks - their syntax and functionality are closely aligned. Both pandas and FiftyOne are important components to many data science and machine learning workflows!</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.path", "navigation.indexes", "navigation.top", {"icon": {"repo": "fontawesome/brands/github"}}, "content.action.edit"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>